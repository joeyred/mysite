@mixin generate-close-icon-colors {
  $_palette: map-keys($color-palette);

  @each $_color in $_palette {
    $_color-value: map-get($color-palette, $_color);
    &.#{$_color} {
      .icon-button {
        svg {
          fill: $_color-value;
        }
      }
    }
  }
}

@mixin generate-animation-border-color-classes {
  $_palette: map-keys($color-palette);

  @each $_color in $_palette {
    $_color-value: map-get($color-palette, $_color);
    &.#{$_color} {
      .animation_border-left {
        background: $_color-value;
      }
    }
  }
}

[data-expand="collapsed"]:not(.animation_in-progress) {

  .expandable-content {
    opacity: 0;
    height: 0;
    padding: 0;
    margin: 0;

    * {
      display: none;
      // height: 0;
      // padding: 0;
      // margin: 0;
    }
  }
}
.about-me {
  [data-expand="collapsed"]:not(.animation_in-progress) {
    transition: transform 300ms ease-out;
  }
}

.my-skills {
  [data-expand="collapsed"]:not(.animation_in-progress) {
    transition: transform 300ms ease-out 50ms;
  }
}

.my-work {
  [data-expand="collapsed"]:not(.animation_in-progress) {
    transition: transform 300ms ease-out 100ms;
  }
}

[data-expand="expanded"] {
  .expandable-content {
    height: calc(100vh - 100px);
    overflow-y: auto;
  }
}

main.content.animation_expanding-tabs_tab-active {
  overflow: hidden;

  [data-expand="collapsed"]:not(.animation_in-progress) {
    transform: translateY(70vh);
  }
}



// .animation_in-progress::before {
//   content: 'IN PROGRESS';
//   display: block;
//   position: fixed;
//   top: 0;
//   left: 0;
//   height: 2rem;
//   width: 4rem;
//   padding: 1rem;
//   background: red;
//   color: white;
// }

.titled-callout {
  @include generate-animation-border-color-classes;
  @include generate-close-icon-colors;
}

.animation_border-left {
  position: absolute;
  top: 0;
  width: $titled-callout_border-left-size;
  height: 0px;
}
.expandable {
  .titled-callout-content {
    border-left: none;
    border-left-color: none;
  }
}

.animation_expanding-tabs {
  &_expand {

    &_shift-up {
      &_transition {
        transition: transform 600ms ease-out;
      }
      &_animate {
        .icon-button {
          opacity: 0;
          svg {
            rect {
              transform: rotate(0);
            }
          }
        }
        .expandable-content {
          opacity: 0;
          height: 0;
          padding: 0;
          margin: 0;
          transform: translateX(100%);

        }
      }
    }

    &_expand-border {
      &_transition {
        .expandable-content {
          transition: transform 300ms ease-out 100ms;
        }
        .animation_border-left {
          transition: height 300ms ease;
        }
        .icon-button {
          transition: opacity 200ms ease-out 200ms;
          svg {
            rect {
              transition: transform 300ms ease-out 300ms;
            }
          }
        }
      }
      &_animate {
        .animation_border-left {
          height: calc(100% - #{$titled-callout_content_bottom-extension});
        }
        .titled-callout-content {
          border-left: none;
          border-left-color: none;
        }
        .icon-button {
          // opacity: 1;
          svg {
            rect:nth-child(3) {
              opacity: 1;
              transform: translate(-6.63px, 16px) rotate(-45deg);
            }
            rect:nth-child(2) {
              opacity: 1;
              transform: translate(16px, 38.63px) rotate(-135deg);
            }
          }
        }
      }
    }
  }

  &_collapse {
    &_collapse-border {
      &_transition {
        .expandable-content {
          transition: transform 300ms ease-out;
        }
        .animation_border-left {
          transition: height 300ms ease 100ms;
        }
        .icon-button {
          transition: opacity 200ms ease-out;
          svg {
            rect {
              transition: transform 300ms ease-out 100ms;
            }
          }
        }
      }
      &_animate {
        &[data-expand="collapsed"] {
          .titled-callout-heading {
            .icon-button {
              flex: 0 1;
              height: 100%;
              width: 100%;
              padding: 0.625rem;
            }
          }
        }
        .expandable-content {
          transform: translateX(100%);

        }
        .animation_border-left {
          height: 3px;
        }
        .icon-button {
          opacity: 0;
          svg {
            rect {
              transform: rotate(0);
            }
          }
        }
      }
    }

    &_shift-down {
      &_transition {
        transition: transform 600ms ease-out;
      }
      &_animate {
        .icon-button {
          opacity: 0;
        }
        .expandable-content {
          display: none

        }
      }
    }
  }
}
