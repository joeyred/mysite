"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}!function(){var t={modules:{},_hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},registerModule:function(t,e,n,i){var o=3<arguments.length&&void 0!==i&&i;e=e||t.prototype.constructor.name,n=n||this._hyphenate(e),this.modules[e]={name:e,dataAttr:"data-".concat(n),dataAttrTarget:"[data-".concat(n,"]"),jquery:o},this[e]=t}};window.Gingabulous=t}(),Gingabulous.animations={},Gingabulous.registerAnimation=function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null;if(Gingabulous.animations[t])throw new Error("YA DUN FUCKED UP BITCH, THEMS NAMES IS RESEVRED. READ THE SIGN DUMMY.");Gingabulous.animations[t]={setup:i,animate:e}},Gingabulous.animationSeries=function(o,t,s){for(var e=arguments.length,a=new Array(3<e?e-3:0),n=3;n<e;n++)a[n-3]=arguments[n];for(var r=0,l=null,u={base:t,current:null,previous:null},c={current:0,previousStep:null,total:0},h=[],i=0;i<a.length;i++)c.total+=a[i][1],h.push(!1);console.log(c.total),s&&s.before&&s.before(o),window.requestAnimationFrame(function t(e){var n=e-(l=l||e);if(o.classList.add("animation_in-progress"),s&&s.beforeEachFrame&&s.beforeEachFrame(o),n>=c.current&&!1===h[r]){s&&s.beforeEachStep&&s.beforeEachStep(o);var i=a[r][2]||!1;u.current=a[r][0],u.previous&&o.classList.remove("animation_".concat(u.base,"_").concat(u.previous)),o.classList.add("animation_".concat(u.base,"_").concat(u.current)),i&&i(o),u.previous=a[r][0],h[r]=!0,r!==a.length&&(c.current+=a[r][1]),s&&s.afterEachStep&&s.afterEachStep(o),r++}s&&s.afterEachFrame&&s.afterEachFrame(o),n<c.total?window.requestAnimationFrame(t):(s&&s.after&&s.after(o),o.classList.remove("animation_in-progress"),o.classList.remove("animation_".concat(u.base,"_").concat(u.current)))})},Gingabulous.breakpoints={sm:0,md:40,lg:64,xl:75,xxl:90},Gingabulous.setBreakpoints=function(t){Gingabulous.breakpoints=t},Gingabulous.activeBreakpoint=function(){var t,e=function(t){var e=document.querySelector("html");return t/parseFloat(getComputedStyle(e)["font-size"])}(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),n=0;for(var i in Gingabulous.breakpoints)if({}.hasOwnProperty.call(Gingabulous.breakpoints,i)){if(n++,Gingabulous.breakpointArray.length===n)return i;if(e>Gingabulous.breakpoints[i]){t=i;continue}return t}},Gingabulous.breakpointArray=function(t){var e=[];for(var n in t)!{}.hasOwnProperty.call(t,n)||e.push(n);return e}(Gingabulous.breakpoints),function(){var t=function(){function i(t){_classCallCheck(this,i),this.moduleName=t}return _createClass(i,[{key:"_isDebugEnabled",value:function(){return!(!Gingabulous.debugConfig[this.moduleName]||!Gingabulous.debugConfig.globalDebug)}},{key:"_addSuffixToNumber",value:function(t){var e=t%10,n=t%100;return 1==e&&11!=n?t+"st":2==e&&12!=n?t+"nd":3==e&&13!=n?t+"rd":t+"th"}},{key:"_valueType",value:function(t){return _typeof(t)}},{key:"_outputValues",value:function(t){for(var e in t)Object.hasOwnProperty.call(t,e)&&console.log(e+" is: ",t[e]," ("+this.valueType(t[e])+")")}},{key:"_outputObjectParent",value:function(){console.log("%c "+this.objectName,"color: green")}},{key:"functionReturn",value:function(t,e){this._isDebugEnabled()&&(this._outputObjectParent(),"undefined"===e?console.log(t+" has been called. Function has no return"):console.log(t+" has been called. Returned: "+e))}},{key:"values",value:function(t,e){this._isDebugEnabled()&&(this._outputObjectParent(),console.log("%c Within "+t+":","color: purple"),this._outputValues(e))}},{key:"loop",value:function(t,e,n){if(this._isDebugEnabled())if(console.log("%c Within "+t+":","color: purple"),"number"==typeof e){var i=this._addSuffixToNumber(e+1);console.log(i+" iteration of for loop:"),this._outputValues(n)}else console.log("current key in forin: "+e),this._outputValues(n)}},{key:"message",value:function(t){this._isDebugEnabled()&&console.log("%c ".concat(t),"color: blue")}}],[{key:"moduleDebugValues",value:function(t){return Gingabulous.extend({},function(){var t={};for(var e in Gingabulous.modules)Object.hasOwnProperty.call(Gingabulous.modules,e)&&(t[Gingabulous.modules[e].name]=!1);return t}(),t)}},{key:"config",value:function(t,e){var n={globalDebug:t};Gingabulous.debugConfig=Gingabulous.extend({},n,i.moduleDebugValues(e))}}]),i}();Gingabulous.Debug=t}(),function(){var t=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.listener=e,this.callbacks=[],this.registered=!1}return _createClass(n,[{key:"_handler",value:function(){if(0<this.callbacks.length)for(var t=0;t<this.callbacks.length;t++)this.callbacks[t]()}},{key:"_registerEventListener",value:function(){var t=this;this.element.addEventListener(this.listener,function(){return t._handler()})}},{key:"registerCallback",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function, not a ".concat(_typeof(t)));this.callbacks.push(t),0<this.callbacks.length&&!this.registered&&(this._registerEventListener(),this.registered=!0)}}]),n}();Gingabulous.events={},Gingabulous.registerGlobalEventListener=function(t,e,n){n=t||n,void 0===Gingabulous.events[t]&&(Gingabulous.events[t]=new Gingabulous.EventListener(e,n))},Gingabulous.EventListener=t}(),Gingabulous.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t},Gingabulous.deepExtend=function t(e){e=e||{};for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&("object"===_typeof(i[o])?e[o]=t(e[o],i[o]):e[o]=i[o])}return e},function(){var t=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.options=Gingabulous.deepExtend(n.defaults(),e),this.xhr=new XMLHttpRequest,this.api,this.activeContent,this._init(),console.log(this)}return _createClass(n,[{key:"_init",value:function(){this._ajax()}},{key:"_traverseObject",value:function(t,e){for(var n=t.split("."),i=e,o=0;o<n.length;o++)i=i[n[o]];return i}},{key:"_loadAPI",value:function(){4===this.xhr.readyState&&(this.api=JSON.parse(this.xhr.responseText))}},{key:"_ajax",value:function(){var t=this;this.xhr.onreadystatechange=function(){return t._loadAPI()},this.xhr.open("GET",this.element.getAttribute(this.attr.api)),this.xhr.send()}},{key:"_injectContent",value:function(){for(var t=0;t<this.boundElements.length;t++){var e=this.boundElements[t].getAttribute(this.attr.bind);this.boundElements[t].innerHTML=this._traverseObject(e,this.activeContent)}}},{key:"updateContent",value:function(t){this.activeContent=this._traverseObject(t,this.api),this._injectContent()}},{key:"attr",get:function(){return{container:"".concat(this.options.dataAttr,"-container"),content:"".concat(this.options.dataAttr,"-content"),api:"".concat(this.options.dataAttr,"-api"),bind:"".concat(this.options.dataAttr,"-bind")}}},{key:"boundElements",get:function(){return this.element.querySelectorAll("[".concat(this.attr.bind,"]"))}}],[{key:"defaults",value:function(){return{dataAttr:"data-inject",onLoad:!0}}}]),n}();Gingabulous.Inject=t}(),function(){var t=function(){function e(t){_classCallCheck(this,e),this.element=t,this.valueString=t.getAttribute("data-responsive"),this.breakpoints=Gingabulous.breakpoints,this.breakpointArray=Gingabulous.breakpointArray,this.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this._setState(),this._onResize()}return _createClass(e,[{key:"_isAKey",value:function(t){for(var e in this.breakpoints)if(t===e)return!0;return!1}},{key:"_parseParam",value:function(t){var e=[];if(this._isAKey(t))return e.push(t),e;var n=t.split("-"),i=n[0];if("only"===n[1])return e.push(i),e;for(var o in this.breakpointArray)!{}.hasOwnProperty.call(this.breakpointArray,o)||("up"===n[1]&&this._indexOfQuery(n[0])<=o&&e.push(this.breakpointArray[o]),"down"===n[1]&&this._indexOfQuery(n[0])>=o&&e.push(this.breakpointArray[o]));return e}},{key:"_parseArray",value:function(t,e){var n=t,i=!1;for(var o in e)if({}.hasOwnProperty.call(e,o)){for(var s in i=!1,t)e[o]===t[s]&&(i=!0);i||n.push(e[o])}return n}},{key:"_indexOfQuery",value:function(t){for(var e in this.breakpointArray)if(this.breakpointArray[e]===t)return e}},{key:"_setState",value:function(){var t;t=this.queryValues[Gingabulous.activeBreakpoint()]?"active":"inactive",this.element.setAttribute("data-responsive-state",t)}},{key:"_onResize",value:function(){var t=this;Gingabulous.events.resize||Gingabulous.registerGlobalEventListener("resize",window),Gingabulous.events.resize.registerCallback(function(){return t._setState()})}},{key:"isActive",value:function(){return this.queryValues[Gingabulous.activeBreakpoint()]}},{key:"windowWidthWasResized",value:function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=!1;return t!==this.windowWidth&&(e=!0),this.windowWidth=t,e}},{key:"valuesArray",get:function(){return void 0===this.valueString||null===this.valueString?[]:this.valueString.split(" ")}},{key:"enabledQueries",get:function(){var t=[];if(this.valuesArray.length<=0)return this.breakpointArray;for(var e in this.valuesArray)if({}.hasOwnProperty.call(this.valuesArray,e)){var n=this._parseParam(this.valuesArray[e]);t=this._parseArray(t,n)}return t}},{key:"queryValues",get:function(){var t={};for(var e in this.breakpoints)if({}.hasOwnProperty.call(this.breakpoints,e))for(var n in t[e]=!1,this.enabledQueries)e===this.enabledQueries[n]&&(t[e]=!0);return t}}]),e}();Gingabulous.Responsive=t}(),function(){var t=function(){function t(){_classCallCheck(this,t),this.lastScrollPosition=0,this.lastScrollDirection=0,this.i=0,this.scrollingDirection=0,this._event()}return _createClass(t,[{key:"_update",value:function(){var t=window.pageYOffset||document.documentElement.scrollTop;t>this.lastScrollPosition?0!==this.lastScrollDirection&&(this.i+=1,10<=this.i&&(this.i=0,this.lastScrollDirection=0)):1!==this.lastScrollDirection&&(10<=this.i&&(this.i=0,this.lastScrollDirection=1),this.i+=1),this.lastScrollPosition=t}},{key:"_event",value:function(){var t=this;Gingabulous.events.scroll.registerCallback(function(){return t._update()})}},{key:"down",value:function(){return 0===this.lastScrollDirection}},{key:"up",value:function(){return 1===this.lastScrollDirection}}]),t}();Gingabulous.ScrollDirection=t}(),function(){var t=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.options=Gingabulous.deepExtend({},this.defaults,e),this.scrollDirection=new Gingabulous.ScrollDirection,this.content=document.querySelector(this.options.contentTarget)}return _createClass(n,[{key:"init",value:function(){this._setLayerHeight(),this._events()}},{key:"_setLayerHeight",value:function(){for(var t=this.element.querySelectorAll(".layer"),e=0;e<t.length;e++)t[e].style.height=this.calculatedLayerHeight}},{key:"_syncScrolling",value:function(){var t=window.pageYOffset||document.documentElement.scrollTop;!1===this.options.scrollRatio?this.element.scrollTop=t:this.element.scrollTop=t/this.options.scrollRatio}},{key:"_events",value:function(){var t=this;Gingabulous.events.scroll.registerCallback(function(){return t._syncScrolling()})}},{key:"defaults",get:function(){return{dataAttr:Gingabulous.modules.Background.dataAttr,contentTarget:".site-wrapper",scrollRatio:5}}},{key:"calculatedLayerHeight",get:function(){return!1===this.options.scrollRatio?this.content.offsetHeight:this.content.offsetHeight/3}}]),n}();Gingabulous.registerModule(t,"Background"),Gingabulous.registerGlobalEventListener("scroll",document)}(),function(){var t=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.options=Gingabulous.deepExtend({},n.defaults(),e),this.uid=Math.round(Math.pow(32,7)-Math.random()*Math.pow(32,6)).toString(),this.responsive=new Gingabulous.Responsive(t),this.animation=!!t.hasAttribute("data-animation")&&t.getAttribute("data-animation")}return _createClass(n,[{key:"init",value:function(){this._setUID(),this.responsive.isActive()?this._setState(this.options.defaultState):this._setState(this.options.inactiveState),this.animation&&null!==Gingabulous.animations[this.animation].setup&&Gingabulous.animations[this.animation].setup(this.element),this._events()}},{key:"_setUID",value:function(){this.element.setAttribute(this.attr.uid,this.uid),this.element.querySelector("[".concat(this.attr.open,"]")).setAttribute(this.attr.open,this.uid),this.element.querySelector("[".concat(this.attr.close,"]")).setAttribute(this.attr.close,this.uid)}},{key:"_setState",value:function(t){this.element.setAttribute(this.attr.expand,t)}},{key:"_onResize",value:function(){this.responsive.windowWidthWasResized()&&(this.responsive.isActive()&&this.element.getAttribute(this.attr.expand)!==this.options.defaultState&&this._setState(this.options.defaultState),this.responsive.isActive()||this.element.getAttribute(this.attr.expand)!==this.options.inactiveState&&this._setState(this.options.inactiveState))}},{key:"_eventMatches",value:function(n,t){var i=this,e=this.element.querySelector("[".concat(n,"]")),o=!1,s=!1;if(t.target.hasAttribute(n)&&t.target.getAttribute(n)===this.uid&&(o=!0),e.contains(t.target))if(t.target.path){for(var a=0;a<t.path.length;a++)if(t.path[a].hasAttribute(n)&&t.path[a].getAttribute(n)===this.uid){s=!0;break}}else!function t(e){e.hasAttribute(n)&&e.getAttribute(n)===i.uid?s=!0:t(e.parentNode)}(t.target);return o||s}},{key:"_events",value:function(){var e=this;Gingabulous.events.resize||Gingabulous.registerGlobalEventListener("resize",window),Gingabulous.events.resize.registerCallback(function(){return e._onResize()}),this.element.addEventListener("click",function(t){console.log(t),e.responsive.isActive()&&(e._eventMatches(e.attr.open,t)&&(e._setState(e.options.states.expanded),e.animation&&Gingabulous.animations[e.animation].animate(e.element)),e._eventMatches(e.attr.close,t)&&(e._setState(e.options.states.collapsed),e.animation&&Gingabulous.animations[e.animation].animate(e.element)))})}},{key:"classes",get:function(){return{expand:this.options.class}}},{key:"attr",get:function(){return{expand:this.options.dataAttr,uid:"".concat(this.options.dataAttr,"-uid"),open:"".concat(this.options.dataAttr,"-open"),close:"".concat(this.options.dataAttr,"-close"),content:"".concat(this.options.dataAttr,"-content")}}}],[{key:"defaults",value:function(){return{dataAttr:Gingabulous.modules.Expand.dataAttr,class:"expandable",type:"basic",defaultState:"collapsed",inactiveState:"inactive",states:{expanded:"expanded",collapsed:"collapsed"},animation:null}}}]),n}();Gingabulous.registerModule(t,"Expand")}(),function(){var e=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.origin=this._getOrigin(),this.position=this.origin,this.classes=e.classes,this._isDynamic()&&(this.inject=new Gingabulous.Inject(t)),this.scrollPosition=0,this.responsive=new Gingabulous.Responsive(t),this.debug=new Gingabulous.Debug("Pane"),this._init()}return _createClass(n,[{key:"_init",value:function(){this.element.classList.add(this.classes.frozen,this.classes.fixed),this.element.classList.add(this._getOrderClass(this.originClass))}},{key:"_isDynamic",value:function(){return!!this.element.hasAttribute("data-inject-api")}},{key:"_getOrigin",value:function(){return this.element.classList.contains("right")?[1,0]:this.element.classList.contains("above")?[0,-1]:this.element.classList.contains("below")?[0,1]:[-1,0]}},{key:"_getPositionClass",value:function(t){var e=[];return-1===t[1]&&e.push(this.classes.above),1===t[1]&&e.push(this.classes.below),-1===t[0]&&e.push(this.classes.left),1===t[0]&&e.push(this.classes.right),(0!==t[0]||0!==t[1])&&(2<=e.length?e.join("-"):e.toString())}},{key:"_getOrderClass",value:function(t){return"".concat(t||this.originClass,"-order")}},{key:"_storeScrollPosition",value:function(){this.scrollPosition=window.pageYOffset||document.documentElement.scrollTop,this.debug.message("stored: ".concat(this.scrollPosition))}},{key:"_restoreScrollPosition",value:function(t){t===window?t.scrollTo(0,this.scrollPosition):t.scrollTop=this.scrollPosition}},{key:"_setWindowScrollPosition",value:function(){document.documentElement.scrollTop=this.scrollPosition,document.body.scrollTop=this.scrollPosition}},{key:"_setScrollPositionWhenFixed",value:function(){this.element.scrollTop=this.scrollPosition}},{key:"activate",value:function(){this.position=[0,0],this.element.classList.remove(this.classes.frozen,this.classes.fixed),this.element.classList.remove(this._getOrderClass(this.originClass)),this.element.classList.add(this.classes.active),this._setWindowScrollPosition(),this.element.classList.remove(this.originClass)}},{key:"deactivate",value:function(){this._storeScrollPosition(),this.position=this.origin,this.element.classList.add(this.classes.frozen,this.classes.fixed,this._getOrderClass(this.originClass)),this.element.classList.remove(this.classes.active),this._setScrollPositionWhenFixed(),this.element.classList.add(this.originClass)}},{key:"retriveOrigin",value:function(){return Array.from(this.origin)}},{key:"updatePosition",value:function(t){this.position=t}},{key:"originClass",get:function(){return this._getPositionClass(this.retriveOrigin())}}]),n}(),t=function(){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"_init",value:function(){this.element.classList.add(this.classes.active)}},{key:"_oppositeCoordinantes",value:function(t){for(var e=t,n=0;n<e.length;n++)0!==e[n]&&(e[n]*=-1);return e}},{key:"activate",value:function(){var t=this._getPositionClass(this.position);this.position=[0,0],this.element.classList.remove(this.classes.frozen,this.classes.fixed,this._getOrderClass(t)),this.element.classList.add(this.classes.active),this._setWindowScrollPosition(),this.element.classList.remove(t)}},{key:"deactivate",value:function(t){this._storeScrollPosition(),this.position=this._oppositeCoordinantes(t);var e=this._getPositionClass(this.position);this.element.classList.add(this.classes.frozen,this.classes.fixed,this._getOrderClass(e)),this.element.classList.remove(this.classes.active),this._setScrollPositionWhenFixed(),this.element.classList.add(e)}}]),t}(),n=function(){function i(t,e){var n;return _classCallCheck(this,i),(n=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t,e))).inject=new Gingabulous.Inject(t),n}return _inherits(i,e),i}(),i=function(){function i(t,e){var n;return _classCallCheck(this,i),(n=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t,e))).debug=new Gingabulous.Debug("CarouselPane"),n.carousel=n.element.querySelector("[data-carousel-panes]"),n.titleBar=n.element.querySelector(".pane-carousel-title-bar"),n._events(),n}return _inherits(i,e),_createClass(i,[{key:"_goToPane",value:function(t){var e;"left"===t&&(e="translateX(0)"),"center"===t&&(e=""),"right"===t&&(e="translateX(-200%)"),this.carousel.style.transform=e,this.titleBar.style.transform=e}},{key:"_events",value:function(){var n=this,i="data-panes-nav";this.element.addEventListener("click",function(t){if(t.target.hasAttribute(i)){var e=t.target.getAttribute(i);"left"===e&&(n._goToPane("left"),n.debug.message("left movement triggered")),"center"===e&&(n._goToPane("center"),n.debug.message("center movement triggered")),"right"===e&&(n._goToPane("right"),n.debug.message("right movement triggered"))}})}}]),i}();Gingabulous.registerModule(e,"Pane"),Gingabulous.registerModule(t,"HomePane"),Gingabulous.registerModule(n,"DynamicPane"),Gingabulous.registerModule(i,"CarouselPane")}(),function(){var t=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.element=t,this.options=Gingabulous.deepExtend({},this.defaults,e),this.classes=this.options.classes,this.state={active:"home",previous:!1},this.panes={}}return _createClass(n,[{key:"init",value:function(){this._registerPanes(),this._events()}},{key:"_updateState",value:function(t){this.state.active!==t&&(this.state.previous=this.state.active,this.state.active=t,this._updatePositions())}},{key:"_updatePositions",value:function(){"home"===this.state.previous?this.panes[this.state.previous].deactivate(this.panes[this.state.active].retriveOrigin()):this.panes[this.state.previous].deactivate(),this.panes[this.state.active].activate()}},{key:"_registerPanes",value:function(){for(var t=this.element.querySelectorAll(this.target.pane),e=0;e<t.length;e++){var n=t[e].getAttribute(this.attr.pane);""!==n&&"home"!==n&&(t[e].querySelector("[data-carousel-panes]")?this.panes[n]=new Gingabulous.CarouselPane(t[e],this.options):this.panes[n]=new Gingabulous.Pane(t[e],this.options)),"home"===n&&(this.panes[n]=new Gingabulous.HomePane(t[e],this.options))}}},{key:"_events",value:function(){var i=this;this.element.addEventListener("click",function(t){if(t.target.hasAttribute(i.attr.open)){var e=t.target.getAttribute(i.attr.open);if(i.panes[e].responsive.isActive()&&i._updateState(e),t.target.hasAttribute("data-inject")){var n=t.target.getAttribute("data-inject");i.panes[e].inject.updateContent(n)}}t.target.hasAttribute(i.attr.close)&&i._updateState("home")})}},{key:"defaults",get:function(){return{dataAttr:Gingabulous.modules.Panes.dataAttr,paneDataAttr:"data-pane",translateDistance:100,classes:{panes:"panes",pane:"pane",frozen:"frozen-pane",fixed:"fixed-pane",active:"active",left:"left",right:"right",above:"above",below:"below"}}}},{key:"attr",get:function(){return{parent:this.options.dataAttr,main:"".concat(this.options.paneDataAttr,"-home"),pane:this.options.paneDataAttr,open:"".concat(this.options.paneDataAttr,"-open"),close:"".concat(this.options.paneDataAttr,"-close")}}},{key:"target",get:function(){return{parent:"[".concat(this.options.dataAttr,"]"),main:"[".concat(this.options.paneDataAttr,"-home]"),pane:"[".concat(this.options.paneDataAttr,"]"),open:"[".concat(this.options.paneDataAttr,"-open]"),close:"[".concat(this.options.paneDataAttr,"-close]")}}}]),n}();Gingabulous.registerModule(t,"Panes")}(),Gingabulous.registerGlobalEventListener("resize",window),Gingabulous.Debug.config(!0,{Pane:!0,DynamicPane:!0,CarouselPane:!0}),Gingabulous.registerAnimation("expandingTabs",function(t){if(!t.querySelector(".animation_border-left")){var e=document.createElement("div"),n=t.querySelector(".titled-callout-heading");e.classList.add("animation_border-left"),t.insertBefore(e,n)}var i=document.querySelector(".site-inner main.content"),o=t.getAttribute("data-expand"),s="animation_expanding-tabs",a="".concat(s,"_expand"),r="".concat(s,"_collapse"),l=t.getBoundingClientRect().top;i.classList.add("animation_expanding-tabs_in-progress"),"expanded"===o&&(i.classList.add("animation_expanding-tabs_tab-active"),t.classList.remove("".concat(r,"_collapse-border_transition"),"".concat(r,"_collapse-border_animate")),t.classList.remove("".concat(r,"_shift-down_transition"),"".concat(r,"_shift-down_animate")),Gingabulous.animationSeries(t,"expanding-tabs_expand",{after:function(){i.classList.remove("animation_expanding-tabs_in-progress")}},["shift-up",600,function(t){t.style.transform="translate3d(0, -".concat(l-40,"px, 0)")}],["expand-border",400])),"collapsed"===o&&(t.classList.remove("".concat(a,"_shift-up_transition"),"".concat(a,"_shift-up_animate")),t.classList.remove("".concat(a,"_expand-border_transition"),"".concat(a,"_expand-border_animate")),Gingabulous.animationSeries(t,"expanding-tabs_collapse",{after:function(){i.classList.remove("animation_expanding-tabs_tab-active"),i.classList.remove("animation_expanding-tabs_in-progress")}},["collapse-border",400],["shift-down",600,function(t){t.style.transform=null}]))}),Gingabulous.registerAnimation("expandingCards",function(t){var e=t.getAttribute("data-expand"),n={borderLeft:t.querySelector(".border-left"),optionsBar:t.querySelector(".card-options-bar"),cover:t.querySelector(".card-cover"),bottomContainer:t.querySelector(".bottom-container")};"expanded"===e&&Gingabulous.animationSeries(t,"expanding-cards_expand",!1,["expanding",400,function(t){t.style.marginTop=0,t.style.marginBottom=0,n.borderLeft.style.height="".concat(t.offsetHeight-10,"px"),n.borderLeft.style.marginTop=null}]),"collapsed"===e&&Gingabulous.animationSeries(t,"expanding-cards_collapse",!1,["collapsing_pre-height",400,function(t){t.style.marginTop="-".concat(n.optionsBar.offsetHeight,"px"),t.style.marginBottom="-".concat(n.bottomContainer.offsetHeight,"px"),n.borderLeft.style.height="".concat(n.cover.offsetHeight,"px"),n.borderLeft.style.marginTop="".concat(n.optionsBar.offsetHeight,"px")}])},function(t){var e={borderLeft:t.querySelector(".border-left"),optionsBar:t.querySelector(".card-options-bar"),cover:t.querySelector(".card-cover"),bottomContainer:t.querySelector(".bottom-container")};t.style.marginTop="-".concat(e.optionsBar.offsetHeight,"px"),t.style.marginBottom="-".concat(e.bottomContainer.offsetHeight,"px"),e.borderLeft.style.height="".concat(e.cover.offsetHeight,"px"),e.borderLeft.style.marginTop="".concat(e.optionsBar.offsetHeight,"px")}),Gingabulous.animationSeries(document.querySelector(".loading-screen"),"loading-screen",{before:function(t){t.classList.remove(".loading")},after:function(t){t.classList.add("loading-complete")}},["in",200],["loading",600],["out",200]),function(){var t=document.querySelector(Gingabulous.modules.Panes.dataAttrTarget);new Gingabulous.Panes(t).init();var e=document.querySelector(Gingabulous.modules.Background.dataAttrTarget);new Gingabulous.Background(e).init();for(var n=document.querySelectorAll(Gingabulous.modules.Expand.dataAttrTarget),i=0;i<n.length;i++)new Gingabulous.Expand(n[i]).init()}();var recaptchaOnLoadCallback=function(){var t=document.querySelectorAll(".recaptcha");console.log("Look at me!"),console.log(t);for(var e=0;e<t.length;e++)console.log(t[e].attributes.id),grecaptcha.render(t[e],{sitekey:"6LcpNbAZAAAAAHfgedRaf3SdTgjiWjoS4NGSUTNq",theme:"dark"})};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUuanMiLCJ1dGlsLmFuaW1hdGUuanMiLCJ1dGlsLmJyZWFrcG9pbnRzLmpzIiwidXRpbC5kZWJ1Zy5qcyIsInV0aWwuZXZlbnQuanMiLCJ1dGlsLmV4dGVuZC5qcyIsInV0aWwuaW5qZWN0LmpzIiwidXRpbC5yZXNwb25zaXZlLmpzIiwidXRpbC5zY3JvbGxEaXJlY3Rpb24uanMiLCJtb2R1bGVzL2JhY2tncm91bmQuanMiLCJtb2R1bGVzL2V4cGFuZC5qcyIsIm1vZHVsZXMvcGFuZS5qcyIsIm1vZHVsZXMvcGFuZXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiR2luZ2FidWxvdXMiLCJtb2R1bGVzIiwiX2h5cGhlbmF0ZSIsInN0cmluZyIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsInJlZ2lzdGVyTW9kdWxlIiwibW9kdWxlIiwibmFtZSIsImRhdGFBdHRyTmFtZSIsImpxdWVyeSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwidGhpcyIsImRhdGFBdHRyIiwiY29uY2F0IiwiZGF0YUF0dHJUYXJnZXQiLCJ3aW5kb3ciLCJhbmltYXRpb25zIiwicmVnaXN0ZXJBbmltYXRpb24iLCJhbmltYXRpb25GdW5jIiwic2V0dXBGdW5jIiwiRXJyb3IiLCJzZXR1cCIsImFuaW1hdGUiLCJhbmltYXRpb25TZXJpZXMiLCJlbGVtZW50IiwiYmFzZUNTU0NsYXNzIiwiaG9va3MiLCJfbGVuIiwic3RlcHMiLCJBcnJheSIsIl9rZXkiLCJzdGVwSW5kZXgiLCJzdGFydCIsImNsYXNzZXMiLCJiYXNlIiwiY3VycmVudCIsInByZXZpb3VzIiwiZHVyYXRpb24iLCJwcmV2aW91c1N0ZXAiLCJ0b3RhbCIsInN0ZXBzRmlyZWQiLCJpIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJiZWZvcmUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhbmltYXRpb25TdGVwIiwidGltZXN0YW1wIiwicHJvZ3Jlc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJiZWZvcmVFYWNoRnJhbWUiLCJiZWZvcmVFYWNoU3RlcCIsImNhbGxiYWNrIiwicmVtb3ZlIiwiYWZ0ZXJFYWNoU3RlcCIsImFmdGVyRWFjaEZyYW1lIiwiYWZ0ZXIiLCJicmVha3BvaW50cyIsInNtIiwibWQiLCJsZyIsInhsIiwieHhsIiwic2V0QnJlYWtwb2ludHMiLCJhY3RpdmVCcmVha3BvaW50IiwicHJldmlvdXNLZXkiLCJ3aW5kb3dXaWR0aEluRW1zIiwicGl4ZWxzIiwiaHRtbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBhcnNlRmxvYXQiLCJnZXRDb21wdXRlZFN0eWxlIiwicGl4ZWxzVG9FbXMiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJib2R5Iiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYnJlYWtwb2ludEFycmF5IiwiRGVidWciLCJtb2R1bGVOYW1lIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2NyZWF0ZUNsYXNzIiwidmFsdWUiLCJkZWJ1Z0NvbmZpZyIsImdsb2JhbERlYnVnIiwibnVtYmVyIiwibGFzdERpZ2l0IiwibGFzdFR3b0RpZ2l0cyIsIl90eXBlb2YiLCJ2YWx1ZXMiLCJPYmplY3QiLCJ2YWx1ZVR5cGUiLCJvYmplY3ROYW1lIiwiZnVuY3Rpb25OYW1lIiwib3V0cHV0IiwiX2lzRGVidWdFbmFibGVkIiwiX291dHB1dE9iamVjdFBhcmVudCIsIl9vdXRwdXRWYWx1ZXMiLCJjdXJyZW50SXRlcmF0aW9uIiwiX2FkZFN1ZmZpeFRvTnVtYmVyIiwibWVzc2FnZSIsIm9wdGlvbnMiLCJleHRlbmQiLCJkZWZhdWx0cyIsImdsb2JhbEVuYWJsZSIsIm1vZHVsZXNFbmFibGUiLCJtb2R1bGVEZWJ1Z1ZhbHVlcyIsIkV2ZW50TGlzdGVuZXIiLCJsaXN0ZW5lciIsImNhbGxiYWNrcyIsInJlZ2lzdGVyZWQiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlciIsIlR5cGVFcnJvciIsIl9yZWdpc3RlckV2ZW50TGlzdGVuZXIiLCJldmVudHMiLCJyZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIiLCJvdXQiLCJkZWVwRXh0ZW5kIiwib2JqIiwiSW5qZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJhcGkiLCJhY3RpdmVDb250ZW50IiwiX2luaXQiLCJfYWpheCIsImNoYWluIiwib2JqZWN0Iiwia2V5cyIsInNwbGl0IiwicmVhZHlTdGF0ZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIl9sb2FkQVBJIiwib3BlbiIsImdldEF0dHJpYnV0ZSIsImF0dHIiLCJzZW5kIiwiYm91bmRFbGVtZW50cyIsImJpbmQiLCJpbm5lckhUTUwiLCJfdHJhdmVyc2VPYmplY3QiLCJfaW5qZWN0Q29udGVudCIsImdldCIsImNvbnRhaW5lciIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwib25Mb2FkIiwiUmVzcG9uc2l2ZSIsInZhbHVlU3RyaW5nIiwid2luZG93V2lkdGgiLCJfc2V0U3RhdGUiLCJfb25SZXNpemUiLCJrZXlUb0NoZWNrIiwicGFyYW0iLCJfaXNBS2V5Iiwic3BsaXRQYXJhbSIsInF1ZXJ5IiwiaW5kZXgiLCJfaW5kZXhPZlF1ZXJ5Iiwib2xkQXJyYXkiLCJuZXdBcnJheSIsImlzSW5PbGRBcnJheSIsIm5JbmRleCIsIm9JbmRleCIsInN0YXRlIiwicXVlcnlWYWx1ZXMiLCJzZXRBdHRyaWJ1dGUiLCJyZXNpemUiLCJyZWdpc3RlckNhbGxiYWNrIiwiY3VycmVudFdpbmRvd1dpZHRoIiwidmFsdWVzQXJyYXkiLCJwYXJzZWRWYWx1ZSIsIl9wYXJzZVBhcmFtIiwiX3BhcnNlQXJyYXkiLCJlbmFibGVkUXVlcmllcyIsIlNjcm9sbERpcmVjdGlvbiIsImxhc3RTY3JvbGxQb3NpdGlvbiIsImxhc3RTY3JvbGxEaXJlY3Rpb24iLCJzY3JvbGxpbmdEaXJlY3Rpb24iLCJfZXZlbnQiLCJjdXJyZW50U2Nyb2xsUG9zaXRpb24iLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsInNjcm9sbCIsIl91cGRhdGUiLCJCYWNrZ3JvdW5kIiwic2Nyb2xsRGlyZWN0aW9uIiwiY29udGVudFRhcmdldCIsIl9zZXRMYXllckhlaWdodCIsIl9ldmVudHMiLCJsYXllcnMiLCJzdHlsZSIsImhlaWdodCIsImNhbGN1bGF0ZWRMYXllckhlaWdodCIsInNjcm9sbFJhdGlvIiwiX3N5bmNTY3JvbGxpbmciLCJvZmZzZXRIZWlnaHQiLCJFeHBhbmQiLCJ1aWQiLCJNYXRoIiwicm91bmQiLCJwb3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsInJlc3BvbnNpdmUiLCJhbmltYXRpb24iLCJoYXNBdHRyaWJ1dGUiLCJfc2V0VUlEIiwiaXNBY3RpdmUiLCJkZWZhdWx0U3RhdGUiLCJpbmFjdGl2ZVN0YXRlIiwiY2xvc2UiLCJleHBhbmQiLCJ3aW5kb3dXaWR0aFdhc1Jlc2l6ZWQiLCJldmVudCIsImNvbmRpdGlvbk9uZSIsImNvbmRpdGlvblR3byIsInRhcmdldCIsImNvbnRhaW5zIiwicGF0aCIsImZpbmRFbGVtZW50V2l0aERhdGFBdHRyIiwiX2VsZW1lbnQiLCJwYXJlbnROb2RlIiwiX3RoaXMyIiwiX2V2ZW50TWF0Y2hlcyIsInN0YXRlcyIsImV4cGFuZGVkIiwiY29sbGFwc2VkIiwiY2xhc3MiLCJ0eXBlIiwiUGFuZSIsImluaGVyaXRlZE9wdGlvbnMiLCJvcmlnaW4iLCJfZ2V0T3JpZ2luIiwicG9zaXRpb24iLCJfaXNEeW5hbWljIiwiaW5qZWN0Iiwic2Nyb2xsUG9zaXRpb24iLCJkZWJ1ZyIsImZyb3plbiIsImZpeGVkIiwiX2dldE9yZGVyQ2xhc3MiLCJvcmlnaW5DbGFzcyIsImNvb3JkaW5hdGVzIiwiY3NzQ2xhc3MiLCJhYm92ZSIsImJlbG93IiwibGVmdCIsInJpZ2h0Iiwiam9pbiIsInBvc2l0aW9uQ2xhc3MiLCJzY3JvbGxUbyIsImFjdGl2ZSIsIl9zZXRXaW5kb3dTY3JvbGxQb3NpdGlvbiIsIl9zdG9yZVNjcm9sbFBvc2l0aW9uIiwiX3NldFNjcm9sbFBvc2l0aW9uV2hlbkZpeGVkIiwiZnJvbSIsIl9nZXRQb3NpdGlvbkNsYXNzIiwicmV0cml2ZU9yaWdpbiIsIkhvbWVQYW5lIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfZ2V0UHJvdG90eXBlT2YiLCJhcHBseSIsIl9pbmhlcml0cyIsIm9yaWdpbk9mQWN0aXZlUGFuZSIsIl9vcHBvc2l0ZUNvb3JkaW5hbnRlcyIsIkR5bmFtaWNQYW5lIiwiQ2Fyb3VzZWxQYW5lIiwiY2Fyb3VzZWwiLCJ0aXRsZUJhciIsInBhbmUiLCJ0cmFuc2xhdGUiLCJ0cmFuc2Zvcm0iLCJfdGhpczMiLCJhdHRyVmFsdWUiLCJfZ29Ub1BhbmUiLCJQYW5lcyIsInBhbmVzIiwiX3JlZ2lzdGVyUGFuZXMiLCJpZCIsIl91cGRhdGVQb3NpdGlvbnMiLCJkZWFjdGl2YXRlIiwiYWN0aXZhdGUiLCJwYW5lc0luRG9jdW1lbnQiLCJfdXBkYXRlU3RhdGUiLCJ1cGRhdGVDb250ZW50IiwicGFuZURhdGFBdHRyIiwidHJhbnNsYXRlRGlzdGFuY2UiLCJwYXJlbnQiLCJtYWluIiwiY29uZmlnIiwiYm9yZGVyIiwiY3JlYXRlRWxlbWVudCIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJ3cmFwcGVyRWxlbWVudCIsImFuaW1hdGlvbkNsYXNzIiwiZXhwYW5kQmFzZSIsImNvbGxhcHNlQmFzZSIsInBvc2l0aW9uVG9wIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiY2hpbGROb2RlcyIsImJvcmRlckxlZnQiLCJvcHRpb25zQmFyIiwiY292ZXIiLCJib3R0b21Db250YWluZXIiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJwYW5lc05vZGUiLCJpbml0IiwiYmFja2dyb3VuZE5vZGUiLCJleHBhbmRhYmxlTm9kZXMiLCJyZWNhcHRjaGFPbkxvYWRDYWxsYmFjayIsImNvbnRhY3RGb3JtcyIsImF0dHJpYnV0ZXMiLCJncmVjYXB0Y2hhIiwicmVuZGVyIiwic2l0ZWtleSIsInRoZW1lIl0sIm1h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LEVBQUksRUFBR0EsRUFBSTRSLEVBQWE5VCxPQUFRa0MsSUFDdkNFLFFBQVFDLElBQUl5UixFQUFhNVIsR0FBRzZSLFdBQVdwQyxJQUN2Q3FDLFdBQVdDLE9BQU9ILEVBQWE1UixHQUFJLENBQ2pDZ1MsUUFBUywyQ0FDVEMsTUFBTyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gJ3VzZSBzdHJpY3QnO1xuXG4hZnVuY3Rpb24oKSB7XG52YXIgR2luZ2FidWxvdXMgPSB7XG4gIG1vZHVsZXM6IHt9LFxuXG4gIC8vIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAvLyAgIGZvciAobGV0IG1vZHVsZSBpbiB0aGlzLm1vZHVsZXMpIHtcbiAgLy8gICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMubW9kdWxlcywgbW9kdWxlKSkge1xuICAvLyAgICAgICBpZiAobW9kdWxlKVxuICAvLyAgICAgICAkKG1vZHVsZS5kYXRhQXR0cikuZWFjaCh0aGlzLl9pbml0SW5zdGFuY2UobW9kdWxlKSk7XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyB9LFxuICAvLyBfaW5pdEluc3RhbmNlOiBmdW5jdGlvbihtb2R1bGUpIHtcbiAgLy8gICBbbW9kdWxlLm5hbWVdID0gbmV3IHRoaXNbbW9kdWxlLm5hbWVdKCk7XG4gIC8vIH0sXG4gIC8qKlxuICAgKiBDb3ZlcnQgQ2FtYWxDYXNlIHRvIGh5cGhlbmF0ZWQgc3RyaW5nLlxuICAgKiBAbWV0aG9kIF9oeXBoZW5hdGVcbiAgICpcbiAgICogRm91bmQgaW4gRm91bmRhdGlvbiBmb3IgU2l0ZXMgY29yZSBmaWxlLiBMaW5rIHRvIHRoYXQgZmlsZSwgYW5kIHRoZSBsaW5rIHRoZXkgaGF2ZVxuICAgKiBhcyB0aGUgc291cmNlIGZvciB0aGUgc29sdXRpb24uXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS96dXJiL2ZvdW5kYXRpb24tc2l0ZXMvYmxvYi9kZXZlbG9wL2pzL2ZvdW5kYXRpb24uY29yZS5qc1xuICAgKiBAbGluayBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84OTU1NTgwXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gICBzdHJpbmcgLSBTdHJpbmcgdG8gcGFyc2UgYW5kIGNvdmVydC5cbiAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAtIGh5cGhlbmF0ZWQgc3RyaW5nLlxuICAgKi9cbiAgX2h5cGhlbmF0ZTogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xuICB9LFxuICAvLyBfZ2V0RGF0YUF0dHI6IGZ1bmN0aW9uKGRhdGFBdHRyTmFtZSkge1xuICAvLyAgIHJldHVybiBgZGF0YS0ke2RhdGFBdHRyTmFtZX1gO1xuICAvLyB9LFxuICByZWdpc3Rlck1vZHVsZTogZnVuY3Rpb24obW9kdWxlLCBuYW1lLCBkYXRhQXR0ck5hbWUsIGpxdWVyeSA9IGZhbHNlKSB7XG4gICAgbmFtZSA9IG5hbWUgfHwgbW9kdWxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIC8vIElmIG5vIHZhbHVlIGZvciBgZGF0YUF0dHJOYW1lYCBpcyBwYXNzZWQsIHRoZW4gYXNzaWduIGBuYW1lYCB0byB0aGUgdmFsdWUuXG4gICAgZGF0YUF0dHJOYW1lID0gZGF0YUF0dHJOYW1lIHx8IHRoaXMuX2h5cGhlbmF0ZShuYW1lKTtcbiAgICAvLyBBZGQgdGhlIG1vZHVsZSB0byB0aGUgYG1vZHVsZXNgIG9iamVjdC5cbiAgICB0aGlzLm1vZHVsZXNbbmFtZV0gPSB7XG4gICAgICBuYW1lOiAgICAgICAgICAgbmFtZSxcbiAgICAgIGRhdGFBdHRyOiAgICAgICBgZGF0YS0ke2RhdGFBdHRyTmFtZX1gLFxuICAgICAgZGF0YUF0dHJUYXJnZXQ6IGBbZGF0YS0ke2RhdGFBdHRyTmFtZX1dYCxcbiAgICAgIGpxdWVyeTogICAgICAgICBqcXVlcnlcbiAgICB9O1xuICAgIHRoaXNbbmFtZV0gPSBtb2R1bGU7XG4gIH1cbiAgLy8gVE9ETyBUdXJuIHRoaXMgaW50byBhIHJlZ2lzdHJhdGlvbiBvZiBhIG5hbWVzcGFjZSBmb3IgYSBncm91cCBvZiBtb2R1bGVzLlxuICAvLyByZWdpc3Rlck5hbWVzcGFjZWRNb2R1bGU6IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQpIHtcbiAgLy8gICAvLyBsZXQgcGFyZW50TmFtZSA9IHBhcmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IubmFtZTtcbiAgLy8gICBsZXQgY2hpbGROYW1lID0gY2hpbGQucHJvdG90eXBlLmNvbnN0cnVjdG9yLm5hbWU7XG4gIC8vXG4gIC8vICAgLy8gTWFrZSBzdXJlIHRoZSBwYXJlbnQgbW9kdWxlIGV4aXN0cy5cbiAgLy8gICBpZiAodGhpc1twYXJlbnRdICE9PSB1bmRlZmluZWQpIHtcbiAgLy8gICAgIC8vIE1ha2Ugc3VyZSB0aGUgY2hpbGQgbW9kdWxlIGlzbid0IGluZnJpbmdpbmcgb24gYW5vdGhlciBjaGlsZCdzIG5hbWVzcGFjZS5cbiAgLy8gICAgIGlmICh0aGlzW3BhcmVudF1bY2hpbGROYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gIC8vICAgICAgIHRoaXNbcGFyZW50XVtjaGlsZE5hbWVdID0gY2hpbGQ7XG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFscmVhZHkgYSBjaGlsZCBtb2R1bGUgY2FsbGVkICR7Y2hpbGROYW1lfWApO1xuICAvLyAgICAgfVxuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cGFyZW50fSBtb2R1bGUgZG9lcyBub3QgZXhpc3RgKTtcbiAgLy8gICB9XG4gIC8vIH1cbn07XG5cbi8vIEdpbmdhYnVsb3VzLnJlZ2lzdGVyR2xvYmFsRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgd2luZG93KTtcblxud2luZG93LkdpbmdhYnVsb3VzID0gR2luZ2FidWxvdXM7XG59KCk7XG4iLCIhZnVuY3Rpb24oKSB7XG4vLyBjb25zdCBhbmltYXRpb25TdGVwID0gKHRpbWVzdGFtcCwgc3RhcnQpID0+IHtcbi8vICAgc3RhcnQgPSBzdGFydCA/IHN0YXJ0IDogdGltZXN0YW1wO1xuLy8gICBsZXQgcHJvZ3Jlc3MgPSB0aW1lc3RhbXAgLSBzdGFydDtcbi8vXG4vLyAgIGlmIChwcm9ncmVzcyA9PT0gZHVyYXRpb24pXG4vLyB9O1xuXG5jb25zdCBhbmltYXRpb25TZXJpZXMgPSAoZWxlbWVudCwgYmFzZUNTU0NsYXNzLCBob29rcywgLi4uc3RlcHMpID0+IHtcbiAgbGV0IHN0ZXBJbmRleCA9IDA7XG4gIGxldCBzdGFydCA9IG51bGw7XG4gIGxldCBzdGVwU3RhcnQgPSBudWxsO1xuICBsZXQgY2xhc3NlcyA9IHtcbiAgICBiYXNlOiAgICAgYmFzZUNTU0NsYXNzLFxuICAgIGN1cnJlbnQ6ICBudWxsLFxuICAgIHByZXZpb3VzOiBudWxsXG4gIH07XG4gIGxldCBkdXJhdGlvbiA9IHtcbiAgICBjdXJyZW50OiAgICAgIDAsXG4gICAgcHJldmlvdXNTdGVwOiBudWxsLFxuICAgIHRvdGFsOiAgICAgICAgMFxuICB9O1xuICBsZXQgc3RlcHNGaXJlZCA9IFtdO1xuXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgc3RlcHMgYW5kIHB1dCB0b2dldGhlciB3aGF0ZXZlciB2YWx1ZXMgbWF5IGJlIG5lZWRlZC5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwcy5sZW5ndGg7IGkrKykge1xuICAgIC8vIEdldCB0b3RhbCBkdXJhdGlvblxuICAgIGR1cmF0aW9uLnRvdGFsICs9IHN0ZXBzW2ldWzFdO1xuXG4gICAgc3RlcHNGaXJlZC5wdXNoKGZhbHNlKTtcbiAgfVxuICBjb25zb2xlLmxvZyhkdXJhdGlvbi50b3RhbCk7XG5cbiAgLy8gQW5pYW10aW9uIFN0ZXBcbiAgZnVuY3Rpb24gYW5pbWF0aW9uU3RlcCh0aW1lc3RhbXApIHtcbiAgICBzdGFydCA9IHN0YXJ0ID8gc3RhcnQgOiB0aW1lc3RhbXA7XG4gICAgc3RlcFN0YXJ0ID0gc3RlcFN0YXJ0ID8gc3RlcFN0YXJ0IDogdGltZXN0YW1wO1xuICAgIC8vIGxldCBzdGVwUHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKHRpbWVzdGFtcCAtIHN0ZXBTdGFydCk7XG4gICAgbGV0IHByb2dyZXNzID0gdGltZXN0YW1wIC0gc3RhcnQ7XG4gICAgLy8gU2V0IGluIHByZ3Jlc3NcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGlvbl9pbi1wcm9ncmVzcycpO1xuXG4gICAgLy8gSE9PSzogQmVmb3JlIEVhY2ggRnJhbWVcbiAgICBpZiAoaG9va3MgJiYgaG9va3MuYmVmb3JlRWFjaEZyYW1lKSB7XG4gICAgICBob29rcy5iZWZvcmVFYWNoRnJhbWUoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgLy8gU2VjcmV0IGxvb3AgaGlkaW5nIGluIHRoZSBsb29wIHRoYXQgaXMgaXRzZWxmIHRoZSBzYW1lIGxvb3AuXG4gICAgLy9cbiAgICAvLyBMb29wY2VwdGlvblxuICAgIC8vXG4gICAgLy8gV3JpdHRlbiBhbmQgZGlyZWN0ZWQgYnkgQ2hyaXN0b3BoZXIgTm9sYW5cbiAgICBpZiAocHJvZ3Jlc3MgPj0gZHVyYXRpb24uY3VycmVudCAmJiBzdGVwc0ZpcmVkW3N0ZXBJbmRleF0gPT09IGZhbHNlKSB7XG4gICAgICAvLyBIT09LOiBCZWZvcmUgRWFjaCBTdGVwXG4gICAgICBpZiAoaG9va3MgJiYgaG9va3MuYmVmb3JlRWFjaFN0ZXApIHtcbiAgICAgICAgaG9va3MuYmVmb3JlRWFjaFN0ZXAoZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBjYWxsYmFjayA9IHN0ZXBzW3N0ZXBJbmRleF1bMl0gfHwgZmFsc2U7XG4gICAgICBjbGFzc2VzLmN1cnJlbnQgPSBzdGVwc1tzdGVwSW5kZXhdWzBdO1xuICAgICAgLy8gUmVtb3ZlIGNsYXNzZXMgaWYgcHJldmlvdXMgb25lcyBleGlzdFxuICAgICAgaWYgKGNsYXNzZXMucHJldmlvdXMpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGBhbmltYXRpb25fJHtjbGFzc2VzLmJhc2V9XyR7Y2xhc3Nlcy5wcmV2aW91c31gKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGNsYXNzZXMgZm9yIHRoaXMgYW5pbWF0aW9uIHN0ZXBcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChgYW5pbWF0aW9uXyR7Y2xhc3Nlcy5iYXNlfV8ke2NsYXNzZXMuY3VycmVudH1gKTtcblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgLy8gU2V0IHByZXZpb3VzIHByb3BlcnRpZXMgZm9yIHRoZSBuZXh0IHN0ZXAgdG8gdXNlXG4gICAgICBjbGFzc2VzLnByZXZpb3VzID0gc3RlcHNbc3RlcEluZGV4XVswXTtcbiAgICAgIC8vIFRoZSBzdGVwIGhhcyBiZWVuIGZpcmVkXG4gICAgICBzdGVwc0ZpcmVkW3N0ZXBJbmRleF0gPSB0cnVlO1xuICAgICAgLy8gb25seSBhZGQgdG8gdGhlIGR1cnJhdGlvbiBhcyBsb25nIGFzIGl0IGlzbnQgdGhlIGxhc3Qgc3RlcC5cbiAgICAgIGlmIChzdGVwSW5kZXggIT09IHN0ZXBzLmxlbmd0aCkge1xuICAgICAgICBkdXJhdGlvbi5jdXJyZW50ICs9IHN0ZXBzW3N0ZXBJbmRleF1bMV07XG4gICAgICB9XG4gICAgICBpZiAoaG9va3MgJiYgaG9va3MuYWZ0ZXJFYWNoU3RlcCkge1xuICAgICAgICBob29rcy5hZnRlckVhY2hTdGVwKGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgLy8gVXAgdGhlIHN0ZXAgaW5kZXhcbiAgICAgIHN0ZXBJbmRleCsrO1xuICAgIH1cblxuICAgIC8vIEhPT0s6IGFmdGVyRWFjaEZyYW1lXG4gICAgaWYgKGhvb2tzICYmIGhvb2tzLmFmdGVyRWFjaEZyYW1lKSB7XG4gICAgICBob29rcy5hZnRlckVhY2hGcmFtZShlbGVtZW50KTtcbiAgICB9XG4gICAgLy8gSW52b2tlIHRoZSBuZXh0IGZyYW1lIGFzIGxvbmcgYXMgdGhlIHRvdGFsIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gc2VyaWVzXG4gICAgLy8gaGFzbid0IGJlZW4gZXhjZWRlZC5cbiAgICBpZiAocHJvZ3Jlc3MgPCBkdXJhdGlvbi50b3RhbCkge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb25TdGVwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSE9PSzogYWZ0ZXJcbiAgICAgIGlmIChob29rcyAmJiBob29rcy5hZnRlcikge1xuICAgICAgICBob29rcy5hZnRlcihlbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uX2luLXByb2dyZXNzJyk7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYGFuaW1hdGlvbl8ke2NsYXNzZXMuYmFzZX1fJHtjbGFzc2VzLmN1cnJlbnR9YCk7XG4gICAgfVxuICB9XG4gIC8vIEhPT0s6IEJlZm9yZVxuICBpZiAoaG9va3MgJiYgaG9va3MuYmVmb3JlKSB7XG4gICAgaG9va3MuYmVmb3JlKGVsZW1lbnQpO1xuICB9XG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uU3RlcCk7XG59O1xuXG5jb25zdCByZWdpc3RlckFuaW1hdGlvbiA9IChuYW1lLCBhbmltYXRpb25GdW5jLCBzZXR1cEZ1bmMgPSBudWxsKSA9PiB7XG4gIGlmIChHaW5nYWJ1bG91cy5hbmltYXRpb25zW25hbWVdKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1lBIERVTiBGVUNLRUQgVVAgQklUQ0gsIFRIRU1TIE5BTUVTIElTIFJFU0VWUkVELiBSRUFEIFRIRSBTSUdOIERVTU1ZLidcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIEdpbmdhYnVsb3VzLmFuaW1hdGlvbnNbbmFtZV0gPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRvIGJlIGZpcmVkIGluIGEgbW9kdWxlIGluaXQgbWV0aG9kIGZvciBhbnkgc2V0dXAgdGhhdCBtYXkgbmVlZCB0byBiZSBkb25lIGluIEpTXG4gICAgICAgKiB0byBtYWtlIHRoZSBhbmltYXRpb24gd29yayBwcm9wZXJseS5cbiAgICAgICAqIEB0eXBlIHtGdW5jdGlvbnxudWxsfVxuICAgICAgICovXG4gICAgICBzZXR1cDogICBzZXR1cEZ1bmMsXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgc3RhdGUgY2hhbmdlIGFuaW1hdGlvbnMuXG4gICAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICAgKi9cbiAgICAgIGFuaW1hdGU6IGFuaW1hdGlvbkZ1bmNcbiAgICB9O1xuICB9XG59O1xuXG5HaW5nYWJ1bG91cy5hbmltYXRpb25zID0ge307XG5HaW5nYWJ1bG91cy5yZWdpc3RlckFuaW1hdGlvbiA9IHJlZ2lzdGVyQW5pbWF0aW9uO1xuR2luZ2FidWxvdXMuYW5pbWF0aW9uU2VyaWVzID0gYW5pbWF0aW9uU2VyaWVzO1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuLyoqXG4gKiBEZWZhdWx0IGJyZWFrcG9pbnQgdmFsdWVzIGluIGVtc1xuICogQHR5cGUge09iamVjdH1cbiAqL1xuR2luZ2FidWxvdXMuYnJlYWtwb2ludHMgPSB7XG4gIHNtOiAgMCxcbiAgbWQ6ICA0MCxcbiAgbGc6ICA2NCxcbiAgeGw6ICA3NSxcbiAgeHhsOiA5MFxufTtcblxuLyoqXG4gKiBUaGlzIGFsbG93cyBmb3IgdGhlIG92ZXJ3cml0aW5nIG9mIHRoZSBkZWZhdWx0IGJyZWFrcG9pbnRzLiBDYWxsIHRoaXMgaW4geW91ciBtYWluXG4gKiBhcHAvaW5kZXggZmlsZSwgYmVmb3JlIHlvdSBjYWxsIGFueSBvdGhlciBmdW5jdGlvbi5cbiAqIEBtZXRob2RcbiAqIEBwYXJhbSAge09iamVjdH0gYnJlYWtwb2ludHMgLSBBbiBvYmplY3Qgb2Yga2V5cyB0aGF0IGFyZSB0aGUgbmFtZXMgb2YgdGhlIGJyZWFrcG9pbnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgdmFsdWVzIHRoYXQgYXJlIHRoZSBicmVha3BvaW50IGluIGVtcy5cbiAqL1xuR2luZ2FidWxvdXMuc2V0QnJlYWtwb2ludHMgPSBmdW5jdGlvbihicmVha3BvaW50cykge1xuICBHaW5nYWJ1bG91cy5icmVha3BvaW50cyA9IGJyZWFrcG9pbnRzO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBwaXhlbCB2YWx1ZXMgdG8gZW0gdmFsdWVzIGJhc2VkIG9uIHRoZSBgaHRtbGAgbGV2ZWwgYGZvbnQtc2l6ZWAuXG4gKiBAbWV0aG9kIHBpeGVsc1RvRW1zXG4gKiBAcGFyYW0gIHtOdW1iZXJ8U3RyaW5nfSAgICBwaXhlbHMgLSBwaXhlbCB2YWx1ZSB0byBiZSBjb252ZXJ0ZWQgdG8gZW1zLlxuICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICAgICAgICAgIC0gdmFsdWUgaW4gZW1zLlxuICovXG5mdW5jdGlvbiBwaXhlbHNUb0VtcyhwaXhlbHMpIHtcbiAgbGV0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gIHJldHVybiBwaXhlbHMgLyBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoaHRtbClbJ2ZvbnQtc2l6ZSddKTtcbn1cblxuZnVuY3Rpb24gYnJlYWtwb2ludEFycmF5KGJyZWFrcG9pbnRzKSB7XG4gIGxldCBicmVha3BvaW50QXJyYXkgPSBbXTtcbiAgZm9yIChsZXQga2V5IGluIGJyZWFrcG9pbnRzKSB7XG4gICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoYnJlYWtwb2ludHMsIGtleSkpIHtcbiAgICAgIGJyZWFrcG9pbnRBcnJheS5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBicmVha3BvaW50QXJyYXk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBhY3RpdmUgYnJlYWtwb2ludCBhcyBhIHN0cmluZy4gVGhlIHZhbHVlIGlzIHRoZSBzYW1lIGFzXG4gKiB0aGUga2V5cyB1c2VkIGluIHRoZSBicmVha3BvaW50cyBvYmplY3QuXG4gKiBAbWV0aG9kIGFjdGl2ZUJyZWFrcG9pbnRcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBicmVha3BvaW50LlxuICovXG5mdW5jdGlvbiBhY3RpdmVCcmVha3BvaW50KCkge1xuICBsZXQgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fFxuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHxcbiAgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcbiAgbGV0IHdpbmRvd1dpZHRoSW5FbXMgPSBwaXhlbHNUb0Vtcyh3aW5kb3dXaWR0aCk7XG4gIC8vIGNvbnNvbGUubG9nKHdpbmRvd1dpZHRoLCB3aW5kb3dXaWR0aEluRW1zKTtcblxuICBsZXQgcHJldmlvdXNLZXk7XG4gIGxldCBpID0gMDtcbiAgZm9yIChsZXQga2V5IGluIEdpbmdhYnVsb3VzLmJyZWFrcG9pbnRzKSB7XG4gICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoR2luZ2FidWxvdXMuYnJlYWtwb2ludHMsIGtleSkpIHtcbiAgICAgIC8vIFRoaXMgZml4ZXMgdGhlIGJ1ZyB3aGVyZSB0aGUgZmluYWwgYnJlYWtwb2ludCBpc250IGhvbm9yZWQuXG4gICAgICBpKys7XG4gICAgICAvLyBjb25zb2xlLmxvZyhpKTtcbiAgICAgIGlmIChHaW5nYWJ1bG91cy5icmVha3BvaW50QXJyYXkubGVuZ3RoID09PSBpKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgICB9XG4gICAgICBpZiAod2luZG93V2lkdGhJbkVtcyA+IEdpbmdhYnVsb3VzLmJyZWFrcG9pbnRzW2tleV0pIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2xvb3AgY29udGludWVkJyk7XG4gICAgICAgIHByZXZpb3VzS2V5ID0ga2V5O1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHByZXZpb3VzS2V5KTtcbiAgICAgICAgLy8gUmVzZXQgaW5kZXggb2YgbG9vcC5cbiAgICAgICAgcmV0dXJuIHByZXZpb3VzS2V5O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5HaW5nYWJ1bG91cy5hY3RpdmVCcmVha3BvaW50ID0gYWN0aXZlQnJlYWtwb2ludDtcbkdpbmdhYnVsb3VzLmJyZWFrcG9pbnRBcnJheSA9IGJyZWFrcG9pbnRBcnJheShHaW5nYWJ1bG91cy5icmVha3BvaW50cyk7XG59KCk7XG4iLCIhZnVuY3Rpb24oKSB7XG5jbGFzcyBEZWJ1ZyB7XG4gIGNvbnN0cnVjdG9yKG1vZHVsZU5hbWUpIHtcbiAgICB0aGlzLm1vZHVsZU5hbWUgPSBtb2R1bGVOYW1lO1xuICB9XG4gIHN0YXRpYyBtb2R1bGVEZWJ1Z1ZhbHVlcyhvcHRpb25zKSB7XG4gICAgbGV0IGRlZmF1bHRzID0gKCkgPT4ge1xuICAgICAgbGV0IG91dHB1dCA9IHt9O1xuICAgICAgZm9yIChsZXQgbW9kdWxlIGluIEdpbmdhYnVsb3VzLm1vZHVsZXMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKEdpbmdhYnVsb3VzLm1vZHVsZXMsIG1vZHVsZSkpIHtcbiAgICAgICAgICBvdXRwdXRbR2luZ2FidWxvdXMubW9kdWxlc1ttb2R1bGVdLm5hbWVdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbiAgICByZXR1cm4gR2luZ2FidWxvdXMuZXh0ZW5kKHt9LCBkZWZhdWx0cygpLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgY29uZmlnKGdsb2JhbEVuYWJsZSwgbW9kdWxlc0VuYWJsZSkge1xuICAgIGxldCBvdXRwdXQgPSB7XG4gICAgICBnbG9iYWxEZWJ1ZzogZ2xvYmFsRW5hYmxlXG4gICAgfTtcbiAgICBHaW5nYWJ1bG91cy5kZWJ1Z0NvbmZpZyA9IEdpbmdhYnVsb3VzLmV4dGVuZChcbiAgICAgIHt9LFxuICAgICAgb3V0cHV0LFxuICAgICAgRGVidWcubW9kdWxlRGVidWdWYWx1ZXMobW9kdWxlc0VuYWJsZSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBib3RoIHRoZSBnbG9iYWwgYW5kIGxvY2FsIG9wdGlvbnMgZm9yIGRlYnVnIG91dHB1dCB0byBjb25zb2xlLlxuICAgKlxuICAgKiBAbWV0aG9kIF9pc0RlYnVnRW5hYmxlZFxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAtIFdoZXRoZXIgZW5hYmxlZCBkZWJ1ZyBvdXRwdXQgaXMgdHJ1ZSBvciBmYWxzZS5cbiAgICovXG4gIF9pc0RlYnVnRW5hYmxlZCgpIHtcbiAgICBpZiAoR2luZ2FidWxvdXMuZGVidWdDb25maWdbdGhpcy5tb2R1bGVOYW1lXSAmJiBHaW5nYWJ1bG91cy5kZWJ1Z0NvbmZpZy5nbG9iYWxEZWJ1Zykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHN1ZmZpeCB0byBudW1iZXIgcGFzc2VkLlxuICAgKlxuICAgKiBAbWV0aG9kIF9hZGRTdWZmaXhUb051bWJlclxuICAgKlxuICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgICAgICAgIG51bWJlciAtIFRoZSBudW1iZXIgdG8gaGF2ZSBhIHN1ZmZpeCBhZGRlZCB0by5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgICAgICAgLSBOdW1iZXIgd2l0aCBzdWZmaXggYWRkZWQuXG4gICAqL1xuICBfYWRkU3VmZml4VG9OdW1iZXIobnVtYmVyKSB7XG4gICAgLy8gR2V0IHJlbWFpbmRlciBvZiBgbnVtYmVyYCBkaXZpZGVkIGJ5IDEwLlxuICAgIHZhciBsYXN0RGlnaXQgPSBudW1iZXIgJSAxMDtcbiAgICAvLyBHZXQgcmVtYWluZGVyIG9mIGBudW1iZXJgIGRpdmlkZWQgYnkgMTAwLlxuICAgIHZhciBsYXN0VHdvRGlnaXRzID0gbnVtYmVyICUgMTAwO1xuICAgIC8vIElmIGxhc3REaWdpdCBpcyAxIGJ1dCBsYXN0IHR3byBkaWdpdHMgbm90IDEsIHJldHVybiB3aXRoIGFkZGVkIFwic3RcIi5cbiAgICBpZiAobGFzdERpZ2l0ID09PSAxICYmIGxhc3RUd29EaWdpdHMgIT09IDExKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJ3N0JztcbiAgICB9XG4gICAgLy8gSWYgbGFzdERpZ2l0IGlzIDIgYnV0IHNlY29uZCB0byBsYXN0IGRpZ2l0IGlzIG5vdCAxLCByZXR1cm4gd2l0aCBhZGRlZCBcIm5kXCIuXG4gICAgaWYgKGxhc3REaWdpdCA9PT0gMiAmJiBsYXN0VHdvRGlnaXRzICE9PSAxMikge1xuICAgICAgcmV0dXJuIG51bWJlciArICduZCc7XG4gICAgfVxuICAgIC8vIElmIGxhc3REaWdpdCBpcyAyIGJ1dCBzZWNvbmQgdG8gbGFzdCBkaWdpdCBpcyBub3QgMSwgcmV0dXJuIHdpdGggYWRkZWQgXCJyZFwiLlxuICAgIGlmIChsYXN0RGlnaXQgPT09IDMgJiYgbGFzdFR3b0RpZ2l0cyAhPT0gMTMpIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAncmQnO1xuICAgIH1cbiAgICAvLyBGb3IgYWxsIG90aGVyIG51bWJlcnMsIHJldHVybiB3aXRoIGFkZGVkIFwidGhcIi5cbiAgICByZXR1cm4gbnVtYmVyICsgJ3RoJztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJ5IHNpbXBsZSBmdW5jdGlvbiB0byBoYW5kbGUgb3V0cHV0dGluZyBhIHZhbHVlcyB0eXBlIGluIGRlYnVnIG91dHB1dC5cbiAgICpcbiAgICogQG1ldGhvZCBfdmFsdWVUeXBlXG4gICAqXG4gICAqIEBwYXJhbSAge1N0cmluZ3xOdW1iZXJ8Qm9vbGVhbnxBcnJheXxPYmplY3R9ICB2YWx1ZSAtIFRoZSB2YWx1ZSB5b3Ugd2lzaCB0byBrbm93IHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlIG9mLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBUaGUgdmFsdWUncyB0eXBlLlxuICAgKi9cbiAgX3ZhbHVlVHlwZSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWU7XG4gIH1cblxuICBfb3V0cHV0VmFsdWVzKHZhbHVlcykge1xuICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZXMpIHtcbiAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZXMsIGtleSkpIHtcbiAgICAgICAgLy8gTG9nIGtleSBhbmQgaXQncyB2YWx1ZSBpbiBhIHJlYWRhYmxlIGZhc2hpb24uXG4gICAgICAgIGNvbnNvbGUubG9nKGtleSArICcgaXM6ICcsIHZhbHVlc1trZXldLCAnICgnICsgdGhpcy52YWx1ZVR5cGUodmFsdWVzW2tleV0pICsgJyknKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFrZSB0aGUgbmFtZSBvZiB0aGUgcGFyZW50IG9iamVjdCBncmVlbiBpbiBjb25zb2xlIG91dHB1dC5cbiAgICpcbiAgICogQG1ldGhvZCBvdXRwdXRPYmplY3RQYXJlbnRcbiAgICpcbiAgICovXG4gIF9vdXRwdXRPYmplY3RQYXJlbnQoKSB7XG4gICAgY29uc29sZS5sb2coJyVjICcgKyB0aGlzLm9iamVjdE5hbWUsICdjb2xvcjogZ3JlZW4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBmdW5jdGlvbiBoYXMgYmVlbiBjYWxsZWQgYW5kIHdoYXQgaXQgcmV0dXJuZWQuXG4gICAqXG4gICAqIEBtZXRob2QgZnVuY3Rpb25SZXR1cm5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgIGZ1bmN0aW9uTmFtZSAtIE5hbWUgb2YgdGhlIGZ1bmN0aW9uIGNhbGxlZC5cbiAgICpcbiAgICogQHBhcmFtICB7Qm9vbGVhbnxTdHJpbmd9IG91dHB1dCAgICAgICAtIFRoZSByZXR1cm4gb2YgdGhlIGZ1bmN0aW9uLCBvciBmYWxzZS5cbiAgICovXG4gIGZ1bmN0aW9uUmV0dXJuKGZ1bmN0aW9uTmFtZSwgb3V0cHV0KSB7XG4gICAgLy8gQ2hlY2sgaWYgZGVidWcgbW9kZSBpcyBlbmFibGVkLlxuICAgIGlmICh0aGlzLl9pc0RlYnVnRW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLl9vdXRwdXRPYmplY3RQYXJlbnQoKTtcbiAgICAgIC8vIElmIHRoZSBmdW5jdGlvbiBoYXMgbm8gcmV0dXJuLCB0aGVuIGp1c3Qgc2F5IHRoZSBmdW5jdGlvbiB3YXMgY2FsbGVkLFxuICAgICAgaWYgKG91dHB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coZnVuY3Rpb25OYW1lICsgJyBoYXMgYmVlbiBjYWxsZWQuIEZ1bmN0aW9uIGhhcyBubyByZXR1cm4nKTtcbiAgICAgIC8vIEVsc2UsIGxvZyBvdXQgdGhlIGZ1bmN0aW9uIGJlaW5nIGNhbGxlZCBhbG9uZyB3aXRoIGl0cyByZXR1cm4uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhmdW5jdGlvbk5hbWUgKyAnIGhhcyBiZWVuIGNhbGxlZC4gUmV0dXJuZWQ6ICcgKyBvdXRwdXQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogT3V0cHV0IHZhbHVlcyB3aXRoaW4gYSBmdW5jdGlvbiB0byBjb25zb2xlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBXaWxsIGxvZyB0byBjb25zb2xlOlxuICAgKiAvLyAgIFdpdGhpbiBmb29iYXI6XG4gICAqIC8vICAgZm9vIGlzOiA1IChOdW1iZXIpXG4gICAqIC8vICAgYmFyIGlzOiAyMiAoTnVtYmVyKVxuICAgKiBmdW5jdGlvbiBmb29iYXIoKSB7XG4gICAqICAgdmFyIGZvbyA9IDU7XG4gICAqICAgdmFyIGJhciA9IDIyO1xuICAgKiAgIERlYnVnLnZhbHVlKCdmb29iYXInLFxuICAgKiAgICAge2ZvbzogZm9vLCBiYXI6IGJhcn1cbiAgICogICApO1xuICAgKiB9XG4gICAqXG4gICAqIEBtZXRob2QgdmFsdWVcbiAgICpcbiAgICogQHBhcmFtICB7U3RyaW5nfSBmdW5jdGlvbk5hbWUgLSBOYW1lIG9mIGZ1bmN0aW9uIHRoZSB2YWx1ZSByZXNpZGUgaW4uXG4gICAqIEBwYXJhbSAge09iamVjdH0gdmFsdWVzICAgICAgIC0gT2JqZWN0IHdpdGgga2V5cyBtYXRjaGluZyB2YXJpYWJsZSBuYW1lcyB0byBiZSBvdXRwdXRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byBjb25zb2xlLlxuICAgKi9cbiAgdmFsdWVzKGZ1bmN0aW9uTmFtZSwgdmFsdWVzKSB7XG4gICAgLy8gQ2hlY2sgaWYgZGVidWcgbW9kZSBpcyBlbmFibGVkLlxuICAgIGlmICh0aGlzLl9pc0RlYnVnRW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLl9vdXRwdXRPYmplY3RQYXJlbnQoKTtcbiAgICAgIGNvbnNvbGUubG9nKCclYyBXaXRoaW4gJyArIGZ1bmN0aW9uTmFtZSArICc6JywgJ2NvbG9yOiBwdXJwbGUnKTtcbiAgICAgIC8vIExvb3AgdGhyb3VnaCB2YWx1ZXMgd2l0aGluIHRoZSBmdW5jdGlvbi5cbiAgICAgIHRoaXMuX291dHB1dFZhbHVlcyh2YWx1ZXMpO1xuICAgIH1cbiAgfVxuICBsb29wKGZ1bmN0aW9uTmFtZSwgaSwgdmFsdWVzKSB7XG4gICAgaWYgKHRoaXMuX2lzRGVidWdFbmFibGVkKCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCclYyBXaXRoaW4gJyArIGZ1bmN0aW9uTmFtZSArICc6JywgJ2NvbG9yOiBwdXJwbGUnKTtcbiAgICAgIGlmICh0eXBlb2YgaSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJdGVyYXRpb24gPSB0aGlzLl9hZGRTdWZmaXhUb051bWJlcihpICsgMSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRJdGVyYXRpb24gKyAnIGl0ZXJhdGlvbiBvZiBmb3IgbG9vcDonKTtcbiAgICAgICAgdGhpcy5fb3V0cHV0VmFsdWVzKHZhbHVlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnY3VycmVudCBrZXkgaW4gZm9yaW46ICcgKyBpKTtcbiAgICAgICAgdGhpcy5fb3V0cHV0VmFsdWVzKHZhbHVlcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIG1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmICh0aGlzLl9pc0RlYnVnRW5hYmxlZCgpKSB7XG4gICAgICBjb25zb2xlLmxvZyhgJWMgJHttZXNzYWdlfWAsICdjb2xvcjogYmx1ZScpO1xuICAgIH1cbiAgfVxufVxuXG5HaW5nYWJ1bG91cy5EZWJ1ZyA9IERlYnVnO1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuICAvLyBOZWVkIHRvIGJlIGFibGUgdG8gcmVnaXN0ZXIgZ2xvYmFsIGV2ZW50cyBpbiBhIHdheSB0aGF0IGV4cG9zZXMgdGhlbSBzbyBvdGhlciBtb2R1bGVzXG4gIC8vIGNhbiBob29rIGludG8gdGhlIGNhbGxiYWNrIG9uIHRob3NlIGV2ZW50cy5cbmNsYXNzIEV2ZW50TGlzdGVuZXIge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBsaXN0ZW5lcikge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIHRoaXMuY2FsbGJhY2tzID0gW107XG4gICAgdGhpcy5yZWdpc3RlcmVkID0gZmFsc2U7XG4gIH1cbiAgX2hhbmRsZXIoKSB7XG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbaV0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3JlZ2lzdGVyRXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmxpc3RlbmVyLCAoKSA9PiB0aGlzLl9oYW5kbGVyKCkpO1xuICB9XG4gIHJlZ2lzdGVyQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLmNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uLCBub3QgYSAke3R5cGVvZiBjYWxsYmFja31gKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzLmxlbmd0aCA+IDAgJiYgIXRoaXMucmVnaXN0ZXJlZCkge1xuICAgICAgdGhpcy5fcmVnaXN0ZXJFdmVudExpc3RlbmVyKCk7XG4gICAgICB0aGlzLnJlZ2lzdGVyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCByZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihuYW1lLCBlbGVtZW50LCBsaXN0ZW5lcikge1xuICBsaXN0ZW5lciA9IG5hbWUgfHwgbGlzdGVuZXI7XG4gIGlmIChHaW5nYWJ1bG91cy5ldmVudHNbbmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIEdpbmdhYnVsb3VzLmV2ZW50c1tuYW1lXSA9IG5ldyBHaW5nYWJ1bG91cy5FdmVudExpc3RlbmVyKGVsZW1lbnQsIGxpc3RlbmVyKTtcbiAgfVxufTtcblxuR2luZ2FidWxvdXMuZXZlbnRzID0ge307XG5HaW5nYWJ1bG91cy5yZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIgPSByZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXI7XG5HaW5nYWJ1bG91cy5FdmVudExpc3RlbmVyID0gRXZlbnRMaXN0ZW5lcjtcbn0oKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuIWZ1bmN0aW9uKCkge1xuXG5jb25zdCBleHRlbmQgPSBmdW5jdGlvbihvdXQpIHtcbiAgb3V0ID0gb3V0IHx8IHt9O1xuXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFhcmd1bWVudHNbaV0pIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBmb3IgKGxldCBrZXkgaW4gYXJndW1lbnRzW2ldKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFyZ3VtZW50c1tpXSwga2V5KSkge1xuICAgICAgICBvdXRba2V5XSA9IGFyZ3VtZW50c1tpXVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufTtcblxuY29uc3QgZGVlcEV4dGVuZCA9IGZ1bmN0aW9uKG91dCkge1xuICBvdXQgPSBvdXQgfHwge307XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgb2JqID0gYXJndW1lbnRzW2ldO1xuXG4gICAgaWYgKCFvYmopIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICBpZiAodHlwZW9mIG9ialtrZXldID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIG91dFtrZXldID0gZGVlcEV4dGVuZChvdXRba2V5XSwgb2JqW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07XG5cbkdpbmdhYnVsb3VzLmV4dGVuZCA9IGV4dGVuZDtcbkdpbmdhYnVsb3VzLmRlZXBFeHRlbmQgPSBkZWVwRXh0ZW5kO1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuXG5jbGFzcyBJbmplY3Qge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBHaW5nYWJ1bG91cy5kZWVwRXh0ZW5kKEluamVjdC5kZWZhdWx0cygpLCBvcHRpb25zKTtcbiAgICB0aGlzLnhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHRoaXMuYXBpO1xuICAgIHRoaXMuYWN0aXZlQ29udGVudDtcblxuICAgIHRoaXMuX2luaXQoKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgfVxuICBzdGF0aWMgZGVmYXVsdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFBdHRyOiAnZGF0YS1pbmplY3QnLFxuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHRvIG1ha2UgdGhlIHhociByZXF1ZXN0LlxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIG9uTG9hZDogICB0cnVlXG4gICAgfTtcbiAgfVxuICBnZXQgYXR0cigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGFpbmVyOiBgJHt0aGlzLm9wdGlvbnMuZGF0YUF0dHJ9LWNvbnRhaW5lcmAsXG4gICAgICBjb250ZW50OiAgIGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tY29udGVudGAsXG4gICAgICBhcGk6ICAgICAgIGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tYXBpYCxcbiAgICAgIGJpbmQ6ICAgICAgYCR7dGhpcy5vcHRpb25zLmRhdGFBdHRyfS1iaW5kYFxuICAgIH07XG4gIH1cbiAgZ2V0IGJvdW5kRWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbJHt0aGlzLmF0dHIuYmluZH1dYCk7XG4gIH1cbiAgX2luaXQoKSB7XG4gICAgdGhpcy5fYWpheCgpO1xuICB9XG4gIC8qKlxuICAgKiBUYWtlcyBhIHN0cmluZyByZXByZXNlbnRhaW9uIG9mIGFuIG9iamVjdCBjaGFpbiBhbmQgdHJhdmVyc2VzIHRoZSByZWFsIG9iamVjdCB0byB0aGVcbiAgICogbGFzdCBrZXkgaW4gdGhlIGNoYWluLlxuICAgKlxuICAgKiBAbWV0aG9kIF90cmF2ZXJzZU9iamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgIGNoYWluICAtIFN0cmluZyByZXByZXNlbmF0aW9uIG9mIGFuIG9iamVjdCBjaGFpbi5cbiAgICogQHBhcmFtICB7T2JqZWN0fSAgICAgICBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIHRyYXZlcnNlLlxuICAgKiBAcmV0dXJuIHsqfSAgICAgICAgICAgICAgICAgICAtIFRoZSBuZXcgcG9zaXRpb24gaW4gdGhlIG9iamVjdC5cbiAgICovXG4gIF90cmF2ZXJzZU9iamVjdChjaGFpbiwgb2JqZWN0KSB7XG4gICAgY29uc3Qga2V5cyA9IGNoYWluLnNwbGl0KCcuJyk7XG4gICAgbGV0IG91dHB1dCA9IG9iamVjdDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG91dHB1dCA9IG91dHB1dFtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICAvKipcbiAgICogcGFyc2VzIHRoZSByZXNwb25zZSB0ZXh0IGFuZCBsb2FkcyBpdCBpbnRvIHRoZSBhcGkgcHJvcGVydHlcbiAgICpcbiAgICogQG1ldGhvZCBfbG9hZEFQSVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2xvYWRBUEkoKSB7XG4gICAgaWYgKHRoaXMueGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgIHRoaXMuYXBpID0gSlNPTi5wYXJzZSh0aGlzLnhoci5yZXNwb25zZVRleHQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogaGFuZGxlcyB0aGUgZ2V0IHJlcXVlc3Qgb24gdGhlIHhociBvYmplY3RcbiAgICpcbiAgICogQG1ldGhvZCBfYWpheFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FqYXgoKSB7XG4gICAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4gdGhpcy5fbG9hZEFQSSgpO1xuICAgIHRoaXMueGhyLm9wZW4oJ0dFVCcsIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLmFwaSkpO1xuICAgIC8vIHRoaXMueGhyLm9wZW4oJ0dFVCcsIHRoaXMucGF0aCk7XG4gICAgdGhpcy54aHIuc2VuZCgpO1xuICB9XG4gIF9pbmplY3RDb250ZW50KCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ib3VuZEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIG9iamVjdCBjaGFpbiB0byBwYXJzZS5cbiAgICAgIGxldCBjaGFpbiA9IHRoaXMuYm91bmRFbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLmJpbmQpO1xuICAgICAgLy8gSW5qZWN0IHRoZSBjb250ZW50LCByZXBsYWNpbmcgd2hhdGV2ZXIgaXMgYWxyZWFkeSB0aGVyZS5cbiAgICAgIHRoaXMuYm91bmRFbGVtZW50c1tpXS5pbm5lckhUTUwgPSB0aGlzLl90cmF2ZXJzZU9iamVjdChjaGFpbiwgdGhpcy5hY3RpdmVDb250ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbnRlbnQgb2YgdGhlIGJvdW5kIGVsZW1lbnRzIGlubmVyIEhUTUwgYmFzZWQgb24gYSBrZXkgb3Igb2JqZWN0IGNoYWluXG4gICAqIHBhc3NlZCBhcyBhIHN0cmluZy5cbiAgICpcbiAgICogQG1ldGhvZCB1cGRhdGVDb250ZW50XG4gICAqIEBmaXJlcyBJbmplY3QjX2luamVjdENvbnRlbnRcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgIGNoYWluIC0gdGhlIG9iamVjdCBjaGFpbiB0aGF0IGxlYWRzIHRvIHRoZSBiYXNlIG9iamVjdCB0byB1c2UuXG4gICAqL1xuICB1cGRhdGVDb250ZW50KGNoYWluKSB7XG4gICAgdGhpcy5hY3RpdmVDb250ZW50ID0gdGhpcy5fdHJhdmVyc2VPYmplY3QoY2hhaW4sIHRoaXMuYXBpKTtcbiAgICB0aGlzLl9pbmplY3RDb250ZW50KCk7XG4gIH1cbn1cblxuR2luZ2FidWxvdXMuSW5qZWN0ID0gSW5qZWN0O1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuXG5jbGFzcyBSZXNwb25zaXZlIHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIGVsZW1lbnQgLSBKUyBBUEkgRE9NIE5vZGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMudmFsdWVTdHJpbmcgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1yZXNwb25zaXZlJyk7XG4gICAgdGhpcy5icmVha3BvaW50cyA9IEdpbmdhYnVsb3VzLmJyZWFrcG9pbnRzO1xuICAgIHRoaXMuYnJlYWtwb2ludEFycmF5ID0gR2luZ2FidWxvdXMuYnJlYWtwb2ludEFycmF5O1xuICAgIHRoaXMud2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fFxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8XG4gICAgICBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICAgIC8vIGV4cG9zZSB0aGUgcmVzcG9uc2l2ZSBzdGF0ZSBvZiB0aGUgZWxlbWVudFxuICAgIHRoaXMuX3NldFN0YXRlKCk7XG4gICAgdGhpcy5fb25SZXNpemUoKTtcbiAgfVxuICAvKipcbiAgICogVGFrZXMgYSBzdHJpbmcgb2YgYnJlYWtwb2ludHMgZnJvbSB0aGUgZGF0YSBhdHRyaWJ1dGUgb2YgdGhlXG4gICAqIGVsZW1lbnQgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBhbmQgY29udmVydHMgaXQgaW50byBhbiBhcnJheS5cbiAgICogQG1ldGhvZCB2YWx1ZXNBcnJheVxuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgLSBBbiBhcnJheSBvZiBicmVha3BvaW50cy5cbiAgICovXG4gIGdldCB2YWx1ZXNBcnJheSgpIHtcbiAgICBpZiAodGhpcy52YWx1ZVN0cmluZyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMudmFsdWVTdHJpbmcgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmFsdWVTdHJpbmcuc3BsaXQoJyAnKTtcbiAgfVxuICBnZXQgZW5hYmxlZFF1ZXJpZXMoKSB7XG4gICAgbGV0IG91dHB1dCA9IFtdO1xuICAgIC8vIElmIHRoZXJlIGFyZSBubyBicmVha3BvaW50cyBwYXNzZWQsIHRoZW4gcmV0dXJuIHRoZSBlbnRpcmUgYXJyYXkgb2YgYnJlZWFrcG9pbnRzLlxuICAgIGlmICh0aGlzLnZhbHVlc0FycmF5Lmxlbmd0aCA8PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5icmVha3BvaW50QXJyYXk7XG4gICAgfVxuICAgIGZvciAobGV0IGluZGV4IGluIHRoaXMudmFsdWVzQXJyYXkpIHtcbiAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMudmFsdWVzQXJyYXksIGluZGV4KSkge1xuICAgICAgICBsZXQgcGFyc2VkVmFsdWUgPSB0aGlzLl9wYXJzZVBhcmFtKHRoaXMudmFsdWVzQXJyYXlbaW5kZXhdKTtcbiAgICAgICAgb3V0cHV0ID0gdGhpcy5fcGFyc2VBcnJheShvdXRwdXQsIHBhcnNlZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICBnZXQgcXVlcnlWYWx1ZXMoKSB7XG4gICAgbGV0IG91dHB1dCA9IHt9O1xuICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmJyZWFrcG9pbnRzKSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJyZWFrcG9pbnRzLCBrZXkpKSB7XG4gICAgICAgIG91dHB1dFtrZXldID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHF1ZXJ5IGluIHRoaXMuZW5hYmxlZFF1ZXJpZXMpIHtcbiAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmVuYWJsZWRRdWVyaWVzW3F1ZXJ5XSkge1xuICAgICAgICAgICAgb3V0cHV0W2tleV0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHBhc3NlZCBrZXkgbWF0Y2hlcyBhbnkgb2YgdGhlIGJyZWFrcG9pbnQga2V5cy5cbiAgICogQG1ldGhvZCBfaXNBS2V5XG4gICAqIEBwYXJhbSAge1N0cmluZ30gIGtleVRvQ2hlY2sgLSBUaGUga2V5IHRvIGNoZWNrIGFnYWluc3QgdGhlIGJyZWFrcG9pbnRzLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgIC0gSWYgdGhlcmUgaXMgYSBtYXRjaCB0aGVuIHRydWUgaXMgcmV0dXJuZWQsIGVsc2UgZmFsc2UuXG4gICAqL1xuICBfaXNBS2V5KGtleVRvQ2hlY2spIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5icmVha3BvaW50cykge1xuICAgICAgaWYgKGtleVRvQ2hlY2sgPT09IGtleSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBQYXJzZXMgYSB2YWx1ZSBjb250YWluaW5nIGEgYnJlYWtwb2ludCBhbmQga2V5d29yZC5cbiAgICogQG1ldGhvZCBfcGFyc2VQYXJhbVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgIHBhcmFtIC0gVGhlIGluZGl2aWR1YWwgcGFyYW0gcGFyc2VkIGZyb20gdGhlIHN0cmluZy5cbiAgICogQHJldHVybiB7QXJyYXl9ICAgICAgICAgICAtIEFuIGFycmF5IG9mIGJyZWFrcG9pbnRzIHRoYXQgcmVwcmVzZW50IHdoZW4gYSBtb2R1bGUgY2FuXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBhY3RpdmUuXG4gICAqL1xuICBfcGFyc2VQYXJhbShwYXJhbSkge1xuICAgIHZhciBvdXRwdXQgPSBbXTtcbiAgICBpZiAoIXRoaXMuX2lzQUtleShwYXJhbSkpIHtcbiAgICAgIGxldCBzcGxpdFBhcmFtID0gcGFyYW0uc3BsaXQoJy0nKTtcbiAgICAgIGxldCBxdWVyeSA9IHNwbGl0UGFyYW1bMF07XG4gICAgICBsZXQga2V5d29yZCA9IHNwbGl0UGFyYW1bMV07XG5cbiAgICAgIGlmIChrZXl3b3JkID09PSAnb25seScpIHtcbiAgICAgICAgb3V0cHV0LnB1c2gocXVlcnkpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgfVxuICAgICAgLyoqIEdvIHRocm91Z2ggZWFjaCBhY3RpdmUgYnJlYWtwb2ludCAqL1xuICAgICAgZm9yIChsZXQgaW5kZXggaW4gdGhpcy5icmVha3BvaW50QXJyYXkpIHtcbiAgICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5icmVha3BvaW50QXJyYXksIGluZGV4KSkge1xuICAgICAgICAgIC8qKiBpZiB0aGUga2V5d29yZCBpcyBgdXBgIHRoZW4gb25seSBwdXNoIGlmIHRoZSBpbmRleCBvZiB0aGUgcXVlcnkgaXMgbGVzc1xuICAgICAgICAgICAgICB0aGFuIG9yIGVxdWFsIHRvIHRoZSBpbmRleCBvZiB0aGUgbG9vcCAqL1xuICAgICAgICAgIGlmIChzcGxpdFBhcmFtWzFdID09PSAndXAnICYmIHRoaXMuX2luZGV4T2ZRdWVyeShzcGxpdFBhcmFtWzBdKSA8PSBpbmRleCkge1xuICAgICAgICAgICAgb3V0cHV0LnB1c2godGhpcy5icmVha3BvaW50QXJyYXlbaW5kZXhdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLyoqIGlmIHRoZSBrZXl3b3JkIGlzIGBkb3duYCB0aGVuIG9ubHkgcHVzaCBpZiB0aGUgaW5kZXggb2YgdGhlIHF1ZXJ5IGlzIGdyZWF0ZXJcbiAgICAgICAgICAgICAgdGhhbiBvciBlcXVhbCB0byB0aGUgaW5kZXggb2YgdGhlIGxvb3AgKi9cbiAgICAgICAgICBpZiAoc3BsaXRQYXJhbVsxXSA9PT0gJ2Rvd24nICYmIHRoaXMuX2luZGV4T2ZRdWVyeShzcGxpdFBhcmFtWzBdKSA+PSBpbmRleCkge1xuICAgICAgICAgICAgb3V0cHV0LnB1c2godGhpcy5icmVha3BvaW50QXJyYXlbaW5kZXhdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIG91dHB1dC5wdXNoKHBhcmFtKTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIF9wYXJzZUFycmF5KG9sZEFycmF5LCBuZXdBcnJheSkge1xuICAgIGxldCBvdXRwdXQgPSBvbGRBcnJheTtcbiAgICBsZXQgaXNJbk9sZEFycmF5ID0gZmFsc2U7XG4gICAgZm9yIChsZXQgbkluZGV4IGluIG5ld0FycmF5KSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChuZXdBcnJheSwgbkluZGV4KSkge1xuICAgICAgICBpc0luT2xkQXJyYXkgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgb0luZGV4IGluIG9sZEFycmF5KSB7XG4gICAgICAgICAgaWYgKG5ld0FycmF5W25JbmRleF0gPT09IG9sZEFycmF5W29JbmRleF0pIHtcbiAgICAgICAgICAgIGlzSW5PbGRBcnJheSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaXNJbk9sZEFycmF5KSB7XG4gICAgICAgICAgb3V0cHV0LnB1c2gobmV3QXJyYXlbbkluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgYnJlYWtwb2ludCBiZWluZyBxdWVycmllZFxuICAgKiBAbWV0aG9kIF9pbmRleE9mUXVlcnlcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgIHF1ZXJ5IC0gVGhlIG5hbWUgb2YgdGhlIGJyZWFrcG9pbnQga2V5XG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAtIFRoZSBpbmRleCBvZiB0aGF0IGtleSBpbiB0aGUgYnJlYWtwb2ludCBhcnJheS5cbiAgICovXG4gIF9pbmRleE9mUXVlcnkocXVlcnkpIHtcbiAgICBmb3IgKGxldCBpbmRleCBpbiB0aGlzLmJyZWFrcG9pbnRBcnJheSkge1xuICAgICAgaWYgKHRoaXMuYnJlYWtwb2ludEFycmF5W2luZGV4XSA9PT0gcXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfc2V0U3RhdGUoKSB7XG4gICAgbGV0IHN0YXRlO1xuICAgIGlmICh0aGlzLnF1ZXJ5VmFsdWVzW0dpbmdhYnVsb3VzLmFjdGl2ZUJyZWFrcG9pbnQoKV0pIHtcbiAgICAgIHN0YXRlID0gJ2FjdGl2ZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlID0gJ2luYWN0aXZlJztcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1yZXNwb25zaXZlLXN0YXRlJywgc3RhdGUpO1xuICB9XG4gIF9vblJlc2l6ZSgpIHtcbiAgICBpZiAoIUdpbmdhYnVsb3VzLmV2ZW50cy5yZXNpemUpIHtcbiAgICAgIEdpbmdhYnVsb3VzLnJlZ2lzdGVyR2xvYmFsRXZlbnRMaXN0ZW5lcigncmVzaXplJywgd2luZG93KTtcbiAgICB9XG4gICAgR2luZ2FidWxvdXMuZXZlbnRzLnJlc2l6ZS5yZWdpc3RlckNhbGxiYWNrKCgpID0+IHRoaXMuX3NldFN0YXRlKCkpO1xuICB9XG4gIGlzQWN0aXZlKCkge1xuICAgIC8vIGxldCBlbmFibGVkUXVlcmllcyA9IHRoaXMucXVlcnlWYWx1ZXM7XG4gICAgLy8gY29uc29sZS5sb2coZW5hYmxlZFF1ZXJpZXMpO1xuICAgIC8vIGxldCBjdXJyZW50UXVlcnkgPSBHaW5nYWJ1bG91cy5hY3RpdmVCcmVha3BvaW50KCk7XG4gICAgLy8gY29uc29sZS5sb2coZW5hYmxlZFF1ZXJpZXNbY3VycmVudFF1ZXJ5XSk7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlWYWx1ZXNbR2luZ2FidWxvdXMuYWN0aXZlQnJlYWtwb2ludCgpXTtcbiAgfVxuICAvLyBVdGlsaXR5IHRvIHdyYXAgb25SZXNpemUgYWN0aW9ucyBpbiB0byBhdm9pZCBpc3N1ZXMgd2l0aCB3aW5kb3cgaGVpZ2h0IHJlc2l6aW5nIGZyb21cbiAgLy8gbW9iaWxlIGJyb3dzZXJzIHNob3cvaGlkaW5nIFVJIGVsZW1lbnRzLlxuICB3aW5kb3dXaWR0aFdhc1Jlc2l6ZWQoKSB7XG4gICAgbGV0IGN1cnJlbnRXaW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8XG4gICAgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcbiAgICBsZXQgb3V0cHV0ID0gZmFsc2U7XG5cbiAgICBpZiAoY3VycmVudFdpbmRvd1dpZHRoICE9PSB0aGlzLndpbmRvd1dpZHRoKSB7XG4gICAgICBvdXRwdXQgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLndpbmRvd1dpZHRoID0gY3VycmVudFdpbmRvd1dpZHRoO1xuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbn1cbkdpbmdhYnVsb3VzLlJlc3BvbnNpdmUgPSBSZXNwb25zaXZlO1xuXG59KCk7XG4iLCIhZnVuY3Rpb24oKSB7XG5jbGFzcyBTY3JvbGxEaXJlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIHRoaXMubGFzdFNjcm9sbFBvc2l0aW9uID0gMDtcbiAgICAvLyAwID0gZG93biBhbmQgMSA9IHVwXG4gICAgdGhpcy5sYXN0U2Nyb2xsRGlyZWN0aW9uID0gMDtcbiAgICB0aGlzLmkgPSAwO1xuICAgIHRoaXMuc2Nyb2xsaW5nRGlyZWN0aW9uID0gMDtcbiAgICB0aGlzLl9ldmVudCgpO1xuICB9XG4gIF91cGRhdGUoKSB7XG4gICAgbGV0IGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuXG4gICAgLy8gQWN0aW9ucyB3aGVuIHNjcm9sbGluZyBkb3duXG4gICAgaWYgKGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA+IHRoaXMubGFzdFNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZG93bicpO1xuICAgICAgaWYgKHRoaXMubGFzdFNjcm9sbERpcmVjdGlvbiAhPT0gMCkge1xuICAgICAgICB0aGlzLmkgKz0gMTtcbiAgICAgICAgaWYgKHRoaXMuaSA+PSAxMCkge1xuICAgICAgICAgIHRoaXMuaSA9IDA7XG4gICAgICAgICAgdGhpcy5sYXN0U2Nyb2xsRGlyZWN0aW9uID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIC8vIEFjdGlvbnMgd2hlbiBzY3JvbGxpbmcgdXBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3VwJyk7XG4gICAgICBpZiAodGhpcy5sYXN0U2Nyb2xsRGlyZWN0aW9uICE9PSAxKSB7XG4gICAgICAgIGlmICh0aGlzLmkgPj0gMTApIHtcbiAgICAgICAgICB0aGlzLmkgPSAwO1xuICAgICAgICAgIHRoaXMubGFzdFNjcm9sbERpcmVjdGlvbiA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pICs9IDE7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGFzdFNjcm9sbFBvc2l0aW9uID0gY3VycmVudFNjcm9sbFBvc2l0aW9uO1xuICB9XG4gIF9ldmVudCgpIHtcbiAgICBHaW5nYWJ1bG91cy5ldmVudHMuc2Nyb2xsLnJlZ2lzdGVyQ2FsbGJhY2soKCkgPT4gdGhpcy5fdXBkYXRlKCkpO1xuICB9XG4gIGRvd24oKSB7XG4gICAgaWYgKHRoaXMubGFzdFNjcm9sbERpcmVjdGlvbiA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB1cCgpIHtcbiAgICBpZiAodGhpcy5sYXN0U2Nyb2xsRGlyZWN0aW9uID09PSAxKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5HaW5nYWJ1bG91cy5TY3JvbGxEaXJlY3Rpb24gPSBTY3JvbGxEaXJlY3Rpb247XG59KCk7XG4iLCIndXNlIHN0cmljdCc7XG4hZnVuY3Rpb24oKSB7XG4vLyBuZWVkIGEgcmFuZ2UgZm9yIGVhY2ggbGF5ZXIuXG4vLyBuZWVkIHRvIHNjYWxlIGVhY2ggbGF5ZXIgYmFzZWQgb24gbGF5ZXIgb3JkZXIuXG4vLyBuZWVkIHRoZSBzY3JvbGwgZXZlbnRcbi8vIC0gZGV0ZWN0IHNjcm9sbCB1cCBhbmQgc2Nyb2xsIGRvd25cblxuLyoqXG4gKiBAbW9kdWxlIGJhY2tnb3J1bmRcbiAqL1xuXG5jbGFzcyBCYWNrZ3JvdW5kIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5vcHRpb25zID0gR2luZ2FidWxvdXMuZGVlcEV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPSBuZXcgR2luZ2FidWxvdXMuU2Nyb2xsRGlyZWN0aW9uKCk7XG4gICAgdGhpcy5jb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuY29udGVudFRhcmdldCk7XG4gIH1cbiAgZ2V0IGRlZmF1bHRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhQXR0cjogICAgICBHaW5nYWJ1bG91cy5tb2R1bGVzLkJhY2tncm91bmQuZGF0YUF0dHIsXG4gICAgICBjb250ZW50VGFyZ2V0OiAnLnNpdGUtd3JhcHBlcicsXG4gICAgICBzY3JvbGxSYXRpbzogICA1XG4gICAgfTtcbiAgfVxuICBnZXQgY2FsY3VsYXRlZExheWVySGVpZ2h0KCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuc2Nyb2xsUmF0aW8gPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZW50Lm9mZnNldEhlaWdodDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29udGVudC5vZmZzZXRIZWlnaHQgLyAzO1xuICB9XG4gIGluaXQoKSB7XG4gICAgdGhpcy5fc2V0TGF5ZXJIZWlnaHQoKTtcbiAgICB0aGlzLl9ldmVudHMoKTtcbiAgfVxuICBfc2V0TGF5ZXJIZWlnaHQoKSB7XG4gICAgbGV0IGxheWVycyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGF5ZXInKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsYXllcnNbaV0uc3R5bGUuaGVpZ2h0ID0gdGhpcy5jYWxjdWxhdGVkTGF5ZXJIZWlnaHQ7XG4gICAgfVxuICB9XG4gIF9zeW5jU2Nyb2xsaW5nKCkge1xuICAgIGxldCBjdXJyZW50U2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICBpZiAodGhpcy5vcHRpb25zLnNjcm9sbFJhdGlvID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnNjcm9sbFRvcCA9IGN1cnJlbnRTY3JvbGxQb3NpdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LnNjcm9sbFRvcCA9IGN1cnJlbnRTY3JvbGxQb3NpdGlvbiAvIHRoaXMub3B0aW9ucy5zY3JvbGxSYXRpbztcbiAgICB9XG5cbiAgICAvLyBjb25zb2xlLmxvZyh3aW5kb3cucGFnZVlPZmZzZXQsIHRoaXMuZWxlbWVudC5zY3JvbGxUb3ApO1xuICB9XG4gIF9ldmVudHMoKSB7XG4gICAgR2luZ2FidWxvdXMuZXZlbnRzLnNjcm9sbC5yZWdpc3RlckNhbGxiYWNrKCgpID0+IHRoaXMuX3N5bmNTY3JvbGxpbmcoKSk7XG4gIH1cbn1cbkdpbmdhYnVsb3VzLnJlZ2lzdGVyTW9kdWxlKEJhY2tncm91bmQsICdCYWNrZ3JvdW5kJyk7XG5HaW5nYWJ1bG91cy5yZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGRvY3VtZW50KTtcbn0oKTtcbiIsIid1c2Ugc3RyaWN0JztcbiFmdW5jdGlvbigpIHtcbmZ1bmN0aW9uIGdlbmVyYXRlVUlEKCkge1xuICByZXR1cm4gTWF0aC5yb3VuZCgoTWF0aC5wb3coMzIsIDcpIC0gKE1hdGgucmFuZG9tKCkgKiBNYXRoLnBvdygzMiwgNikpKSkudG9TdHJpbmcoKTtcbn1cbmNsYXNzIEV4cGFuZCB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IEdpbmdhYnVsb3VzLmRlZXBFeHRlbmQoe30sIEV4cGFuZC5kZWZhdWx0cygpLCBvcHRpb25zKTtcbiAgICB0aGlzLnVpZCA9IGdlbmVyYXRlVUlEKCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy51aWQpO1xuICAgIHRoaXMucmVzcG9uc2l2ZSA9IG5ldyBHaW5nYWJ1bG91cy5SZXNwb25zaXZlKGVsZW1lbnQpO1xuICAgIHRoaXMuYW5pbWF0aW9uID0gZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJykgP1xuICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJykgOlxuICAgICAgZmFsc2U7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5hbmltYXRpb24pO1xuICAgIC8vICAgY29uc29sZS5sb2coZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJykpO1xuICAgIC8vICAgY29uc29sZS5sb2coZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJykpO1xuICAgIC8vICAgY29uc29sZS5sb2coR2luZ2FidWxvdXMuYW5pbWF0aW9uc1tlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hbmltYXRpb24nKV0pO1xuICAgIC8vIGNvbnNvbGUubG9nKGFuaW1hdGlvbkZ1bmMpO1xuICB9XG4gIHN0YXRpYyBkZWZhdWx0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YUF0dHI6ICAgICAgR2luZ2FidWxvdXMubW9kdWxlcy5FeHBhbmQuZGF0YUF0dHIsXG4gICAgICBjbGFzczogICAgICAgICAnZXhwYW5kYWJsZScsXG4gICAgICB0eXBlOiAgICAgICAgICAnYmFzaWMnLFxuICAgICAgZGVmYXVsdFN0YXRlOiAgJ2NvbGxhcHNlZCcsXG4gICAgICBpbmFjdGl2ZVN0YXRlOiAnaW5hY3RpdmUnLFxuICAgICAgc3RhdGVzOiAgICAgICAge1xuICAgICAgICBleHBhbmRlZDogICdleHBhbmRlZCcsXG4gICAgICAgIGNvbGxhcHNlZDogJ2NvbGxhcHNlZCdcbiAgICAgIH0sXG4gICAgICBhbmltYXRpb246IG51bGxcbiAgICB9O1xuICB9XG4gIGdldCBjbGFzc2VzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBleHBhbmQ6IHRoaXMub3B0aW9ucy5jbGFzc1xuICAgIH07XG4gIH1cbiAgZ2V0IGF0dHIoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4cGFuZDogIHRoaXMub3B0aW9ucy5kYXRhQXR0cixcbiAgICAgIHVpZDogICAgIGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tdWlkYCxcbiAgICAgIG9wZW46ICAgIGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tb3BlbmAsXG4gICAgICBjbG9zZTogICBgJHt0aGlzLm9wdGlvbnMuZGF0YUF0dHJ9LWNsb3NlYCxcbiAgICAgIGNvbnRlbnQ6IGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tY29udGVudGBcbiAgICB9O1xuICB9XG4gIGluaXQoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2FjdGl2ZSBvbiBpbml0OicsIHRoaXMucmVzcG9uc2l2ZS5pc0FjdGl2ZSgpKTtcbiAgICB0aGlzLl9zZXRVSUQoKTtcbiAgICAvLyBTZXQgRGVmYXVsdCBTdGF0ZVxuICAgIGlmICh0aGlzLnJlc3BvbnNpdmUuaXNBY3RpdmUoKSkge1xuICAgICAgdGhpcy5fc2V0U3RhdGUodGhpcy5vcHRpb25zLmRlZmF1bHRTdGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NldFN0YXRlKHRoaXMub3B0aW9ucy5pbmFjdGl2ZVN0YXRlKTtcbiAgICB9XG4gICAgaWYgKCEhdGhpcy5hbmltYXRpb24gJiYgR2luZ2FidWxvdXMuYW5pbWF0aW9uc1t0aGlzLmFuaW1hdGlvbl0uc2V0dXAgIT09IG51bGwpIHtcbiAgICAgIEdpbmdhYnVsb3VzLmFuaW1hdGlvbnNbdGhpcy5hbmltYXRpb25dLnNldHVwKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBFdmVudHNcbiAgICB0aGlzLl9ldmVudHMoKTtcbiAgfVxuICBfc2V0VUlEKCkge1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUodGhpcy5hdHRyLnVpZCwgdGhpcy51aWQpO1xuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbJHt0aGlzLmF0dHIub3Blbn1dYCkuc2V0QXR0cmlidXRlKHRoaXMuYXR0ci5vcGVuLCB0aGlzLnVpZCk7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFske3RoaXMuYXR0ci5jbG9zZX1dYCkuc2V0QXR0cmlidXRlKHRoaXMuYXR0ci5jbG9zZSwgdGhpcy51aWQpO1xuICB9XG4gIF9zZXRTdGF0ZShzdGF0ZSkge1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUodGhpcy5hdHRyLmV4cGFuZCwgc3RhdGUpO1xuICB9XG4gIF9vblJlc2l6ZSgpIHtcbiAgICBpZiAodGhpcy5yZXNwb25zaXZlLndpbmRvd1dpZHRoV2FzUmVzaXplZCgpKSB7XG4gICAgICBpZiAodGhpcy5yZXNwb25zaXZlLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgLy8gSWYgY3VycmVudCBzdGF0ZSBkb2VzbnQgbWF0Y2ggZGVmYXVsdCBzdGF0ZSwgdGhlbiBzZXQgc3RhdGUgdG8gZGVmYXVsdCBzdGF0ZS5cbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLmV4cGFuZCkgIT09IHRoaXMub3B0aW9ucy5kZWZhdWx0U3RhdGUpIHtcbiAgICAgICAgICB0aGlzLl9zZXRTdGF0ZSh0aGlzLm9wdGlvbnMuZGVmYXVsdFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnJlc3BvbnNpdmUuaXNBY3RpdmUoKSkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLmF0dHIuZXhwYW5kKSAhPT0gdGhpcy5vcHRpb25zLmluYWN0aXZlU3RhdGUpIHtcbiAgICAgICAgICB0aGlzLl9zZXRTdGF0ZSh0aGlzLm9wdGlvbnMuaW5hY3RpdmVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2V2ZW50TWF0Y2hlcyhkYXRhQXR0ciwgZXZlbnQpIHtcbiAgICAvLyBGaW5kIHRoZSBmaXJzdCBlbGVtZW50IHdpdGggdGhlIGRhdGEgYXR0clxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgWyR7ZGF0YUF0dHJ9XWApO1xuXG4gICAgLy8gVGhlc2UgdHdvIGNvbmRpdGlvbnMgb25seSBleGlzdCBkdWUgdG8gdGhlIGNoYW5jZSB0aGF0IGBldmVudC50YXJnZXQucGF0aGBcbiAgICAvLyBpcyBub3Qgc3VwcG9ydGVkIGFuZCBhIHBvbHlmaWxsIGlzIHVzZWQgaW5zdGVhZC5cbiAgICBsZXQgY29uZGl0aW9uT25lID0gZmFsc2U7XG4gICAgbGV0IGNvbmRpdGlvblR3byA9IGZhbHNlO1xuXG4gICAgLy8gcG9seWZpbGwgZm9yIFNhZmFyaVxuICAgIGNvbnN0IGZpbmRFbGVtZW50V2l0aERhdGFBdHRyID0gKF9lbGVtZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIF9lbGVtZW50Lmhhc0F0dHJpYnV0ZShkYXRhQXR0cikgJiZcbiAgICAgICAgX2VsZW1lbnQuZ2V0QXR0cmlidXRlKGRhdGFBdHRyKSA9PT0gdGhpcy51aWRcbiAgICAgICkge1xuICAgICAgICBjb25kaXRpb25Ud28gPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmluZEVsZW1lbnRXaXRoRGF0YUF0dHIoX2VsZW1lbnQucGFyZW50Tm9kZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKGRhdGFBdHRyKSkge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoZGF0YUF0dHIpID09PSB0aGlzLnVpZCkge1xuICAgICAgICBjb25kaXRpb25PbmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgIC8vIE5vIHN1cHBvcnQgaW4gc2FmYXJpXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LnBhdGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudC5wYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZXZlbnQucGF0aFtpXS5oYXNBdHRyaWJ1dGUoZGF0YUF0dHIpICYmXG4gICAgICAgICAgICBldmVudC5wYXRoW2ldLmdldEF0dHJpYnV0ZShkYXRhQXR0cikgPT09IHRoaXMudWlkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25kaXRpb25Ud28gPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAvLyBUaGlzIHNob3VsZCB3b3JrIGZvciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgYGV2ZW50LnRhcmdldC5wYXRoYFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmluZEVsZW1lbnRXaXRoRGF0YUF0dHIoZXZlbnQudGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29uZGl0aW9uT25lIHx8IGNvbmRpdGlvblR3bztcbiAgfVxuICBfZXZlbnRzKCkge1xuICAgIC8vIFJlc2l6ZSBFdmVudHNcbiAgICBpZiAoIUdpbmdhYnVsb3VzLmV2ZW50cy5yZXNpemUpIHtcbiAgICAgIEdpbmdhYnVsb3VzLnJlZ2lzdGVyR2xvYmFsRXZlbnRMaXN0ZW5lcigncmVzaXplJywgd2luZG93KTtcbiAgICB9XG4gICAgR2luZ2FidWxvdXMuZXZlbnRzLnJlc2l6ZS5yZWdpc3RlckNhbGxiYWNrKCgpID0+IHRoaXMuX29uUmVzaXplKCkpO1xuXG4gICAgLy8gQ2xpY2sgRXZlbnRzXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhldmVudCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhldmVudC50YXJnZXQub2Zmc2V0UGFyZW50LmdldEF0dHJpYnV0ZSh0aGlzLmF0dHIudWlkKSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnVpZCk7XG4gICAgICAvLyBpZiAoXG4gICAgICAvLyAgIHRoaXMucmVzcG9uc2l2ZS5pc0FjdGl2ZSgpICYmXG4gICAgICAvLyAgIGV2ZW50LnRhcmdldC5vZmZzZXRQYXJlbnQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0ci51aWQpID09PSB0aGlzLnVpZFxuICAgICAgLy8gKSB7XG4gICAgICBpZiAodGhpcy5yZXNwb25zaXZlLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZXZlbnQudGFyZ2V0Lmhhc0F0dHJpYnV0ZSh0aGlzLmF0dHIub3BlbikpO1xuICAgICAgICAvLyBPcGVuIEV2ZW50XG4gICAgICAgIGlmICh0aGlzLl9ldmVudE1hdGNoZXModGhpcy5hdHRyLm9wZW4sIGV2ZW50KSkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaXJlZCBvcGVuIGV2ZW50Jyk7XG4gICAgICAgICAgdGhpcy5fc2V0U3RhdGUodGhpcy5vcHRpb25zLnN0YXRlcy5leHBhbmRlZCk7XG5cbiAgICAgICAgICAvLyBIYW5kbGUgY3VzdG9tIGFuaW1hdGlvbiBmdW5jdGlvbnNcbiAgICAgICAgICBpZiAoISF0aGlzLmFuaW1hdGlvbikge1xuICAgICAgICAgICAgR2luZ2FidWxvdXMuYW5pbWF0aW9uc1t0aGlzLmFuaW1hdGlvbl0uYW5pbWF0ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsb3NlIEV2ZW50XG4gICAgICAgIGlmICh0aGlzLl9ldmVudE1hdGNoZXModGhpcy5hdHRyLmNsb3NlLCBldmVudCkpIHtcbiAgICAgICAgICB0aGlzLl9zZXRTdGF0ZSh0aGlzLm9wdGlvbnMuc3RhdGVzLmNvbGxhcHNlZCk7XG5cbiAgICAgICAgICAvLyBIYW5kbGUgY3VzdG9tIGFuaW1hdGlvbiBmdW5jdGlvbnNcbiAgICAgICAgICBpZiAoISF0aGlzLmFuaW1hdGlvbikge1xuICAgICAgICAgICAgR2luZ2FidWxvdXMuYW5pbWF0aW9uc1t0aGlzLmFuaW1hdGlvbl0uYW5pbWF0ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8vIGNsYXNzIENhcmQgZXh0ZW5kcyBFeHBhbmQge1xuLy8gICBnZXQgZGVmYXVsdHMoKSB7XG4vLyAgICAgcmV0dXJuIHtcbi8vICAgICAgIGRhdGFBdHRyOiAgICAgIEdpbmdhYnVsb3VzLm1vZHVsZXMuQ2FyZC5kYXRhQXR0cixcbi8vICAgICAgIGNsYXNzOiAgICAgICAgICdleHBhbmRhYmxlJyxcbi8vICAgICAgIHR5cGU6ICAgICAgICAgICdiYXNpYycsXG4vLyAgICAgICBkZWZhdWx0U3RhdGU6ICAnY29sbGFwc2VkJyxcbi8vICAgICAgIGluYWN0aXZlU3RhdGU6ICdpbmFjdGl2ZScsXG4vLyAgICAgICBzdGF0ZXM6ICAgICAgICB7XG4vLyAgICAgICAgIGV4cGFuZGVkOiAgJ2V4cGFuZGVkJyxcbi8vICAgICAgICAgY29sbGFwc2VkOiAnY29sbGFwc2VkJ1xuLy8gICAgICAgfSxcbi8vICAgICAgIGFuaW1hdGlvbkZ1bmM6IG51bGxcbi8vICAgICB9O1xuLy8gICB9XG4vLyAgIGluaXQoKSB7XG4vLyAgICAgLy8gY29uc29sZS5sb2coJ2FjdGl2ZSBvbiBpbml0OicsIHRoaXMucmVzcG9uc2l2ZS5pc0FjdGl2ZSgpKTtcbi8vICAgICB0aGlzLl9zZXRVSUQoKTtcbi8vICAgICAvLyBTZXQgRGVmYXVsdCBTdGF0ZVxuLy8gICAgIGlmICh0aGlzLnJlc3BvbnNpdmUuaXNBY3RpdmUoKSkge1xuLy8gICAgICAgdGhpcy5fc2V0U3RhdGUodGhpcy5vcHRpb25zLmRlZmF1bHRTdGF0ZSk7XG4vLyAgICAgfSBlbHNlIHtcbi8vICAgICAgIHRoaXMuX3NldFN0YXRlKHRoaXMub3B0aW9ucy5pbmFjdGl2ZVN0YXRlKTtcbi8vICAgICB9XG4vLyAgICAgLy8gSGFuZGxlIEV2ZW50c1xuLy8gICAgIHRoaXMuX2V2ZW50cygpO1xuLy8gICB9XG4vLyAgIF9cbi8vIH1cblxuR2luZ2FidWxvdXMucmVnaXN0ZXJNb2R1bGUoRXhwYW5kLCAnRXhwYW5kJyk7XG4vLyBHaW5nYWJ1bG91cy5yZWdpc3Rlck1vZHVsZShDYXJkLCAnQ2FyZCcpO1xufSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuIWZ1bmN0aW9uKCkge1xuLyoqXG4gKiBQYW5lIE1vZHVsZVxuICogQG1vZHVsZSBwYW5lXG4gKi9cbmNsYXNzIFBhbmUge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBpbnNhdG5jZSBvZiBhIHBhbmUuXG4gICAqIEBjbGFzc1xuICAgKiBAZmlyZXMgUGFuZSNfaW5pdFxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIGVsZW1lbnQgICAgICAgICAgLSB0aGUgcGFuZSBET00gbm9kZS5cbiAgICogQHBhcmFtICB7T2JqZWN0fSAgICBpbmhlcml0ZWRPcHRpb25zIC0gUGFyc2VkIG9wdGlvbnMgZnJvbSBwYXJlbnQgbW9kdWxlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCwgaW5oZXJpdGVkT3B0aW9ucykge1xuICAgIHRoaXMuZWxlbWVudCAgICAgICAgPSBlbGVtZW50O1xuICAgIHRoaXMub3JpZ2luICAgICAgICAgPSB0aGlzLl9nZXRPcmlnaW4oKTtcbiAgICB0aGlzLnBvc2l0aW9uICAgICAgID0gdGhpcy5vcmlnaW47XG4gICAgdGhpcy5jbGFzc2VzICAgICAgICA9IGluaGVyaXRlZE9wdGlvbnMuY2xhc3NlcztcbiAgICBpZiAodGhpcy5faXNEeW5hbWljKCkpIHtcbiAgICAgIHRoaXMuaW5qZWN0ID0gbmV3IEdpbmdhYnVsb3VzLkluamVjdChlbGVtZW50KTtcbiAgICB9XG4gICAgdGhpcy5zY3JvbGxQb3NpdGlvbiA9IDA7XG4gICAgdGhpcy5yZXNwb25zaXZlID0gbmV3IEdpbmdhYnVsb3VzLlJlc3BvbnNpdmUoZWxlbWVudCk7XG4gICAgdGhpcy5kZWJ1ZyA9IG5ldyBHaW5nYWJ1bG91cy5EZWJ1ZygnUGFuZScpO1xuICAgIHRoaXMuX2luaXQoKTtcbiAgfVxuXG4gIGdldCBvcmlnaW5DbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0UG9zaXRpb25DbGFzcyh0aGlzLnJldHJpdmVPcmlnaW4oKSk7XG4gIH1cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBwYW5lIGJ5IGFkZGluZyB0aGUgcHJvcGVyIGNsYXNzZXMgZm9yIGFuIGluYWN0aXZlIHBhbmUuXG4gICAqIEBtZXRob2QgX2luaXRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pbml0KCkge1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3Nlcy5mcm96ZW4sIHRoaXMuY2xhc3Nlcy5maXhlZCk7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZ2V0T3JkZXJDbGFzcyh0aGlzLm9yaWdpbkNsYXNzKSk7XG4gIH1cbiAgX2lzRHluYW1pYygpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1pbmplY3QtYXBpJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBwYW5lJ3Mgb3JpZ2luIGJhc2VkIG9uIGl0J3MgY2xhc3Mgb24gZG9jdW1lbnQgbG9hZC5cbiAgICogQG1ldGhvZCBnZXRPcmlnaW5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogVGhlIHBhbmVzIGdyaWQsIHdpdGggWzAsIDBdIGJlaW5nIHRoZSB2aWV3cG9ydDpcbiAgICpcbiAgICogfCAtMSwtMSB8IDAsLTEgfCAxLC0xIHxcbiAgICogfC0tLS0tLS18LS0tLS0tfC0tLS0tLXxcbiAgICogfCAtMSwwICB8IDAsMCAgfCAxLDAgIHxcbiAgICogfC0tLS0tLS18LS0tLS0tfC0tLS0tLXxcbiAgICogfCAtMSwxICB8IDAsMSAgfCAxLDEgIHxcbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IFRoZSB4IGFuZCB5IGNvb3JkaW5hdGVzIG9uIHRoZSBncmlkLlxuICAgKi9cbiAgX2dldE9yaWdpbigpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygncmlnaHQnKSkge1xuICAgICAgcmV0dXJuIFsxLCAwXTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Fib3ZlJykpIHtcbiAgICAgIHJldHVybiBbMCwgLTFdO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYmVsb3cnKSkge1xuICAgICAgcmV0dXJuIFswLCAxXTtcbiAgICB9XG4gICAgcmV0dXJuIFstMSwgMF07XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIHByb3BlciBjc3MgY2xhc3MgYmFzZWQgb24gdGhlIHBhbmUncyBjb29yZGluYXRlcy5cbiAgICogQG1ldGhvZCBfZ2V0UG9zaXRpb25DbGFzc1xuICAgKiBAcGFyYW0gIHtBcnJheX0gICAgICAgICAgY29vcmRpbmF0ZXMgLSBUaGUgY29vcmRpbmF0ZXMgb2YgdGhlIHBhbmUuXG4gICAqIEByZXR1cm4ge1N0cmluZ3xCb29sZWFufSAgICAgICAgICAgICAtIFRoZSBjc3MgY2xhc3MsIG9yIGZhbHNlIGlmIFswLCAwXSBpcyBwYXNzZWQuXG4gICAqL1xuICBfZ2V0UG9zaXRpb25DbGFzcyhjb29yZGluYXRlcykge1xuICAgIGxldCBjc3NDbGFzcyA9IFtdO1xuICAgIGlmIChjb29yZGluYXRlc1sxXSA9PT0gLTEpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2godGhpcy5jbGFzc2VzLmFib3ZlKTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVzWzFdID09PSAxKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKHRoaXMuY2xhc3Nlcy5iZWxvdyk7XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlc1swXSA9PT0gLTEpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2godGhpcy5jbGFzc2VzLmxlZnQpO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZXNbMF0gPT09IDEpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2godGhpcy5jbGFzc2VzLnJpZ2h0KTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVzWzBdID09PSAwICYmIGNvb3JkaW5hdGVzWzFdID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIHNob3VsZCB0aGlzIGJlIGFuIGVtcHR5IHN0cmluZz9cbiAgICB9XG4gICAgaWYgKGNzc0NsYXNzLmxlbmd0aCA+PSAyKSB7XG4gICAgICByZXR1cm4gY3NzQ2xhc3Muam9pbignLScpO1xuICAgIH1cbiAgICByZXR1cm4gY3NzQ2xhc3MudG9TdHJpbmcoKTtcbiAgfVxuICBfZ2V0T3JkZXJDbGFzcyhwb3NpdGlvbkNsYXNzKSB7XG4gICAgaWYgKHBvc2l0aW9uQ2xhc3MpIHtcbiAgICAgIHJldHVybiBgJHtwb3NpdGlvbkNsYXNzfS1vcmRlcmA7XG4gICAgfVxuICAgIHJldHVybiBgJHt0aGlzLm9yaWdpbkNsYXNzfS1vcmRlcmA7XG4gIH1cbiAgX3N0b3JlU2Nyb2xsUG9zaXRpb24oKSB7XG4gICAgdGhpcy5zY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgIHRoaXMuZGVidWcubWVzc2FnZShgc3RvcmVkOiAke3RoaXMuc2Nyb2xsUG9zaXRpb259YCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3N0b3JlZDonLCB0aGlzLnNjcm9sbFBvc2l0aW9uKTtcbiAgfVxuICBfcmVzdG9yZVNjcm9sbFBvc2l0aW9uKGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudCA9PT0gd2luZG93KSB7XG4gICAgICBlbGVtZW50LnNjcm9sbFRvKDAsIHRoaXMuc2Nyb2xsUG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsUG9zaXRpb247XG4gICAgICAvLyBjb25zb2xlLmxvZygncmVzdG9yZTonLCB0aGlzLnNjcm9sbFBvc2l0aW9uKTtcbiAgICB9XG4gIH1cbiAgX3NldFdpbmRvd1Njcm9sbFBvc2l0aW9uKCkge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbFBvc2l0aW9uO1xuICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxQb3NpdGlvbjtcbiAgfVxuICBfc2V0U2Nyb2xsUG9zaXRpb25XaGVuRml4ZWQoKSB7XG4gICAgdGhpcy5lbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsUG9zaXRpb247XG4gIH1cbiAgLyoqXG4gICAqIEJyaW5ncyB0aGUgcGFuZSBpbnRvIGFuIGFjdGl2ZSBzdGF0ZS5cbiAgICogQG1ldGhvZCBhY3RpdmF0ZVxuICAgKlxuICAgKiBAZmlyZXMgUGFuZXMjX3NldFNjcm9sbFBvc2l0aW9uXG4gICAqL1xuICBhY3RpdmF0ZSgpIHtcbiAgICAvLyBVcGRhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBwYW5lXG4gICAgdGhpcy5wb3NpdGlvbiA9IFswLCAwXTtcbiAgICAvLyBsZXQgY3NzQ2xhc3MgPSB0aGlzLl9nZXRQb3NpdGlvbkNsYXNzKHRoaXMucG9zaXRpb24pO1xuICAgIC8vIFVuZnJlZXplIHBhbmVcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNsYXNzZXMuZnJvemVuLCB0aGlzLmNsYXNzZXMuZml4ZWQpO1xuICAgIC8vIFJlbW92ZSBmbGV4IG9yZGVyIGNsYXNzXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZ2V0T3JkZXJDbGFzcyh0aGlzLm9yaWdpbkNsYXNzKSk7XG4gICAgLy8gQWRkIGFjdGl2ZSBjbGFzc1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3Nlcy5hY3RpdmUpO1xuICAgIC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uXG4gICAgLy8gdGhpcy5fcmVzdG9yZVNjcm9sbFBvc2l0aW9uKHRoaXMuZWxlbWVudCk7XG4gICAgLy8gaWYgKClcbiAgICB0aGlzLl9zZXRXaW5kb3dTY3JvbGxQb3NpdGlvbigpO1xuICAgIC8vIFJlbW92ZSB0cmFuc2Zvcm0gY2xhc3MgdG8gYmVnaW4gdHJhbnNpdGlvblxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMub3JpZ2luQ2xhc3MpO1xuICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIC8vICAgdGhpcy5fcmVzdG9yZVNjcm9sbFBvc2l0aW9uKHdpbmRvdyk7XG4gICAgLy8gfSwgMzAwKTtcbiAgfVxuICAvKipcbiAgICogQnJpbmdzIHRoZSBwYW5lIGludG8gYW4gaW5hY3RpdmUgc3RhdGVcbiAgICogQG1ldGhvZCBkZWFjdGl2YXRlXG4gICAqL1xuICBkZWFjdGl2YXRlKCkge1xuICAgIHRoaXMuX3N0b3JlU2Nyb2xsUG9zaXRpb24oKTtcbiAgICAvLyBVcGRhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBwYW5lXG4gICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMub3JpZ2luO1xuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucmV0cml2ZU9yaWdpbigpKTtcbiAgICAvLyBsZXQgY3NzQ2xhc3MgPSB0aGlzLl9nZXRQb3NpdGlvbkNsYXNzKHRoaXMucG9zaXRpb24pO1xuICAgIC8vIFRha2UgY2FyZSBvZiBtb3N0IG9mIHRoZSBjbGFzc2VzXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXG4gICAgICB0aGlzLmNsYXNzZXMuZnJvemVuLFxuICAgICAgdGhpcy5jbGFzc2VzLmZpeGVkLFxuICAgICAgdGhpcy5fZ2V0T3JkZXJDbGFzcyh0aGlzLm9yaWdpbkNsYXNzKVxuICAgICk7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jbGFzc2VzLmFjdGl2ZSk7XG4gICAgLy8gVGFrZSBjYXJlIG9mIHNjcm9sbCBwb3NpdGlvblxuICAgIHRoaXMuX3NldFNjcm9sbFBvc2l0aW9uV2hlbkZpeGVkKCk7XG4gICAgLy8gQWRkIHRoZSB0cmFuc2Zvcm0gY2xhc3MgdG8gYmVnaW4gdHJhbnNpdGlvblxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMub3JpZ2luQ2xhc3MpO1xuICB9XG4gIHJldHJpdmVPcmlnaW4oKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5vcmlnaW4pO1xuICB9XG4gIHVwZGF0ZVBvc2l0aW9uKGNvb3JkaW5hdGVzKSB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IGNvb3JkaW5hdGVzO1xuICB9XG59XG5cbmNsYXNzIEhvbWVQYW5lIGV4dGVuZHMgUGFuZSB7XG4gIF9pbml0KCkge1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3Nlcy5hY3RpdmUpO1xuICB9XG4gIF9vcHBvc2l0ZUNvb3JkaW5hbnRlcyhjb29yZGluYXRlcykge1xuICAgIGxldCBvdXRwdXQgPSBjb29yZGluYXRlcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG91dHB1dFtpXSA9PT0gMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIG91dHB1dFtpXSAqPSAtMTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICBhY3RpdmF0ZSgpIHtcbiAgICBsZXQgY3NzQ2xhc3MgPSB0aGlzLl9nZXRQb3NpdGlvbkNsYXNzKHRoaXMucG9zaXRpb24pO1xuXG4gICAgdGhpcy5wb3NpdGlvbiA9IFswLCAwXTtcbiAgICAvLyBVbmZyZWV6ZSBwYW5lIGFuZCByZW1vdmUgb3JkZXIgY2xhc3NcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIHRoaXMuY2xhc3Nlcy5mcm96ZW4sXG4gICAgICB0aGlzLmNsYXNzZXMuZml4ZWQsXG4gICAgICB0aGlzLl9nZXRPcmRlckNsYXNzKGNzc0NsYXNzKVxuICAgICk7XG4gICAgLy8gQWRkIGFjdGl2ZSBjbGFzc1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3Nlcy5hY3RpdmUpO1xuICAgIC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uXG4gICAgLy8gdGhpcy5fcmVzdG9yZVNjcm9sbFBvc2l0aW9uKHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5fc2V0V2luZG93U2Nyb2xsUG9zaXRpb24oKTtcbiAgICAvLyBSZW1vdmUgdHJhbnNmb3JtIGNsYXNzIHRvIGJlZ2luIHRyYW5zaXRpb25cbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjc3NDbGFzcyk7XG4gICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgLy8gICB0aGlzLl9yZXN0b3JlU2Nyb2xsUG9zaXRpb24od2luZG93KTtcbiAgICAvLyB9LCAzMDApO1xuICB9XG4gIGRlYWN0aXZhdGUob3JpZ2luT2ZBY3RpdmVQYW5lKSB7XG4gICAgdGhpcy5fc3RvcmVTY3JvbGxQb3NpdGlvbigpO1xuICAgIC8vIFVwZGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHBhbmVcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5fb3Bwb3NpdGVDb29yZGluYW50ZXMob3JpZ2luT2ZBY3RpdmVQYW5lKTtcbiAgICBsZXQgY3NzQ2xhc3MgPSB0aGlzLl9nZXRQb3NpdGlvbkNsYXNzKHRoaXMucG9zaXRpb24pO1xuICAgIC8vIFRha2UgY2FyZSBvZiBtb3N0IG9mIHRoZSBjbGFzc2VzXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXG4gICAgICB0aGlzLmNsYXNzZXMuZnJvemVuLFxuICAgICAgdGhpcy5jbGFzc2VzLmZpeGVkLFxuICAgICAgdGhpcy5fZ2V0T3JkZXJDbGFzcyhjc3NDbGFzcylcbiAgICApO1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2xhc3Nlcy5hY3RpdmUpO1xuICAgIC8vIFRha2UgY2FyZSBvZiBzY3JvbGwgcG9zaXRpb25cbiAgICB0aGlzLl9zZXRTY3JvbGxQb3NpdGlvbldoZW5GaXhlZCgpO1xuICAgIC8vIEFkZCB0aGUgdHJhbnNmb3JtIGNsYXNzIHRvIGJlZ2luIHRyYW5zaXRpb25cbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XG4gIH1cbn1cbmNsYXNzIER5bmFtaWNQYW5lIGV4dGVuZHMgUGFuZSB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGluaGVyaXRlZE9wdGlvbnMpIHtcbiAgICBzdXBlcihlbGVtZW50LCBpbmhlcml0ZWRPcHRpb25zKTtcbiAgICB0aGlzLmluamVjdCA9IG5ldyBHaW5nYWJ1bG91cy5JbmplY3QoZWxlbWVudCk7XG4gIH1cbn1cbmNsYXNzIENhcm91c2VsUGFuZSBleHRlbmRzIFBhbmUge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBpbmhlcml0ZWRPcHRpb25zKSB7XG4gICAgc3VwZXIoZWxlbWVudCwgaW5oZXJpdGVkT3B0aW9ucyk7XG4gICAgdGhpcy5kZWJ1ZyA9IG5ldyBHaW5nYWJ1bG91cy5EZWJ1ZygnQ2Fyb3VzZWxQYW5lJyk7XG4gICAgdGhpcy5jYXJvdXNlbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jYXJvdXNlbC1wYW5lc10nKTtcbiAgICB0aGlzLnRpdGxlQmFyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYW5lLWNhcm91c2VsLXRpdGxlLWJhcicpO1xuICAgIHRoaXMuX2V2ZW50cygpO1xuICB9XG4gIF9nb1RvUGFuZShwYW5lKSB7XG4gICAgbGV0IHRyYW5zbGF0ZTtcbiAgICBpZiAocGFuZSA9PT0gJ2xlZnQnKSB7XG4gICAgICB0cmFuc2xhdGUgPSAndHJhbnNsYXRlWCgwKSc7XG4gICAgfVxuICAgIGlmIChwYW5lID09PSAnY2VudGVyJykge1xuICAgICAgdHJhbnNsYXRlID0gJyc7XG4gICAgfVxuICAgIGlmIChwYW5lID09PSAncmlnaHQnKSB7XG4gICAgICB0cmFuc2xhdGUgPSAndHJhbnNsYXRlWCgtMjAwJSknO1xuICAgIH1cbiAgICB0aGlzLmNhcm91c2VsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zbGF0ZTtcbiAgICB0aGlzLnRpdGxlQmFyLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zbGF0ZTtcbiAgfVxuICBfZXZlbnRzKCkge1xuICAgIGxldCBhdHRyID0gJ2RhdGEtcGFuZXMtbmF2JztcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKGF0dHIpKSB7XG4gICAgICAgIGxldCBhdHRyVmFsdWUgPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKGF0dHIpO1xuICAgICAgICBpZiAoYXR0clZhbHVlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICB0aGlzLl9nb1RvUGFuZSgnbGVmdCcpO1xuICAgICAgICAgIHRoaXMuZGVidWcubWVzc2FnZSgnbGVmdCBtb3ZlbWVudCB0cmlnZ2VyZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0clZhbHVlID09PSAnY2VudGVyJykge1xuICAgICAgICAgIHRoaXMuX2dvVG9QYW5lKCdjZW50ZXInKTtcbiAgICAgICAgICB0aGlzLmRlYnVnLm1lc3NhZ2UoJ2NlbnRlciBtb3ZlbWVudCB0cmlnZ2VyZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0clZhbHVlID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgdGhpcy5fZ29Ub1BhbmUoJ3JpZ2h0Jyk7XG4gICAgICAgICAgdGhpcy5kZWJ1Zy5tZXNzYWdlKCdyaWdodCBtb3ZlbWVudCB0cmlnZ2VyZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbkdpbmdhYnVsb3VzLnJlZ2lzdGVyTW9kdWxlKFBhbmUsICdQYW5lJyk7XG5HaW5nYWJ1bG91cy5yZWdpc3Rlck1vZHVsZShIb21lUGFuZSwgJ0hvbWVQYW5lJyk7XG5HaW5nYWJ1bG91cy5yZWdpc3Rlck1vZHVsZShEeW5hbWljUGFuZSwgJ0R5bmFtaWNQYW5lJyk7XG5HaW5nYWJ1bG91cy5yZWdpc3Rlck1vZHVsZShDYXJvdXNlbFBhbmUsICdDYXJvdXNlbFBhbmUnKTtcbn0oKTtcbiIsIiFmdW5jdGlvbigpIHtcblxuY2xhc3MgUGFuZXMge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBpbnNhdG5jZSBvZiBQYW5lbHNcbiAgICogQGNsYXNzXG4gICAqIEByZXF1aXJlcyBTY3JvbGxQb3NpdGlvblxuICAgKiBAcmVxdWlyZXMgRGVidWdcbiAgICpcbiAgICogQHBhcmFtIHtqUXVlcnl9IGVsZW1lbnQgLSBqUXVlcnkgb2JqZWN0IHRoYXQgaXMgdGhlIGhpZ2hlc3QgcGFuZXMgYW5zZXN0b3IuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gQ2FuIE92ZXJyaWRlIGRlZmF1bHQgdWkgbW9kdWxlIGNvbmZpZy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5vcHRpb25zID0gR2luZ2FidWxvdXMuZGVlcEV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgdGhpcy5jbGFzc2VzID0gdGhpcy5vcHRpb25zLmNsYXNzZXM7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFjdGl2ZTogICAnaG9tZScsXG4gICAgICBwcmV2aW91czogZmFsc2VcbiAgICB9O1xuICAgIHRoaXMucGFuZXMgPSB7fTtcbiAgfVxuICBnZXQgZGVmYXVsdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFBdHRyOiAgICAgICAgICBHaW5nYWJ1bG91cy5tb2R1bGVzLlBhbmVzLmRhdGFBdHRyLFxuICAgICAgcGFuZURhdGFBdHRyOiAgICAgICdkYXRhLXBhbmUnLFxuICAgICAgdHJhbnNsYXRlRGlzdGFuY2U6IDEwMCxcbiAgICAgIGNsYXNzZXM6ICAgICAgICAgICB7XG4gICAgICAgIHBhbmVzOiAgJ3BhbmVzJyxcbiAgICAgICAgcGFuZTogICAncGFuZScsXG4gICAgICAgIGZyb3plbjogJ2Zyb3plbi1wYW5lJyxcbiAgICAgICAgZml4ZWQ6ICAnZml4ZWQtcGFuZScsXG4gICAgICAgIGFjdGl2ZTogJ2FjdGl2ZScsXG4gICAgICAgIGxlZnQ6ICAgJ2xlZnQnLFxuICAgICAgICByaWdodDogICdyaWdodCcsXG4gICAgICAgIGFib3ZlOiAgJ2Fib3ZlJyxcbiAgICAgICAgYmVsb3c6ICAnYmVsb3cnXG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBnZXQgYXR0cigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcGFyZW50OiB0aGlzLm9wdGlvbnMuZGF0YUF0dHIsXG4gICAgICBtYWluOiAgIGAke3RoaXMub3B0aW9ucy5wYW5lRGF0YUF0dHJ9LWhvbWVgLFxuICAgICAgcGFuZTogICB0aGlzLm9wdGlvbnMucGFuZURhdGFBdHRyLFxuICAgICAgb3BlbjogICBgJHt0aGlzLm9wdGlvbnMucGFuZURhdGFBdHRyfS1vcGVuYCxcbiAgICAgIGNsb3NlOiAgYCR7dGhpcy5vcHRpb25zLnBhbmVEYXRhQXR0cn0tY2xvc2VgXG4gICAgfTtcbiAgfVxuICBnZXQgdGFyZ2V0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBwYXJlbnQ6IGBbJHt0aGlzLm9wdGlvbnMuZGF0YUF0dHJ9XWAsXG4gICAgICBtYWluOiAgIGBbJHt0aGlzLm9wdGlvbnMucGFuZURhdGFBdHRyfS1ob21lXWAsXG4gICAgICBwYW5lOiAgIGBbJHt0aGlzLm9wdGlvbnMucGFuZURhdGFBdHRyfV1gLFxuICAgICAgb3BlbjogICBgWyR7dGhpcy5vcHRpb25zLnBhbmVEYXRhQXR0cn0tb3Blbl1gLFxuICAgICAgY2xvc2U6ICBgWyR7dGhpcy5vcHRpb25zLnBhbmVEYXRhQXR0cn0tY2xvc2VdYFxuICAgIH07XG4gIH1cbiAgaW5pdCgpIHtcbiAgICB0aGlzLl9yZWdpc3RlclBhbmVzKCk7XG4gICAgdGhpcy5fZXZlbnRzKCk7XG4gIH1cbiAgX3VwZGF0ZVN0YXRlKGlkKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYWN0aXZlICE9PSBpZCkge1xuICAgICAgdGhpcy5zdGF0ZS5wcmV2aW91cyA9IHRoaXMuc3RhdGUuYWN0aXZlO1xuICAgICAgdGhpcy5zdGF0ZS5hY3RpdmUgPSBpZDtcbiAgICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9ucygpO1xuICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zdGF0ZSwgdGhpcy5wYW5lcyk7XG4gICAgfVxuICB9XG4gIF91cGRhdGVQb3NpdGlvbnMoKSB7XG4gICAgLy8gTk9URSBZT1UgTVVTVCBSVU4gVEhFIERFQUNUSVZBVEUgTUVUSE9EIEJFRk9SRSBUSEUgQUNUSVZBVEUgTUVUSE9ELlxuICAgIC8vICAgICAgRmFpbGluZyB0byBkbyBzbyB3aWxsIHJlc3VsdCBpbiB0aGUgc2Nyb2xsIHBvc2l0aW9uIG5vdCBiZWluZyBzdG9yZWQuXG4gICAgaWYgKHRoaXMuc3RhdGUucHJldmlvdXMgPT09ICdob21lJykge1xuICAgICAgdGhpcy5wYW5lc1t0aGlzLnN0YXRlLnByZXZpb3VzXS5kZWFjdGl2YXRlKHRoaXMucGFuZXNbdGhpcy5zdGF0ZS5hY3RpdmVdLnJldHJpdmVPcmlnaW4oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGFuZXNbdGhpcy5zdGF0ZS5wcmV2aW91c10uZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgICB0aGlzLnBhbmVzW3RoaXMuc3RhdGUuYWN0aXZlXS5hY3RpdmF0ZSgpO1xuICB9XG4gIF9yZWdpc3RlclBhbmVzKCkge1xuICAgIGxldCBwYW5lc0luRG9jdW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnRhcmdldC5wYW5lKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhbmVzSW5Eb2N1bWVudC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGtleSA9IHBhbmVzSW5Eb2N1bWVudFtpXS5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLnBhbmUpO1xuXG4gICAgICAvLyBpZiB0aGUgZGF0YSBhdHRyIGhhcyBubyB2YWx1ZSwgdGhlbiBpdCdzIGEgbmVzdGVkIHBhbmUsIGFuZCB3aWxsIGJlIHNraXBwZWRcbiAgICAgIGlmIChrZXkgIT09ICcnICYmIGtleSAhPT0gJ2hvbWUnKSB7XG4gICAgICAgIGlmICghIXBhbmVzSW5Eb2N1bWVudFtpXS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jYXJvdXNlbC1wYW5lc10nKSkge1xuICAgICAgICAgIHRoaXMucGFuZXNba2V5XSA9IG5ldyBHaW5nYWJ1bG91cy5DYXJvdXNlbFBhbmUoXG4gICAgICAgICAgICBwYW5lc0luRG9jdW1lbnRbaV0sXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGFuZXNba2V5XSA9IG5ldyBHaW5nYWJ1bG91cy5QYW5lKHBhbmVzSW5Eb2N1bWVudFtpXSwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gJ2hvbWUnKSB7XG4gICAgICAgIHRoaXMucGFuZXNba2V5XSA9IG5ldyBHaW5nYWJ1bG91cy5Ib21lUGFuZShwYW5lc0luRG9jdW1lbnRbaV0sIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIF9ldmVudHMoKSB7XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAvLyBPcGVuIEV2ZW50cyBUcmlnZ2VyZWRcbiAgICAgIGlmIChldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKHRoaXMuYXR0ci5vcGVuKSkge1xuICAgICAgICBsZXQgaWQgPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0ci5vcGVuKTtcbiAgICAgICAgLy8gSWYgYWN0aXZlIGluIGN1cnJlbnQgYnJlYWtwb2ludFxuICAgICAgICBpZiAodGhpcy5wYW5lc1tpZF0ucmVzcG9uc2l2ZS5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUoaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWluamVjdCcpKSB7XG4gICAgICAgICAgLy8gSW5qZWN0IGxvZ2ljIGhlcmVcbiAgICAgICAgICBsZXQga2V5ID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pbmplY3QnKTtcbiAgICAgICAgICB0aGlzLnBhbmVzW2lkXS5pbmplY3QudXBkYXRlQ29udGVudChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENsb3NlIEV2ZW50XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0Lmhhc0F0dHJpYnV0ZSh0aGlzLmF0dHIuY2xvc2UpKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaXJlZCBjbG9zaW5nIGV2ZW50Jyk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKCdob21lJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuR2luZ2FidWxvdXMucmVnaXN0ZXJNb2R1bGUoUGFuZXMsICdQYW5lcycpO1xuXG59KCk7XG4iLCIhZnVuY3Rpb24oKSB7XG5mdW5jdGlvbiBpbml0KCkge1xuICB2YXIgcGFuZXNOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihHaW5nYWJ1bG91cy5tb2R1bGVzLlBhbmVzLmRhdGFBdHRyVGFyZ2V0KTtcbiAgdmFyIHBhbmVzID0gbmV3IEdpbmdhYnVsb3VzLlBhbmVzKHBhbmVzTm9kZSk7XG4gIHBhbmVzLmluaXQoKTtcblxuICBsZXQgYmFja2dyb3VuZE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEdpbmdhYnVsb3VzLm1vZHVsZXMuQmFja2dyb3VuZC5kYXRhQXR0clRhcmdldCk7XG4gIGxldCBiYWNrZ3JvdW5kID0gbmV3IEdpbmdhYnVsb3VzLkJhY2tncm91bmQoYmFja2dyb3VuZE5vZGUpO1xuICBiYWNrZ3JvdW5kLmluaXQoKTtcblxuICAvLyBsZXQgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKEdpbmdhYnVsb3VzLm1vZHVsZXMuQ2FyZC5kYXRhQXR0clRhcmdldCk7XG4gIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcbiAgLy8gICBsZXQgbW9kdWxlID0gbmV3IEdpbmdhYnVsb3VzLkNhcmQoY2FyZHNbaV0pO1xuICAvLyAgIG1vZHVsZS5pbml0KCk7XG4gIC8vICAgLy8gY29uc29sZS5sb2coYGluaXQgY2FyZDogJHtpfWApO1xuICAvLyB9XG5cbiAgbGV0IGV4cGFuZGFibGVOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoR2luZ2FidWxvdXMubW9kdWxlcy5FeHBhbmQuZGF0YUF0dHJUYXJnZXQpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGV4cGFuZGFibGVOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBleHBhbmQgPSBuZXcgR2luZ2FidWxvdXMuRXhwYW5kKGV4cGFuZGFibGVOb2Rlc1tpXSk7XG4gICAgZXhwYW5kLmluaXQoKTtcbiAgfVxufVxuXG5HaW5nYWJ1bG91cy5yZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHdpbmRvdyk7XG5cbkdpbmdhYnVsb3VzLkRlYnVnLmNvbmZpZyh0cnVlLCB7XG4gIFBhbmU6ICAgICAgICAgdHJ1ZSxcbiAgRHluYW1pY1BhbmU6ICB0cnVlLFxuICBDYXJvdXNlbFBhbmU6IHRydWVcbn0pO1xuXG5HaW5nYWJ1bG91cy5yZWdpc3RlckFuaW1hdGlvbignZXhwYW5kaW5nVGFicycsIChlbGVtZW50KSA9PiB7XG4gIGlmICghZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYW5pbWF0aW9uX2JvcmRlci1sZWZ0JykpIHtcbiAgICAvLyBhZGQgZHVtbXkgZWxlbWVudCBmb3IgYW5pbWF0aW5nIHRoZSBib3JkZXJcbiAgICBjb25zdCBib3JkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBmaXJzdENoaWxkID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGVkLWNhbGxvdXQtaGVhZGluZycpO1xuICAgIGJvcmRlci5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25fYm9yZGVyLWxlZnQnKTtcblxuICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGJvcmRlciwgZmlyc3RDaGlsZCk7XG4gIH1cbiAgY29uc3Qgd3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS1pbm5lciBtYWluLmNvbnRlbnQnKTtcblxuICBjb25zdCBzdGF0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWV4cGFuZCcpO1xuICBjb25zdCBhbmltYXRpb25DbGFzcyA9ICdhbmltYXRpb25fZXhwYW5kaW5nLXRhYnMnO1xuICBjb25zdCBleHBhbmRCYXNlID0gYCR7YW5pbWF0aW9uQ2xhc3N9X2V4cGFuZGA7XG4gIGNvbnN0IGNvbGxhcHNlQmFzZSA9IGAke2FuaW1hdGlvbkNsYXNzfV9jb2xsYXBzZWA7XG5cbiAgY29uc3QgdG9wYmFySGVpZ2h0ID0gNDA7XG4gIGNvbnN0IHBvc2l0aW9uVG9wID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG5cbiAgd3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9uX2V4cGFuZGluZy10YWJzX2luLXByb2dyZXNzJyk7XG5cbiAgLy8gRVhQQU5EXG4gIGlmIChzdGF0ZSA9PT0gJ2V4cGFuZGVkJykge1xuICAgIHdyYXBwZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGlvbl9leHBhbmRpbmctdGFic190YWItYWN0aXZlJyk7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgYCR7Y29sbGFwc2VCYXNlfV9jb2xsYXBzZS1ib3JkZXJfdHJhbnNpdGlvbmAsXG4gICAgICBgJHtjb2xsYXBzZUJhc2V9X2NvbGxhcHNlLWJvcmRlcl9hbmltYXRlYFxuICAgICk7XG5cbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICBgJHtjb2xsYXBzZUJhc2V9X3NoaWZ0LWRvd25fdHJhbnNpdGlvbmAsXG4gICAgICBgJHtjb2xsYXBzZUJhc2V9X3NoaWZ0LWRvd25fYW5pbWF0ZWBcbiAgICApO1xuXG4gICAgR2luZ2FidWxvdXMuYW5pbWF0aW9uU2VyaWVzKFxuICAgICAgZWxlbWVudCxcbiAgICAgICdleHBhbmRpbmctdGFic19leHBhbmQnLFxuICAgICAge1xuICAgICAgICBhZnRlcjogKCkgPT4ge1xuICAgICAgICAgIHdyYXBwZXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGlvbl9leHBhbmRpbmctdGFic19pbi1wcm9ncmVzcycpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgW1xuICAgICAgICAnc2hpZnQtdXAnLFxuICAgICAgICA2MDAsXG4gICAgICAgIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwgLSR7cG9zaXRpb25Ub3AgLSB0b3BiYXJIZWlnaHR9cHgsIDApYDtcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFsnZXhwYW5kLWJvcmRlcicsIDQwMF1cbiAgICApO1xuICB9XG5cbiAgLy8gQ09MTEFQU0VcbiAgaWYgKHN0YXRlID09PSAnY29sbGFwc2VkJykge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIGAke2V4cGFuZEJhc2V9X3NoaWZ0LXVwX3RyYW5zaXRpb25gLFxuICAgICAgYCR7ZXhwYW5kQmFzZX1fc2hpZnQtdXBfYW5pbWF0ZWBcbiAgICApO1xuXG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgYCR7ZXhwYW5kQmFzZX1fZXhwYW5kLWJvcmRlcl90cmFuc2l0aW9uYCxcbiAgICAgIGAke2V4cGFuZEJhc2V9X2V4cGFuZC1ib3JkZXJfYW5pbWF0ZWBcbiAgICApO1xuXG4gICAgR2luZ2FidWxvdXMuYW5pbWF0aW9uU2VyaWVzKFxuICAgICAgZWxlbWVudCxcbiAgICAgICdleHBhbmRpbmctdGFic19jb2xsYXBzZScsXG4gICAgICB7XG4gICAgICAgIGFmdGVyOiAoKSA9PiB7XG4gICAgICAgICAgd3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uX2V4cGFuZGluZy10YWJzX3RhYi1hY3RpdmUnKTtcbiAgICAgICAgICB3cmFwcGVyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25fZXhwYW5kaW5nLXRhYnNfaW4tcHJvZ3Jlc3MnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFtcbiAgICAgICAgJ2NvbGxhcHNlLWJvcmRlcicsXG4gICAgICAgIDQwMFxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgJ3NoaWZ0LWRvd24nLFxuICAgICAgICA2MDAsXG4gICAgICAgIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICBdXG4gICAgKTtcbiAgfVxufSk7XG5cbi8vIENhcmQgQW5pbWF0aW9uXG5HaW5nYWJ1bG91cy5yZWdpc3RlckFuaW1hdGlvbignZXhwYW5kaW5nQ2FyZHMnLCAoZWxlbWVudCkgPT4ge1xuICBjb25zdCBzdGF0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWV4cGFuZCcpO1xuICBjb25zdCBjaGlsZE5vZGVzID0ge1xuICAgIGJvcmRlckxlZnQ6ICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYm9yZGVyLWxlZnQnKSxcbiAgICBvcHRpb25zQmFyOiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtb3B0aW9ucy1iYXInKSxcbiAgICBjb3ZlcjogICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtY292ZXInKSxcbiAgICBib3R0b21Db250YWluZXI6IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmJvdHRvbS1jb250YWluZXInKVxuICB9O1xuXG4gIC8vIEFjdGl2YXRpb24gQW5pbWF0aW9uXG4gIGlmIChzdGF0ZSA9PT0gJ2V4cGFuZGVkJykge1xuICAgIEdpbmdhYnVsb3VzLmFuaW1hdGlvblNlcmllcyhcbiAgICAgIGVsZW1lbnQsXG4gICAgICAnZXhwYW5kaW5nLWNhcmRzX2V4cGFuZCcsXG4gICAgICBmYWxzZSxcbiAgICAgIFtcbiAgICAgICAgJ2V4cGFuZGluZycsXG4gICAgICAgIDQwMCxcbiAgICAgICAgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IDA7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAwO1xuICAgICAgICAgIGNoaWxkTm9kZXMuYm9yZGVyTGVmdC5zdHlsZS5oZWlnaHQgPSBgJHtlbGVtZW50Lm9mZnNldEhlaWdodCAtIDEwfXB4YDtcbiAgICAgICAgICBjaGlsZE5vZGVzLmJvcmRlckxlZnQuc3R5bGUubWFyZ2luVG9wID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgXVxuICAgICk7XG4gIH1cblxuICAvLyBEZWFjdGl2YXRpb24gQW5pbWF0aW9uXG4gIGlmIChzdGF0ZSA9PT0gJ2NvbGxhcHNlZCcpIHtcbiAgICBHaW5nYWJ1bG91cy5hbmltYXRpb25TZXJpZXMoXG4gICAgICBlbGVtZW50LFxuICAgICAgJ2V4cGFuZGluZy1jYXJkc19jb2xsYXBzZScsXG4gICAgICBmYWxzZSxcbiAgICAgIFtcbiAgICAgICAgJ2NvbGxhcHNpbmdfcHJlLWhlaWdodCcsXG4gICAgICAgIDQwMCxcbiAgICAgICAgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IGAtJHtjaGlsZE5vZGVzLm9wdGlvbnNCYXIub2Zmc2V0SGVpZ2h0fXB4YDtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IGAtJHtjaGlsZE5vZGVzLmJvdHRvbUNvbnRhaW5lci5vZmZzZXRIZWlnaHR9cHhgO1xuICAgICAgICAgIGNoaWxkTm9kZXMuYm9yZGVyTGVmdC5zdHlsZS5oZWlnaHQgPSBgJHtjaGlsZE5vZGVzLmNvdmVyLm9mZnNldEhlaWdodH1weGA7XG4gICAgICAgICAgY2hpbGROb2Rlcy5ib3JkZXJMZWZ0LnN0eWxlLm1hcmdpblRvcCA9IGAke2NoaWxkTm9kZXMub3B0aW9uc0Jhci5vZmZzZXRIZWlnaHR9cHhgO1xuXG4gICAgICAgICAgLy8gZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICBdXG4gICAgICAvLyBbXG4gICAgICAvLyAgICdjb2xsYXBzaW5nX3Bvc3QtaGVpZ2h0JyxcbiAgICAgIC8vICAgMjAwLFxuICAgICAgLy8gICAoZWxlbWVudCkgPT4ge1xuICAgICAgLy8gICAgIGNvbnN0IGhlaWdodCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtY292ZXInKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAvLyAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYm9yZGVyLWxlZnQnKS5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICAgICAgLy8gICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgICAgIC8vICAgICAvLyBlbGVtZW50LnN0eWxlLmhlaWdodCA9IG51bGw7XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIF1cbiAgICApO1xuICB9XG59LCAoZWxlbWVudCkgPT4ge1xuICBjb25zdCBjaGlsZE5vZGVzID0ge1xuICAgIGJvcmRlckxlZnQ6ICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYm9yZGVyLWxlZnQnKSxcbiAgICBvcHRpb25zQmFyOiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtb3B0aW9ucy1iYXInKSxcbiAgICBjb3ZlcjogICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtY292ZXInKSxcbiAgICBib3R0b21Db250YWluZXI6IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmJvdHRvbS1jb250YWluZXInKVxuICB9O1xuICBlbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IGAtJHtjaGlsZE5vZGVzLm9wdGlvbnNCYXIub2Zmc2V0SGVpZ2h0fXB4YDtcbiAgZWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBgLSR7Y2hpbGROb2Rlcy5ib3R0b21Db250YWluZXIub2Zmc2V0SGVpZ2h0fXB4YDtcblxuICBjaGlsZE5vZGVzLmJvcmRlckxlZnQuc3R5bGUuaGVpZ2h0ID0gYCR7Y2hpbGROb2Rlcy5jb3Zlci5vZmZzZXRIZWlnaHR9cHhgO1xuICBjaGlsZE5vZGVzLmJvcmRlckxlZnQuc3R5bGUubWFyZ2luVG9wID0gYCR7Y2hpbGROb2Rlcy5vcHRpb25zQmFyLm9mZnNldEhlaWdodH1weGA7XG59KTtcblxuR2luZ2FidWxvdXMuYW5pbWF0aW9uU2VyaWVzKFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZGluZy1zY3JlZW4nKSxcbiAgJ2xvYWRpbmctc2NyZWVuJyxcbiAge1xuICAgIGJlZm9yZTogKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnLmxvYWRpbmcnKTtcbiAgICB9LFxuICAgIGFmdGVyOiAoZWxlbWVudCkgPT4ge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdsb2FkaW5nLWNvbXBsZXRlJyk7XG4gICAgfVxuICB9LFxuICBbXG4gICAgJ2luJyxcbiAgICAyMDBcbiAgXSxcbiAgW1xuICAgICdsb2FkaW5nJyxcbiAgICA2MDBcbiAgXSxcbiAgW1xuICAgICdvdXQnLFxuICAgIDIwMFxuICBdXG4pO1xuLy8gY29uc29sZS5sb2coR2luZ2FidWxvdXMpO1xuaW5pdCgpO1xufSgpO1xuXG5cblxuLy8gY29uc3QgcmVuZGVyV2lkZ2V0ID0gZWxlbWVudCA9PiB7XG5cbi8vIH1cblxuY29uc3QgcmVjYXB0Y2hhT25Mb2FkQ2FsbGJhY2sgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRhY3RGb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZWNhcHRjaGEnKTtcbiAgY29uc29sZS5sb2coJ0xvb2sgYXQgbWUhJyk7XG4gIGNvbnNvbGUubG9nKGNvbnRhY3RGb3Jtcyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGFjdEZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc29sZS5sb2coY29udGFjdEZvcm1zW2ldLmF0dHJpYnV0ZXMuaWQpO1xuICAgIGdyZWNhcHRjaGEucmVuZGVyKGNvbnRhY3RGb3Jtc1tpXSwge1xuICAgICAgc2l0ZWtleTogJzZMY3BOYkFaQUFBQUFIZmdlZFJhZjNTZFRnamlXam9TNE5HU1VUTnEnLFxuICAgICAgdGhlbWU6ICdkYXJrJ1xuICAgIH0pO1xuICB9XG59O1xuXG5cblxuIl19