"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}!function(){var t={modules:{},_hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},registerModule:function(t,e,n,i){var s=3<arguments.length&&void 0!==i&&i;e=e||t.prototype.constructor.name,n=n||this._hyphenate(e),this.modules[e]={name:e,dataAttr:"data-".concat(n),dataAttrTarget:"[data-".concat(n,"]"),jquery:s},this[e]=t}};window.Gingabulous=t}(),Gingabulous.animations={},Gingabulous.registerAnimation=function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null;if(Gingabulous.animations[t])throw new Error("YA DUN FUCKED UP BITCH, THEMS NAMES IS RESEVRED. READ THE SIGN DUMMY.");Gingabulous.animations[t]={setup:i,animate:e}},Gingabulous.animationSeries=function(s,t,o){for(var e=arguments.length,a=new Array(3<e?e-3:0),n=3;n<e;n++)a[n-3]=arguments[n];for(var r=0,l=null,u={base:t,current:null,previous:null},c={current:0,previousStep:null,total:0},h=[],i=0;i<a.length;i++)c.total+=a[i][1],h.push(!1);console.log(c.total),o&&o.before&&o.before(s),window.requestAnimationFrame(function t(e){var n=e-(l=l||e);if(s.classList.add("animation_in-progress"),o&&o.beforeEachFrame&&o.beforeEachFrame(s),n>=c.current&&!1===h[r]){o&&o.beforeEachStep&&o.beforeEachStep(s);var i=a[r][2]||!1;u.current=a[r][0],u.previous&&s.classList.remove("animation_".concat(u.base,"_").concat(u.previous)),s.classList.add("animation_".concat(u.base,"_").concat(u.current)),i&&i(s),u.previous=a[r][0],h[r]=!0,r!==a.length&&(c.current+=a[r][1]),o&&o.afterEachStep&&o.afterEachStep(s),r++}o&&o.afterEachFrame&&o.afterEachFrame(s),n<c.total?window.requestAnimationFrame(t):(o&&o.after&&o.after(s),s.classList.remove("animation_in-progress"),s.classList.remove("animation_".concat(u.base,"_").concat(u.current)))})},Gingabulous.breakpoints={sm:0,md:40,lg:64,xl:75,xxl:90},Gingabulous.setBreakpoints=function(t){Gingabulous.breakpoints=t},Gingabulous.activeBreakpoint=function(){var t,e=function(t){var e=document.querySelector("html");return t/parseFloat(getComputedStyle(e)["font-size"])}(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),n=0;for(var i in Gingabulous.breakpoints)if({}.hasOwnProperty.call(Gingabulous.breakpoints,i)){if(n++,Gingabulous.breakpointArray.length===n)return i;if(e>Gingabulous.breakpoints[i]){t=i;continue}return t}},Gingabulous.breakpointArray=function(t){var e=[];for(var n in t)!{}.hasOwnProperty.call(t,n)||e.push(n);return e}(Gingabulous.breakpoints),function(){var t=function(){function i(t){_classCallCheck(this,i),this.moduleName=t}return _createClass(i,[{key:"_isDebugEnabled",value:function(){return!(!Gingabulous.debugConfig[this.moduleName]||!Gingabulous.debugConfig.globalDebug)}},{key:"_addSuffixToNumber",value:function(t){var e=t%10,n=t%100;return 1==e&&11!=n?t+"st":2==e&&12!=n?t+"nd":3==e&&13!=n?t+"rd":t+"th"}},{key:"_valueType",value:function(t){return _typeof(t)}},{key:"_outputValues",value:function(t){for(var e in t)Object.hasOwnProperty.call(t,e)&&console.log(e+" is: ",t[e]," ("+this.valueType(t[e])+")")}},{key:"_outputObjectParent",value:function(){console.log("%c "+this.objectName,"color: green")}},{key:"functionReturn",value:function(t,e){this._isDebugEnabled()&&(this._outputObjectParent(),"undefined"===e?console.log(t+" has been called. Function has no return"):console.log(t+" has been called. Returned: "+e))}},{key:"values",value:function(t,e){this._isDebugEnabled()&&(this._outputObjectParent(),console.log("%c Within "+t+":","color: purple"),this._outputValues(e))}},{key:"loop",value:function(t,e,n){if(this._isDebugEnabled())if(console.log("%c Within "+t+":","color: purple"),"number"==typeof e){var i=this._addSuffixToNumber(e+1);console.log(i+" iteration of for loop:"),this._outputValues(n)}else console.log("current key in forin: "+e),this._outputValues(n)}},{key:"message",value:function(t){this._isDebugEnabled()&&console.log("%c ".concat(t),"color: blue")}}],[{key:"moduleDebugValues",value:function(t){return Gingabulous.extend({},function(){var t={};for(var e in Gingabulous.modules)Object.hasOwnProperty.call(Gingabulous.modules,e)&&(t[Gingabulous.modules[e].name]=!1);return t}(),t)}},{key:"config",value:function(t,e){var n={globalDebug:t};Gingabulous.debugConfig=Gingabulous.extend({},n,i.moduleDebugValues(e))}}]),i}();Gingabulous.Debug=t}(),function(){var t=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.listener=e,this.callbacks=[],this.registered=!1}return _createClass(n,[{key:"_handler",value:function(){if(0<this.callbacks.length)for(var t=0;t<this.callbacks.length;t++)this.callbacks[t]()}},{key:"_registerEventListener",value:function(){var t=this;this.element.addEventListener(this.listener,function(){return t._handler()})}},{key:"registerCallback",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function, not a ".concat(_typeof(t)));this.callbacks.push(t),0<this.callbacks.length&&!this.registered&&(this._registerEventListener(),this.registered=!0)}}]),n}();Gingabulous.events={},Gingabulous.registerGlobalEventListener=function(t,e,n){n=t||n,void 0===Gingabulous.events[t]&&(Gingabulous.events[t]=new Gingabulous.EventListener(e,n))},Gingabulous.EventListener=t}(),Gingabulous.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t},Gingabulous.deepExtend=function t(e){e=e||{};for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&("object"===_typeof(i[s])?e[s]=t(e[s],i[s]):e[s]=i[s])}return e},function(){var t=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.options=Gingabulous.deepExtend(n.defaults(),e),this.xhr=new XMLHttpRequest,this.api,this.activeContent,this._init(),console.log(this)}return _createClass(n,[{key:"_init",value:function(){this._ajax()}},{key:"_traverseObject",value:function(t,e){for(var n=t.split("."),i=e,s=0;s<n.length;s++)i=i[n[s]];return i}},{key:"_loadAPI",value:function(){4===this.xhr.readyState&&(this.api=JSON.parse(this.xhr.responseText))}},{key:"_ajax",value:function(){var t=this;this.xhr.onreadystatechange=function(){return t._loadAPI()},this.xhr.open("GET",this.element.getAttribute(this.attr.api)),this.xhr.send()}},{key:"_injectContent",value:function(){for(var t=0;t<this.boundElements.length;t++){var e=this.boundElements[t].getAttribute(this.attr.bind);this.boundElements[t].innerHTML=this._traverseObject(e,this.activeContent)}}},{key:"updateContent",value:function(t){this.activeContent=this._traverseObject(t,this.api),this._injectContent()}},{key:"attr",get:function(){return{container:"".concat(this.options.dataAttr,"-container"),content:"".concat(this.options.dataAttr,"-content"),api:"".concat(this.options.dataAttr,"-api"),bind:"".concat(this.options.dataAttr,"-bind")}}},{key:"boundElements",get:function(){return this.element.querySelectorAll("[".concat(this.attr.bind,"]"))}}],[{key:"defaults",value:function(){return{dataAttr:"data-inject",onLoad:!0}}}]),n}();Gingabulous.Inject=t}(),function(){var t=function(){function e(t){_classCallCheck(this,e),this.element=t,this.valueString=t.getAttribute("data-responsive"),this.breakpoints=Gingabulous.breakpoints,this.breakpointArray=Gingabulous.breakpointArray,this.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this._setState(),this._onResize()}return _createClass(e,[{key:"_isAKey",value:function(t){for(var e in this.breakpoints)if(t===e)return!0;return!1}},{key:"_parseParam",value:function(t){var e=[];if(this._isAKey(t))return e.push(t),e;var n=t.split("-"),i=n[0];if("only"===n[1])return e.push(i),e;for(var s in this.breakpointArray)!{}.hasOwnProperty.call(this.breakpointArray,s)||("up"===n[1]&&this._indexOfQuery(n[0])<=s&&e.push(this.breakpointArray[s]),"down"===n[1]&&this._indexOfQuery(n[0])>=s&&e.push(this.breakpointArray[s]));return e}},{key:"_parseArray",value:function(t,e){var n=t,i=!1;for(var s in e)if({}.hasOwnProperty.call(e,s)){for(var o in i=!1,t)e[s]===t[o]&&(i=!0);i||n.push(e[s])}return n}},{key:"_indexOfQuery",value:function(t){for(var e in this.breakpointArray)if(this.breakpointArray[e]===t)return e}},{key:"_setState",value:function(){var t;t=this.queryValues[Gingabulous.activeBreakpoint()]?"active":"inactive",this.element.setAttribute("data-responsive-state",t)}},{key:"_onResize",value:function(){var t=this;Gingabulous.events.resize||Gingabulous.registerGlobalEventListener("resize",window),Gingabulous.events.resize.registerCallback(function(){return t._setState()})}},{key:"isActive",value:function(){return this.queryValues[Gingabulous.activeBreakpoint()]}},{key:"windowWidthWasResized",value:function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=!1;return t!==this.windowWidth&&(e=!0),this.windowWidth=t,e}},{key:"valuesArray",get:function(){return void 0===this.valueString||null===this.valueString?[]:this.valueString.split(" ")}},{key:"enabledQueries",get:function(){var t=[];if(this.valuesArray.length<=0)return this.breakpointArray;for(var e in this.valuesArray)if({}.hasOwnProperty.call(this.valuesArray,e)){var n=this._parseParam(this.valuesArray[e]);t=this._parseArray(t,n)}return t}},{key:"queryValues",get:function(){var t={};for(var e in this.breakpoints)if({}.hasOwnProperty.call(this.breakpoints,e))for(var n in t[e]=!1,this.enabledQueries)e===this.enabledQueries[n]&&(t[e]=!0);return t}}]),e}();Gingabulous.Responsive=t}(),function(){var t=function(){function t(){_classCallCheck(this,t),this.lastScrollPosition=0,this.lastScrollDirection=0,this.i=0,this.scrollingDirection=0,this._event()}return _createClass(t,[{key:"_update",value:function(){var t=window.pageYOffset||document.documentElement.scrollTop;t>this.lastScrollPosition?0!==this.lastScrollDirection&&(this.i+=1,10<=this.i&&(this.i=0,this.lastScrollDirection=0)):1!==this.lastScrollDirection&&(10<=this.i&&(this.i=0,this.lastScrollDirection=1),this.i+=1),this.lastScrollPosition=t}},{key:"_event",value:function(){var t=this;Gingabulous.events.scroll.registerCallback(function(){return t._update()})}},{key:"down",value:function(){return 0===this.lastScrollDirection}},{key:"up",value:function(){return 1===this.lastScrollDirection}}]),t}();Gingabulous.ScrollDirection=t}(),function(){var t=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.options=Gingabulous.deepExtend({},this.defaults,e),this.scrollDirection=new Gingabulous.ScrollDirection,this.content=document.querySelector(this.options.contentTarget)}return _createClass(n,[{key:"init",value:function(){this._setLayerHeight(),this._events()}},{key:"_setLayerHeight",value:function(){for(var t=this.element.querySelectorAll(".layer"),e=0;e<t.length;e++)t[e].style.height=this.calculatedLayerHeight}},{key:"_syncScrolling",value:function(){var t=window.pageYOffset||document.documentElement.scrollTop;!1===this.options.scrollRatio?this.element.scrollTop=t:this.element.scrollTop=t/this.options.scrollRatio}},{key:"_events",value:function(){var t=this;Gingabulous.events.scroll.registerCallback(function(){return t._syncScrolling()})}},{key:"defaults",get:function(){return{dataAttr:Gingabulous.modules.Background.dataAttr,contentTarget:".site-wrapper",scrollRatio:5}}},{key:"calculatedLayerHeight",get:function(){return!1===this.options.scrollRatio?this.content.offsetHeight:this.content.offsetHeight/3}}]),n}();Gingabulous.registerModule(t,"Background"),Gingabulous.registerGlobalEventListener("scroll",document)}(),function(){var t=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.options=Gingabulous.deepExtend({},n.defaults(),e),this.uid=Math.round(Math.pow(32,7)-Math.random()*Math.pow(32,6)).toString(),this.responsive=new Gingabulous.Responsive(t),this.animation=!!t.hasAttribute("data-animation")&&t.getAttribute("data-animation")}return _createClass(n,[{key:"init",value:function(){this._setUID(),this.responsive.isActive()?this._setState(this.options.defaultState):this._setState(this.options.inactiveState),this.animation&&null!==Gingabulous.animations[this.animation].setup&&Gingabulous.animations[this.animation].setup(this.element),this._events()}},{key:"_setUID",value:function(){this.element.setAttribute(this.attr.uid,this.uid),this.element.querySelector("[".concat(this.attr.open,"]")).setAttribute(this.attr.open,this.uid),this.element.querySelector("[".concat(this.attr.close,"]")).setAttribute(this.attr.close,this.uid)}},{key:"_setState",value:function(t){this.element.setAttribute(this.attr.expand,t)}},{key:"_onResize",value:function(){this.responsive.windowWidthWasResized()&&(this.responsive.isActive()&&this.element.getAttribute(this.attr.expand)!==this.options.defaultState&&this._setState(this.options.defaultState),this.responsive.isActive()||this.element.getAttribute(this.attr.expand)!==this.options.inactiveState&&this._setState(this.options.inactiveState))}},{key:"_eventMatches",value:function(n,t){var i=this,e=this.element.querySelector("[".concat(n,"]")),s=!1,o=!1;if(t.target.hasAttribute(n)&&t.target.getAttribute(n)===this.uid&&(s=!0),e.contains(t.target))if(t.target.path){for(var a=0;a<t.path.length;a++)if(t.path[a].hasAttribute(n)&&t.path[a].getAttribute(n)===this.uid){o=!0;break}}else!function t(e){e.hasAttribute(n)&&e.getAttribute(n)===i.uid?o=!0:t(e.parentNode)}(t.target);return s||o}},{key:"_events",value:function(){var e=this;Gingabulous.events.resize||Gingabulous.registerGlobalEventListener("resize",window),Gingabulous.events.resize.registerCallback(function(){return e._onResize()}),this.element.addEventListener("click",function(t){console.log(t),e.responsive.isActive()&&(e._eventMatches(e.attr.open,t)&&(e._setState(e.options.states.expanded),e.animation&&Gingabulous.animations[e.animation].animate(e.element)),e._eventMatches(e.attr.close,t)&&(e._setState(e.options.states.collapsed),e.animation&&Gingabulous.animations[e.animation].animate(e.element)))})}},{key:"classes",get:function(){return{expand:this.options.class}}},{key:"attr",get:function(){return{expand:this.options.dataAttr,uid:"".concat(this.options.dataAttr,"-uid"),open:"".concat(this.options.dataAttr,"-open"),close:"".concat(this.options.dataAttr,"-close"),content:"".concat(this.options.dataAttr,"-content")}}}],[{key:"defaults",value:function(){return{dataAttr:Gingabulous.modules.Expand.dataAttr,class:"expandable",type:"basic",defaultState:"collapsed",inactiveState:"inactive",states:{expanded:"expanded",collapsed:"collapsed"},animation:null}}}]),n}();Gingabulous.registerModule(t,"Expand")}(),function(){var e=function(){function n(t,e){_classCallCheck(this,n),this.element=t,this.origin=this._getOrigin(),this.position=this.origin,this.classes=e.classes,this._isDynamic()&&(this.inject=new Gingabulous.Inject(t)),this.scrollPosition=0,this.responsive=new Gingabulous.Responsive(t),this.debug=new Gingabulous.Debug("Pane"),this._init()}return _createClass(n,[{key:"_init",value:function(){this.element.classList.add(this.classes.frozen,this.classes.fixed),this.element.classList.add(this._getOrderClass(this.originClass))}},{key:"_isDynamic",value:function(){return!!this.element.hasAttribute("data-inject-api")}},{key:"_getOrigin",value:function(){return this.element.classList.contains("right")?[1,0]:this.element.classList.contains("above")?[0,-1]:this.element.classList.contains("below")?[0,1]:[-1,0]}},{key:"_getPositionClass",value:function(t){var e=[];return-1===t[1]&&e.push(this.classes.above),1===t[1]&&e.push(this.classes.below),-1===t[0]&&e.push(this.classes.left),1===t[0]&&e.push(this.classes.right),(0!==t[0]||0!==t[1])&&(2<=e.length?e.join("-"):e.toString())}},{key:"_getOrderClass",value:function(t){return"".concat(t||this.originClass,"-order")}},{key:"_storeScrollPosition",value:function(){this.scrollPosition=window.pageYOffset||document.documentElement.scrollTop,this.debug.message("stored: ".concat(this.scrollPosition))}},{key:"_restoreScrollPosition",value:function(t){t===window?t.scrollTo(0,this.scrollPosition):t.scrollTop=this.scrollPosition}},{key:"_setWindowScrollPosition",value:function(){document.documentElement.scrollTop=this.scrollPosition,document.body.scrollTop=this.scrollPosition}},{key:"_setScrollPositionWhenFixed",value:function(){this.element.scrollTop=this.scrollPosition}},{key:"activate",value:function(){this.position=[0,0],this.element.classList.remove(this.classes.frozen,this.classes.fixed),this.element.classList.remove(this._getOrderClass(this.originClass)),this.element.classList.add(this.classes.active),this._setWindowScrollPosition(),this.element.classList.remove(this.originClass)}},{key:"deactivate",value:function(){this._storeScrollPosition(),this.position=this.origin,this.element.classList.add(this.classes.frozen,this.classes.fixed,this._getOrderClass(this.originClass)),this.element.classList.remove(this.classes.active),this._setScrollPositionWhenFixed(),this.element.classList.add(this.originClass)}},{key:"retriveOrigin",value:function(){return Array.from(this.origin)}},{key:"updatePosition",value:function(t){this.position=t}},{key:"originClass",get:function(){return this._getPositionClass(this.retriveOrigin())}}]),n}(),t=function(){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"_init",value:function(){this.element.classList.add(this.classes.active)}},{key:"_oppositeCoordinantes",value:function(t){for(var e=t,n=0;n<e.length;n++)0!==e[n]&&(e[n]*=-1);return e}},{key:"activate",value:function(){var t=this._getPositionClass(this.position);this.position=[0,0],this.element.classList.remove(this.classes.frozen,this.classes.fixed,this._getOrderClass(t)),this.element.classList.add(this.classes.active),this._setWindowScrollPosition(),this.element.classList.remove(t)}},{key:"deactivate",value:function(t){this._storeScrollPosition(),this.position=this._oppositeCoordinantes(t);var e=this._getPositionClass(this.position);this.element.classList.add(this.classes.frozen,this.classes.fixed,this._getOrderClass(e)),this.element.classList.remove(this.classes.active),this._setScrollPositionWhenFixed(),this.element.classList.add(e)}}]),t}(),n=function(){function i(t,e){var n;return _classCallCheck(this,i),(n=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t,e))).inject=new Gingabulous.Inject(t),n}return _inherits(i,e),i}(),i=function(){function i(t,e){var n;return _classCallCheck(this,i),(n=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,t,e))).debug=new Gingabulous.Debug("CarouselPane"),n.carousel=n.element.querySelector("[data-carousel-panes]"),n.titleBar=n.element.querySelector(".pane-carousel-title-bar"),n._events(),n}return _inherits(i,e),_createClass(i,[{key:"_goToPane",value:function(t){var e;"left"===t&&(e="translateX(0)"),"center"===t&&(e=""),"right"===t&&(e="translateX(-200%)"),this.carousel.style.transform=e,this.titleBar.style.transform=e}},{key:"_events",value:function(){var n=this,i="data-panes-nav";this.element.addEventListener("click",function(t){if(t.target.hasAttribute(i)){var e=t.target.getAttribute(i);"left"===e&&(n._goToPane("left"),n.debug.message("left movement triggered")),"center"===e&&(n._goToPane("center"),n.debug.message("center movement triggered")),"right"===e&&(n._goToPane("right"),n.debug.message("right movement triggered"))}})}}]),i}();Gingabulous.registerModule(e,"Pane"),Gingabulous.registerModule(t,"HomePane"),Gingabulous.registerModule(n,"DynamicPane"),Gingabulous.registerModule(i,"CarouselPane")}(),function(){var t=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.element=t,this.options=Gingabulous.deepExtend({},this.defaults,e),this.classes=this.options.classes,this.state={active:"home",previous:!1},this.panes={}}return _createClass(n,[{key:"init",value:function(){this._registerPanes(),this._events()}},{key:"_updateState",value:function(t){this.state.active!==t&&(this.state.previous=this.state.active,this.state.active=t,this._updatePositions())}},{key:"_updatePositions",value:function(){"home"===this.state.previous?this.panes[this.state.previous].deactivate(this.panes[this.state.active].retriveOrigin()):this.panes[this.state.previous].deactivate(),this.panes[this.state.active].activate()}},{key:"_registerPanes",value:function(){for(var t=this.element.querySelectorAll(this.target.pane),e=0;e<t.length;e++){var n=t[e].getAttribute(this.attr.pane);""!==n&&"home"!==n&&(t[e].querySelector("[data-carousel-panes]")?this.panes[n]=new Gingabulous.CarouselPane(t[e],this.options):this.panes[n]=new Gingabulous.Pane(t[e],this.options)),"home"===n&&(this.panes[n]=new Gingabulous.HomePane(t[e],this.options))}}},{key:"_events",value:function(){var i=this;this.element.addEventListener("click",function(t){if(t.target.hasAttribute(i.attr.open)){var e=t.target.getAttribute(i.attr.open);if(i.panes[e].responsive.isActive()&&i._updateState(e),t.target.hasAttribute("data-inject")){var n=t.target.getAttribute("data-inject");i.panes[e].inject.updateContent(n)}}t.target.hasAttribute(i.attr.close)&&i._updateState("home")})}},{key:"defaults",get:function(){return{dataAttr:Gingabulous.modules.Panes.dataAttr,paneDataAttr:"data-pane",translateDistance:100,classes:{panes:"panes",pane:"pane",frozen:"frozen-pane",fixed:"fixed-pane",active:"active",left:"left",right:"right",above:"above",below:"below"}}}},{key:"attr",get:function(){return{parent:this.options.dataAttr,main:"".concat(this.options.paneDataAttr,"-home"),pane:this.options.paneDataAttr,open:"".concat(this.options.paneDataAttr,"-open"),close:"".concat(this.options.paneDataAttr,"-close")}}},{key:"target",get:function(){return{parent:"[".concat(this.options.dataAttr,"]"),main:"[".concat(this.options.paneDataAttr,"-home]"),pane:"[".concat(this.options.paneDataAttr,"]"),open:"[".concat(this.options.paneDataAttr,"-open]"),close:"[".concat(this.options.paneDataAttr,"-close]")}}}]),n}();Gingabulous.registerModule(t,"Panes")}(),Gingabulous.registerGlobalEventListener("resize",window),Gingabulous.Debug.config(!0,{Pane:!0,DynamicPane:!0,CarouselPane:!0}),Gingabulous.registerAnimation("expandingTabs",function(t){if(!t.querySelector(".animation_border-left")){var e=document.createElement("div"),n=t.querySelector(".titled-callout-heading");e.classList.add("animation_border-left"),t.insertBefore(e,n)}var i=document.querySelector(".site-inner main.content"),s=t.getAttribute("data-expand"),o="animation_expanding-tabs",a="".concat(o,"_expand"),r="".concat(o,"_collapse"),l=t.getBoundingClientRect().top;i.classList.add("animation_expanding-tabs_in-progress"),"expanded"===s&&(i.classList.add("animation_expanding-tabs_tab-active"),t.classList.remove("".concat(r,"_collapse-border_transition"),"".concat(r,"_collapse-border_animate")),t.classList.remove("".concat(r,"_shift-down_transition"),"".concat(r,"_shift-down_animate")),Gingabulous.animationSeries(t,"expanding-tabs_expand",{after:function(){i.classList.remove("animation_expanding-tabs_in-progress")}},["shift-up",600,function(t){t.style.transform="translate3d(0, -".concat(l-40,"px, 0)")}],["expand-border",400])),"collapsed"===s&&(t.classList.remove("".concat(a,"_shift-up_transition"),"".concat(a,"_shift-up_animate")),t.classList.remove("".concat(a,"_expand-border_transition"),"".concat(a,"_expand-border_animate")),Gingabulous.animationSeries(t,"expanding-tabs_collapse",{after:function(){i.classList.remove("animation_expanding-tabs_tab-active"),i.classList.remove("animation_expanding-tabs_in-progress")}},["collapse-border",400],["shift-down",600,function(t){t.style.transform=null}]))}),Gingabulous.registerAnimation("expandingCards",function(t){var e=t.getAttribute("data-expand"),n={borderLeft:t.querySelector(".border-left"),optionsBar:t.querySelector(".card-options-bar"),cover:t.querySelector(".card-cover"),bottomContainer:t.querySelector(".bottom-container")};"expanded"===e&&Gingabulous.animationSeries(t,"expanding-cards_expand",!1,["expanding",400,function(t){t.style.marginTop=0,t.style.marginBottom=0,n.borderLeft.style.height="".concat(t.offsetHeight-10,"px"),n.borderLeft.style.marginTop=null}]),"collapsed"===e&&Gingabulous.animationSeries(t,"expanding-cards_collapse",!1,["collapsing_pre-height",400,function(t){t.style.marginTop="-".concat(n.optionsBar.offsetHeight,"px"),t.style.marginBottom="-".concat(n.bottomContainer.offsetHeight,"px"),n.borderLeft.style.height="".concat(n.cover.offsetHeight,"px"),n.borderLeft.style.marginTop="".concat(n.optionsBar.offsetHeight,"px")}])},function(t){var e={borderLeft:t.querySelector(".border-left"),optionsBar:t.querySelector(".card-options-bar"),cover:t.querySelector(".card-cover"),bottomContainer:t.querySelector(".bottom-container")};t.style.marginTop="-".concat(e.optionsBar.offsetHeight,"px"),t.style.marginBottom="-".concat(e.bottomContainer.offsetHeight,"px"),e.borderLeft.style.height="".concat(e.cover.offsetHeight,"px"),e.borderLeft.style.marginTop="".concat(e.optionsBar.offsetHeight,"px")}),Gingabulous.animationSeries(document.querySelector(".loading-screen"),"loading-screen",{before:function(t){t.classList.remove(".loading")},after:function(t){t.classList.add("loading-complete")}},["in",200],["loading",600],["out",200]),function(){var t=document.querySelector(Gingabulous.modules.Panes.dataAttrTarget);new Gingabulous.Panes(t).init();var e=document.querySelector(Gingabulous.modules.Background.dataAttrTarget);new Gingabulous.Background(e).init();for(var n=document.querySelectorAll(Gingabulous.modules.Expand.dataAttrTarget),i=0;i<n.length;i++)new Gingabulous.Expand(n[i]).init()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUuanMiLCJ1dGlsLmFuaW1hdGUuanMiLCJ1dGlsLmJyZWFrcG9pbnRzLmpzIiwidXRpbC5kZWJ1Zy5qcyIsInV0aWwuZXZlbnQuanMiLCJ1dGlsLmV4dGVuZC5qcyIsInV0aWwuaW5qZWN0LmpzIiwidXRpbC5yZXNwb25zaXZlLmpzIiwidXRpbC5zY3JvbGxEaXJlY3Rpb24uanMiLCJtb2R1bGVzL2JhY2tncm91bmQuanMiLCJtb2R1bGVzL2V4cGFuZC5qcyIsIm1vZHVsZXMvcGFuZS5qcyIsIm1vZHVsZXMvcGFuZXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiR2luZ2FidWxvdXMiLCJtb2R1bGVzIiwiX2h5cGhlbmF0ZSIsInN0cmluZyIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsInJlZ2lzdGVyTW9kdWxlIiwibW9kdWxlIiwibmFtZSIsImRhdGFBdHRyTmFtZSIsImpxdWVyeSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwidGhpcyIsImRhdGFBdHRyIiwiY29uY2F0IiwiZGF0YUF0dHJUYXJnZXQiLCJ3aW5kb3ciLCJhbmltYXRpb25zIiwicmVnaXN0ZXJBbmltYXRpb24iLCJhbmltYXRpb25GdW5jIiwic2V0dXBGdW5jIiwiRXJyb3IiLCJzZXR1cCIsImFuaW1hdGUiLCJhbmltYXRpb25TZXJpZXMiLCJlbGVtZW50IiwiYmFzZUNTU0NsYXNzIiwiaG9va3MiLCJfbGVuIiwic3RlcHMiLCJBcnJheSIsIl9rZXkiLCJzdGVwSW5kZXgiLCJzdGFydCIsImNsYXNzZXMiLCJiYXNlIiwiY3VycmVudCIsInByZXZpb3VzIiwiZHVyYXRpb24iLCJwcmV2aW91c1N0ZXAiLCJ0b3RhbCIsInN0ZXBzRmlyZWQiLCJpIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJiZWZvcmUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhbmltYXRpb25TdGVwIiwidGltZXN0YW1wIiwicHJvZ3Jlc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJiZWZvcmVFYWNoRnJhbWUiLCJiZWZvcmVFYWNoU3RlcCIsImNhbGxiYWNrIiwicmVtb3ZlIiwiYWZ0ZXJFYWNoU3RlcCIsImFmdGVyRWFjaEZyYW1lIiwiYWZ0ZXIiLCJicmVha3BvaW50cyIsInNtIiwibWQiLCJsZyIsInhsIiwieHhsIiwic2V0QnJlYWtwb2ludHMiLCJhY3RpdmVCcmVha3BvaW50IiwicHJldmlvdXNLZXkiLCJ3aW5kb3dXaWR0aEluRW1zIiwicGl4ZWxzIiwiaHRtbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBhcnNlRmxvYXQiLCJnZXRDb21wdXRlZFN0eWxlIiwicGl4ZWxzVG9FbXMiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJib2R5Iiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYnJlYWtwb2ludEFycmF5IiwiRGVidWciLCJtb2R1bGVOYW1lIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2NyZWF0ZUNsYXNzIiwidmFsdWUiLCJkZWJ1Z0NvbmZpZyIsImdsb2JhbERlYnVnIiwibnVtYmVyIiwibGFzdERpZ2l0IiwibGFzdFR3b0RpZ2l0cyIsIl90eXBlb2YiLCJ2YWx1ZXMiLCJPYmplY3QiLCJ2YWx1ZVR5cGUiLCJvYmplY3ROYW1lIiwiZnVuY3Rpb25OYW1lIiwib3V0cHV0IiwiX2lzRGVidWdFbmFibGVkIiwiX291dHB1dE9iamVjdFBhcmVudCIsIl9vdXRwdXRWYWx1ZXMiLCJjdXJyZW50SXRlcmF0aW9uIiwiX2FkZFN1ZmZpeFRvTnVtYmVyIiwibWVzc2FnZSIsIm9wdGlvbnMiLCJleHRlbmQiLCJkZWZhdWx0cyIsImdsb2JhbEVuYWJsZSIsIm1vZHVsZXNFbmFibGUiLCJtb2R1bGVEZWJ1Z1ZhbHVlcyIsIkV2ZW50TGlzdGVuZXIiLCJsaXN0ZW5lciIsImNhbGxiYWNrcyIsInJlZ2lzdGVyZWQiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlciIsIlR5cGVFcnJvciIsIl9yZWdpc3RlckV2ZW50TGlzdGVuZXIiLCJldmVudHMiLCJyZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIiLCJvdXQiLCJkZWVwRXh0ZW5kIiwib2JqIiwiSW5qZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJhcGkiLCJhY3RpdmVDb250ZW50IiwiX2luaXQiLCJfYWpheCIsImNoYWluIiwib2JqZWN0Iiwia2V5cyIsInNwbGl0IiwicmVhZHlTdGF0ZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIl9sb2FkQVBJIiwib3BlbiIsImdldEF0dHJpYnV0ZSIsImF0dHIiLCJzZW5kIiwiYm91bmRFbGVtZW50cyIsImJpbmQiLCJpbm5lckhUTUwiLCJfdHJhdmVyc2VPYmplY3QiLCJfaW5qZWN0Q29udGVudCIsImdldCIsImNvbnRhaW5lciIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwib25Mb2FkIiwiUmVzcG9uc2l2ZSIsInZhbHVlU3RyaW5nIiwid2luZG93V2lkdGgiLCJfc2V0U3RhdGUiLCJfb25SZXNpemUiLCJrZXlUb0NoZWNrIiwicGFyYW0iLCJfaXNBS2V5Iiwic3BsaXRQYXJhbSIsInF1ZXJ5IiwiaW5kZXgiLCJfaW5kZXhPZlF1ZXJ5Iiwib2xkQXJyYXkiLCJuZXdBcnJheSIsImlzSW5PbGRBcnJheSIsIm5JbmRleCIsIm9JbmRleCIsInN0YXRlIiwicXVlcnlWYWx1ZXMiLCJzZXRBdHRyaWJ1dGUiLCJyZXNpemUiLCJyZWdpc3RlckNhbGxiYWNrIiwiY3VycmVudFdpbmRvd1dpZHRoIiwidmFsdWVzQXJyYXkiLCJwYXJzZWRWYWx1ZSIsIl9wYXJzZVBhcmFtIiwiX3BhcnNlQXJyYXkiLCJlbmFibGVkUXVlcmllcyIsIlNjcm9sbERpcmVjdGlvbiIsImxhc3RTY3JvbGxQb3NpdGlvbiIsImxhc3RTY3JvbGxEaXJlY3Rpb24iLCJzY3JvbGxpbmdEaXJlY3Rpb24iLCJfZXZlbnQiLCJjdXJyZW50U2Nyb2xsUG9zaXRpb24iLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsInNjcm9sbCIsIl91cGRhdGUiLCJCYWNrZ3JvdW5kIiwic2Nyb2xsRGlyZWN0aW9uIiwiY29udGVudFRhcmdldCIsIl9zZXRMYXllckhlaWdodCIsIl9ldmVudHMiLCJsYXllcnMiLCJzdHlsZSIsImhlaWdodCIsImNhbGN1bGF0ZWRMYXllckhlaWdodCIsInNjcm9sbFJhdGlvIiwiX3N5bmNTY3JvbGxpbmciLCJvZmZzZXRIZWlnaHQiLCJFeHBhbmQiLCJ1aWQiLCJNYXRoIiwicm91bmQiLCJwb3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsInJlc3BvbnNpdmUiLCJhbmltYXRpb24iLCJoYXNBdHRyaWJ1dGUiLCJfc2V0VUlEIiwiaXNBY3RpdmUiLCJkZWZhdWx0U3RhdGUiLCJpbmFjdGl2ZVN0YXRlIiwiY2xvc2UiLCJleHBhbmQiLCJ3aW5kb3dXaWR0aFdhc1Jlc2l6ZWQiLCJldmVudCIsImNvbmRpdGlvbk9uZSIsImNvbmRpdGlvblR3byIsInRhcmdldCIsImNvbnRhaW5zIiwicGF0aCIsImZpbmRFbGVtZW50V2l0aERhdGFBdHRyIiwiX2VsZW1lbnQiLCJwYXJlbnROb2RlIiwiX3RoaXMyIiwiX2V2ZW50TWF0Y2hlcyIsInN0YXRlcyIsImV4cGFuZGVkIiwiY29sbGFwc2VkIiwiY2xhc3MiLCJ0eXBlIiwiUGFuZSIsImluaGVyaXRlZE9wdGlvbnMiLCJvcmlnaW4iLCJfZ2V0T3JpZ2luIiwicG9zaXRpb24iLCJfaXNEeW5hbWljIiwiaW5qZWN0Iiwic2Nyb2xsUG9zaXRpb24iLCJkZWJ1ZyIsImZyb3plbiIsImZpeGVkIiwiX2dldE9yZGVyQ2xhc3MiLCJvcmlnaW5DbGFzcyIsImNvb3JkaW5hdGVzIiwiY3NzQ2xhc3MiLCJhYm92ZSIsImJlbG93IiwibGVmdCIsInJpZ2h0Iiwiam9pbiIsInBvc2l0aW9uQ2xhc3MiLCJzY3JvbGxUbyIsImFjdGl2ZSIsIl9zZXRXaW5kb3dTY3JvbGxQb3NpdGlvbiIsIl9zdG9yZVNjcm9sbFBvc2l0aW9uIiwiX3NldFNjcm9sbFBvc2l0aW9uV2hlbkZpeGVkIiwiZnJvbSIsIl9nZXRQb3NpdGlvbkNsYXNzIiwicmV0cml2ZU9yaWdpbiIsIkhvbWVQYW5lIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfZ2V0UHJvdG90eXBlT2YiLCJhcHBseSIsIl9pbmhlcml0cyIsIm9yaWdpbk9mQWN0aXZlUGFuZSIsIl9vcHBvc2l0ZUNvb3JkaW5hbnRlcyIsIkR5bmFtaWNQYW5lIiwiQ2Fyb3VzZWxQYW5lIiwiY2Fyb3VzZWwiLCJ0aXRsZUJhciIsInBhbmUiLCJ0cmFuc2xhdGUiLCJ0cmFuc2Zvcm0iLCJfdGhpczMiLCJhdHRyVmFsdWUiLCJfZ29Ub1BhbmUiLCJQYW5lcyIsInBhbmVzIiwiX3JlZ2lzdGVyUGFuZXMiLCJpZCIsIl91cGRhdGVQb3NpdGlvbnMiLCJkZWFjdGl2YXRlIiwiYWN0aXZhdGUiLCJwYW5lc0luRG9jdW1lbnQiLCJfdXBkYXRlU3RhdGUiLCJ1cGRhdGVDb250ZW50IiwicGFuZURhdGFBdHRyIiwidHJhbnNsYXRlRGlzdGFuY2UiLCJwYXJlbnQiLCJtYWluIiwiY29uZmlnIiwiYm9yZGVyIiwiY3JlYXRlRWxlbWVudCIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJ3cmFwcGVyRWxlbWVudCIsImFuaW1hdGlvbkNsYXNzIiwiZXhwYW5kQmFzZSIsImNvbGxhcHNlQmFzZSIsInBvc2l0aW9uVG9wIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiY2hpbGROb2RlcyIsImJvcmRlckxlZnQiLCJvcHRpb25zQmFyIiwiY292ZXIiLCJib3R0b21Db250YWluZXIiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJwYW5lc05vZGUiLCJpbml0IiwiYmFja2dyb3VuZE5vZGUiLCJleHBhbmRhYmxlTm9kZXMiXSwibWFwcGluZ3MiOiJrcUtBRUMsV0FDRCxJQUFJQSxFQUFjLENBQ2hCQyxRQUFTLEdBeUJUQyxXQUFZLFNBQVNDLEdBQ25CLE9BQU9BLEVBQU9DLFFBQVEsa0JBQW1CLFNB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TCxFQUFRa0wsTUFBTXFILGFBQWQsSUFBQWxULE9BQWlDNFMsRUFBV0ksZ0JBQWdCOUcsYUFBNUQsTUFFQTBHLEVBQVdDLFdBQVdoSCxNQUFNQyxPQUE1QixHQUFBOUwsT0FBd0M0UyxFQUFXRyxNQUFNN0csYUFBekQsTUFDQTBHLEVBQVdDLFdBQVdoSCxNQUFNb0gsVUFBNUIsR0FBQWpULE9BQTJDNFMsRUFBV0UsV0FBVzVHLGFBQWpFLFFBR0ZwTixZQUFZNEIsZ0JBQ1ZnRCxTQUFTQyxjQUFjLG1CQUN2QixpQkFDQSxDQUNFM0IsT0FBUSxTQUFDckIsR0FDUEEsRUFBUTBCLFVBQVVLLE9BQU8sYUFFM0JHLE1BQU8sU0FBQ2xDLEdBQ05BLEVBQVEwQixVQUFVQyxJQUFJLHNCQUcxQixDQUNFLEtBQ0EsS0FFRixDQUNFLFVBQ0EsS0FFRixDQUNFLE1BQ0EsTUF0TkosV0FDRSxJQUFJNlEsRUFBWXpQLFNBQVNDLGNBQWM3RSxZQUFZQyxRQUFRbVMsTUFBTWpSLGdCQUNyRCxJQUFJbkIsWUFBWW9TLE1BQU1pQyxHQUM1QkMsT0FFTixJQUFJQyxFQUFpQjNQLFNBQVNDLGNBQWM3RSxZQUFZQyxRQUFRd00sV0FBV3RMLGdCQUMxRCxJQUFJbkIsWUFBWXlNLFdBQVc4SCxHQUNqQ0QsT0FVWCxJQURBLElBQUlFLEVBQWtCNVAsU0FBU3FGLGlCQUFpQmpLLFlBQVlDLFFBQVFvTixPQUFPbE0sZ0JBQ2xFMkIsRUFBSSxFQUFHQSxFQUFJMFIsRUFBZ0I1VCxPQUFRa0MsSUFDN0IsSUFBSTlDLFlBQVlxTixPQUFPbUgsRUFBZ0IxUixJQUM3Q3dSLE9BdU1YQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gJ3VzZSBzdHJpY3QnO1xuXG4hZnVuY3Rpb24oKSB7XG52YXIgR2luZ2FidWxvdXMgPSB7XG4gIG1vZHVsZXM6IHt9LFxuXG4gIC8vIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAvLyAgIGZvciAobGV0IG1vZHVsZSBpbiB0aGlzLm1vZHVsZXMpIHtcbiAgLy8gICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMubW9kdWxlcywgbW9kdWxlKSkge1xuICAvLyAgICAgICBpZiAobW9kdWxlKVxuICAvLyAgICAgICAkKG1vZHVsZS5kYXRhQXR0cikuZWFjaCh0aGlzLl9pbml0SW5zdGFuY2UobW9kdWxlKSk7XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyB9LFxuICAvLyBfaW5pdEluc3RhbmNlOiBmdW5jdGlvbihtb2R1bGUpIHtcbiAgLy8gICBbbW9kdWxlLm5hbWVdID0gbmV3IHRoaXNbbW9kdWxlLm5hbWVdKCk7XG4gIC8vIH0sXG4gIC8qKlxuICAgKiBDb3ZlcnQgQ2FtYWxDYXNlIHRvIGh5cGhlbmF0ZWQgc3RyaW5nLlxuICAgKiBAbWV0aG9kIF9oeXBoZW5hdGVcbiAgICpcbiAgICogRm91bmQgaW4gRm91bmRhdGlvbiBmb3IgU2l0ZXMgY29yZSBmaWxlLiBMaW5rIHRvIHRoYXQgZmlsZSwgYW5kIHRoZSBsaW5rIHRoZXkgaGF2ZVxuICAgKiBhcyB0aGUgc291cmNlIGZvciB0aGUgc29sdXRpb24uXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS96dXJiL2ZvdW5kYXRpb24tc2l0ZXMvYmxvYi9kZXZlbG9wL2pzL2ZvdW5kYXRpb24uY29yZS5qc1xuICAgKiBAbGluayBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS84OTU1NTgwXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gICBzdHJpbmcgLSBTdHJpbmcgdG8gcGFyc2UgYW5kIGNvdmVydC5cbiAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAtIGh5cGhlbmF0ZWQgc3RyaW5nLlxuICAgKi9cbiAgX2h5cGhlbmF0ZTogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xuICB9LFxuICAvLyBfZ2V0RGF0YUF0dHI6IGZ1bmN0aW9uKGRhdGFBdHRyTmFtZSkge1xuICAvLyAgIHJldHVybiBgZGF0YS0ke2RhdGFBdHRyTmFtZX1gO1xuICAvLyB9LFxuICByZWdpc3Rlck1vZHVsZTogZnVuY3Rpb24obW9kdWxlLCBuYW1lLCBkYXRhQXR0ck5hbWUsIGpxdWVyeSA9IGZhbHNlKSB7XG4gICAgbmFtZSA9IG5hbWUgfHwgbW9kdWxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIC8vIElmIG5vIHZhbHVlIGZvciBgZGF0YUF0dHJOYW1lYCBpcyBwYXNzZWQsIHRoZW4gYXNzaWduIGBuYW1lYCB0byB0aGUgdmFsdWUuXG4gICAgZGF0YUF0dHJOYW1lID0gZGF0YUF0dHJOYW1lIHx8IHRoaXMuX2h5cGhlbmF0ZShuYW1lKTtcbiAgICAvLyBBZGQgdGhlIG1vZHVsZSB0byB0aGUgYG1vZHVsZXNgIG9iamVjdC5cbiAgICB0aGlzLm1vZHVsZXNbbmFtZV0gPSB7XG4gICAgICBuYW1lOiAgICAgICAgICAgbmFtZSxcbiAgICAgIGRhdGFBdHRyOiAgICAgICBgZGF0YS0ke2RhdGFBdHRyTmFtZX1gLFxuICAgICAgZGF0YUF0dHJUYXJnZXQ6IGBbZGF0YS0ke2RhdGFBdHRyTmFtZX1dYCxcbiAgICAgIGpxdWVyeTogICAgICAgICBqcXVlcnlcbiAgICB9O1xuICAgIHRoaXNbbmFtZV0gPSBtb2R1bGU7XG4gIH1cbiAgLy8gVE9ETyBUdXJuIHRoaXMgaW50byBhIHJlZ2lzdHJhdGlvbiBvZiBhIG5hbWVzcGFjZSBmb3IgYSBncm91cCBvZiBtb2R1bGVzLlxuICAvLyByZWdpc3Rlck5hbWVzcGFjZWRNb2R1bGU6IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQpIHtcbiAgLy8gICAvLyBsZXQgcGFyZW50TmFtZSA9IHBhcmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IubmFtZTtcbiAgLy8gICBsZXQgY2hpbGROYW1lID0gY2hpbGQucHJvdG90eXBlLmNvbnN0cnVjdG9yLm5hbWU7XG4gIC8vXG4gIC8vICAgLy8gTWFrZSBzdXJlIHRoZSBwYXJlbnQgbW9kdWxlIGV4aXN0cy5cbiAgLy8gICBpZiAodGhpc1twYXJlbnRdICE9PSB1bmRlZmluZWQpIHtcbiAgLy8gICAgIC8vIE1ha2Ugc3VyZSB0aGUgY2hpbGQgbW9kdWxlIGlzbid0IGluZnJpbmdpbmcgb24gYW5vdGhlciBjaGlsZCdzIG5hbWVzcGFjZS5cbiAgLy8gICAgIGlmICh0aGlzW3BhcmVudF1bY2hpbGROYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gIC8vICAgICAgIHRoaXNbcGFyZW50XVtjaGlsZE5hbWVdID0gY2hpbGQ7XG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFscmVhZHkgYSBjaGlsZCBtb2R1bGUgY2FsbGVkICR7Y2hpbGROYW1lfWApO1xuICAvLyAgICAgfVxuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cGFyZW50fSBtb2R1bGUgZG9lcyBub3QgZXhpc3RgKTtcbiAgLy8gICB9XG4gIC8vIH1cbn07XG5cbi8vIEdpbmdhYnVsb3VzLnJlZ2lzdGVyR2xvYmFsRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgd2luZG93KTtcblxud2luZG93LkdpbmdhYnVsb3VzID0gR2luZ2FidWxvdXM7XG59KCk7XG4iLCIhZnVuY3Rpb24oKSB7XG4vLyBjb25zdCBhbmltYXRpb25TdGVwID0gKHRpbWVzdGFtcCwgc3RhcnQpID0+IHtcbi8vICAgc3RhcnQgPSBzdGFydCA/IHN0YXJ0IDogdGltZXN0YW1wO1xuLy8gICBsZXQgcHJvZ3Jlc3MgPSB0aW1lc3RhbXAgLSBzdGFydDtcbi8vXG4vLyAgIGlmIChwcm9ncmVzcyA9PT0gZHVyYXRpb24pXG4vLyB9O1xuXG5jb25zdCBhbmltYXRpb25TZXJpZXMgPSAoZWxlbWVudCwgYmFzZUNTU0NsYXNzLCBob29rcywgLi4uc3RlcHMpID0+IHtcbiAgbGV0IHN0ZXBJbmRleCA9IDA7XG4gIGxldCBzdGFydCA9IG51bGw7XG4gIGxldCBzdGVwU3RhcnQgPSBudWxsO1xuICBsZXQgY2xhc3NlcyA9IHtcbiAgICBiYXNlOiAgICAgYmFzZUNTU0NsYXNzLFxuICAgIGN1cnJlbnQ6ICBudWxsLFxuICAgIHByZXZpb3VzOiBudWxsXG4gIH07XG4gIGxldCBkdXJhdGlvbiA9IHtcbiAgICBjdXJyZW50OiAgICAgIDAsXG4gICAgcHJldmlvdXNTdGVwOiBudWxsLFxuICAgIHRvdGFsOiAgICAgICAgMFxuICB9O1xuICBsZXQgc3RlcHNGaXJlZCA9IFtdO1xuXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgc3RlcHMgYW5kIHB1dCB0b2dldGhlciB3aGF0ZXZlciB2YWx1ZXMgbWF5IGJlIG5lZWRlZC5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwcy5sZW5ndGg7IGkrKykge1xuICAgIC8vIEdldCB0b3RhbCBkdXJhdGlvblxuICAgIGR1cmF0aW9uLnRvdGFsICs9IHN0ZXBzW2ldWzFdO1xuXG4gICAgc3RlcHNGaXJlZC5wdXNoKGZhbHNlKTtcbiAgfVxuICBjb25zb2xlLmxvZyhkdXJhdGlvbi50b3RhbCk7XG5cbiAgLy8gQW5pYW10aW9uIFN0ZXBcbiAgZnVuY3Rpb24gYW5pbWF0aW9uU3RlcCh0aW1lc3RhbXApIHtcbiAgICBzdGFydCA9IHN0YXJ0ID8gc3RhcnQgOiB0aW1lc3RhbXA7XG4gICAgc3RlcFN0YXJ0ID0gc3RlcFN0YXJ0ID8gc3RlcFN0YXJ0IDogdGltZXN0YW1wO1xuICAgIC8vIGxldCBzdGVwUHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKHRpbWVzdGFtcCAtIHN0ZXBTdGFydCk7XG4gICAgbGV0IHByb2dyZXNzID0gdGltZXN0YW1wIC0gc3RhcnQ7XG4gICAgLy8gU2V0IGluIHByZ3Jlc3NcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGlvbl9pbi1wcm9ncmVzcycpO1xuXG4gICAgLy8gSE9PSzogQmVmb3JlIEVhY2ggRnJhbWVcbiAgICBpZiAoaG9va3MgJiYgaG9va3MuYmVmb3JlRWFjaEZyYW1lKSB7XG4gICAgICBob29rcy5iZWZvcmVFYWNoRnJhbWUoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgLy8gU2VjcmV0IGxvb3AgaGlkaW5nIGluIHRoZSBsb29wIHRoYXQgaXMgaXRzZWxmIHRoZSBzYW1lIGxvb3AuXG4gICAgLy9cbiAgICAvLyBMb29wY2VwdGlvblxuICAgIC8vXG4gICAgLy8gV3JpdHRlbiBhbmQgZGlyZWN0ZWQgYnkgQ2hyaXN0b3BoZXIgTm9sYW5cbiAgICBpZiAocHJvZ3Jlc3MgPj0gZHVyYXRpb24uY3VycmVudCAmJiBzdGVwc0ZpcmVkW3N0ZXBJbmRleF0gPT09IGZhbHNlKSB7XG4gICAgICAvLyBIT09LOiBCZWZvcmUgRWFjaCBTdGVwXG4gICAgICBpZiAoaG9va3MgJiYgaG9va3MuYmVmb3JlRWFjaFN0ZXApIHtcbiAgICAgICAgaG9va3MuYmVmb3JlRWFjaFN0ZXAoZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBjYWxsYmFjayA9IHN0ZXBzW3N0ZXBJbmRleF1bMl0gfHwgZmFsc2U7XG4gICAgICBjbGFzc2VzLmN1cnJlbnQgPSBzdGVwc1tzdGVwSW5kZXhdWzBdO1xuICAgICAgLy8gUmVtb3ZlIGNsYXNzZXMgaWYgcHJldmlvdXMgb25lcyBleGlzdFxuICAgICAgaWYgKGNsYXNzZXMucHJldmlvdXMpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGBhbmltYXRpb25fJHtjbGFzc2VzLmJhc2V9XyR7Y2xhc3Nlcy5wcmV2aW91c31gKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGNsYXNzZXMgZm9yIHRoaXMgYW5pbWF0aW9uIHN0ZXBcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChgYW5pbWF0aW9uXyR7Y2xhc3Nlcy5iYXNlfV8ke2NsYXNzZXMuY3VycmVudH1gKTtcblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgLy8gU2V0IHByZXZpb3VzIHByb3BlcnRpZXMgZm9yIHRoZSBuZXh0IHN0ZXAgdG8gdXNlXG4gICAgICBjbGFzc2VzLnByZXZpb3VzID0gc3RlcHNbc3RlcEluZGV4XVswXTtcbiAgICAgIC8vIFRoZSBzdGVwIGhhcyBiZWVuIGZpcmVkXG4gICAgICBzdGVwc0ZpcmVkW3N0ZXBJbmRleF0gPSB0cnVlO1xuICAgICAgLy8gb25seSBhZGQgdG8gdGhlIGR1cnJhdGlvbiBhcyBsb25nIGFzIGl0IGlzbnQgdGhlIGxhc3Qgc3RlcC5cbiAgICAgIGlmIChzdGVwSW5kZXggIT09IHN0ZXBzLmxlbmd0aCkge1xuICAgICAgICBkdXJhdGlvbi5jdXJyZW50ICs9IHN0ZXBzW3N0ZXBJbmRleF1bMV07XG4gICAgICB9XG4gICAgICBpZiAoaG9va3MgJiYgaG9va3MuYWZ0ZXJFYWNoU3RlcCkge1xuICAgICAgICBob29rcy5hZnRlckVhY2hTdGVwKGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgLy8gVXAgdGhlIHN0ZXAgaW5kZXhcbiAgICAgIHN0ZXBJbmRleCsrO1xuICAgIH1cblxuICAgIC8vIEhPT0s6IGFmdGVyRWFjaEZyYW1lXG4gICAgaWYgKGhvb2tzICYmIGhvb2tzLmFmdGVyRWFjaEZyYW1lKSB7XG4gICAgICBob29rcy5hZnRlckVhY2hGcmFtZShlbGVtZW50KTtcbiAgICB9XG4gICAgLy8gSW52b2tlIHRoZSBuZXh0IGZyYW1lIGFzIGxvbmcgYXMgdGhlIHRvdGFsIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gc2VyaWVzXG4gICAgLy8gaGFzbid0IGJlZW4gZXhjZWRlZC5cbiAgICBpZiAocHJvZ3Jlc3MgPCBkdXJhdGlvbi50b3RhbCkge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb25TdGVwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSE9PSzogYWZ0ZXJcbiAgICAgIGlmIChob29rcyAmJiBob29rcy5hZnRlcikge1xuICAgICAgICBob29rcy5hZnRlcihlbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uX2luLXByb2dyZXNzJyk7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYGFuaW1hdGlvbl8ke2NsYXNzZXMuYmFzZX1fJHtjbGFzc2VzLmN1cnJlbnR9YCk7XG4gICAgfVxuICB9XG4gIC8vIEhPT0s6IEJlZm9yZVxuICBpZiAoaG9va3MgJiYgaG9va3MuYmVmb3JlKSB7XG4gICAgaG9va3MuYmVmb3JlKGVsZW1lbnQpO1xuICB9XG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uU3RlcCk7XG59O1xuXG5jb25zdCByZWdpc3RlckFuaW1hdGlvbiA9IChuYW1lLCBhbmltYXRpb25GdW5jLCBzZXR1cEZ1bmMgPSBudWxsKSA9PiB7XG4gIGlmIChHaW5nYWJ1bG91cy5hbmltYXRpb25zW25hbWVdKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1lBIERVTiBGVUNLRUQgVVAgQklUQ0gsIFRIRU1TIE5BTUVTIElTIFJFU0VWUkVELiBSRUFEIFRIRSBTSUdOIERVTU1ZLidcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIEdpbmdhYnVsb3VzLmFuaW1hdGlvbnNbbmFtZV0gPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRvIGJlIGZpcmVkIGluIGEgbW9kdWxlIGluaXQgbWV0aG9kIGZvciBhbnkgc2V0dXAgdGhhdCBtYXkgbmVlZCB0byBiZSBkb25lIGluIEpTXG4gICAgICAgKiB0byBtYWtlIHRoZSBhbmltYXRpb24gd29yayBwcm9wZXJseS5cbiAgICAgICAqIEB0eXBlIHtGdW5jdGlvbnxudWxsfVxuICAgICAgICovXG4gICAgICBzZXR1cDogICBzZXR1cEZ1bmMsXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgc3RhdGUgY2hhbmdlIGFuaW1hdGlvbnMuXG4gICAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICAgKi9cbiAgICAgIGFuaW1hdGU6IGFuaW1hdGlvbkZ1bmNcbiAgICB9O1xuICB9XG59O1xuXG5HaW5nYWJ1bG91cy5hbmltYXRpb25zID0ge307XG5HaW5nYWJ1bG91cy5yZWdpc3RlckFuaW1hdGlvbiA9IHJlZ2lzdGVyQW5pbWF0aW9uO1xuR2luZ2FidWxvdXMuYW5pbWF0aW9uU2VyaWVzID0gYW5pbWF0aW9uU2VyaWVzO1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuLyoqXG4gKiBEZWZhdWx0IGJyZWFrcG9pbnQgdmFsdWVzIGluIGVtc1xuICogQHR5cGUge09iamVjdH1cbiAqL1xuR2luZ2FidWxvdXMuYnJlYWtwb2ludHMgPSB7XG4gIHNtOiAgMCxcbiAgbWQ6ICA0MCxcbiAgbGc6ICA2NCxcbiAgeGw6ICA3NSxcbiAgeHhsOiA5MFxufTtcblxuLyoqXG4gKiBUaGlzIGFsbG93cyBmb3IgdGhlIG92ZXJ3cml0aW5nIG9mIHRoZSBkZWZhdWx0IGJyZWFrcG9pbnRzLiBDYWxsIHRoaXMgaW4geW91ciBtYWluXG4gKiBhcHAvaW5kZXggZmlsZSwgYmVmb3JlIHlvdSBjYWxsIGFueSBvdGhlciBmdW5jdGlvbi5cbiAqIEBtZXRob2RcbiAqIEBwYXJhbSAge09iamVjdH0gYnJlYWtwb2ludHMgLSBBbiBvYmplY3Qgb2Yga2V5cyB0aGF0IGFyZSB0aGUgbmFtZXMgb2YgdGhlIGJyZWFrcG9pbnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgdmFsdWVzIHRoYXQgYXJlIHRoZSBicmVha3BvaW50IGluIGVtcy5cbiAqL1xuR2luZ2FidWxvdXMuc2V0QnJlYWtwb2ludHMgPSBmdW5jdGlvbihicmVha3BvaW50cykge1xuICBHaW5nYWJ1bG91cy5icmVha3BvaW50cyA9IGJyZWFrcG9pbnRzO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBwaXhlbCB2YWx1ZXMgdG8gZW0gdmFsdWVzIGJhc2VkIG9uIHRoZSBgaHRtbGAgbGV2ZWwgYGZvbnQtc2l6ZWAuXG4gKiBAbWV0aG9kIHBpeGVsc1RvRW1zXG4gKiBAcGFyYW0gIHtOdW1iZXJ8U3RyaW5nfSAgICBwaXhlbHMgLSBwaXhlbCB2YWx1ZSB0byBiZSBjb252ZXJ0ZWQgdG8gZW1zLlxuICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICAgICAgICAgIC0gdmFsdWUgaW4gZW1zLlxuICovXG5mdW5jdGlvbiBwaXhlbHNUb0VtcyhwaXhlbHMpIHtcbiAgbGV0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gIHJldHVybiBwaXhlbHMgLyBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoaHRtbClbJ2ZvbnQtc2l6ZSddKTtcbn1cblxuZnVuY3Rpb24gYnJlYWtwb2ludEFycmF5KGJyZWFrcG9pbnRzKSB7XG4gIGxldCBicmVha3BvaW50QXJyYXkgPSBbXTtcbiAgZm9yIChsZXQga2V5IGluIGJyZWFrcG9pbnRzKSB7XG4gICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoYnJlYWtwb2ludHMsIGtleSkpIHtcbiAgICAgIGJyZWFrcG9pbnRBcnJheS5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBicmVha3BvaW50QXJyYXk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBhY3RpdmUgYnJlYWtwb2ludCBhcyBhIHN0cmluZy4gVGhlIHZhbHVlIGlzIHRoZSBzYW1lIGFzXG4gKiB0aGUga2V5cyB1c2VkIGluIHRoZSBicmVha3BvaW50cyBvYmplY3QuXG4gKiBAbWV0aG9kIGFjdGl2ZUJyZWFrcG9pbnRcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBicmVha3BvaW50LlxuICovXG5mdW5jdGlvbiBhY3RpdmVCcmVha3BvaW50KCkge1xuICBsZXQgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fFxuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHxcbiAgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcbiAgbGV0IHdpbmRvd1dpZHRoSW5FbXMgPSBwaXhlbHNUb0Vtcyh3aW5kb3dXaWR0aCk7XG4gIC8vIGNvbnNvbGUubG9nKHdpbmRvd1dpZHRoLCB3aW5kb3dXaWR0aEluRW1zKTtcblxuICBsZXQgcHJldmlvdXNLZXk7XG4gIGxldCBpID0gMDtcbiAgZm9yIChsZXQga2V5IGluIEdpbmdhYnVsb3VzLmJyZWFrcG9pbnRzKSB7XG4gICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoR2luZ2FidWxvdXMuYnJlYWtwb2ludHMsIGtleSkpIHtcbiAgICAgIC8vIFRoaXMgZml4ZXMgdGhlIGJ1ZyB3aGVyZSB0aGUgZmluYWwgYnJlYWtwb2ludCBpc250IGhvbm9yZWQuXG4gICAgICBpKys7XG4gICAgICAvLyBjb25zb2xlLmxvZyhpKTtcbiAgICAgIGlmIChHaW5nYWJ1bG91cy5icmVha3BvaW50QXJyYXkubGVuZ3RoID09PSBpKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgICB9XG4gICAgICBpZiAod2luZG93V2lkdGhJbkVtcyA+IEdpbmdhYnVsb3VzLmJyZWFrcG9pbnRzW2tleV0pIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2xvb3AgY29udGludWVkJyk7XG4gICAgICAgIHByZXZpb3VzS2V5ID0ga2V5O1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHByZXZpb3VzS2V5KTtcbiAgICAgICAgLy8gUmVzZXQgaW5kZXggb2YgbG9vcC5cbiAgICAgICAgcmV0dXJuIHByZXZpb3VzS2V5O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5HaW5nYWJ1bG91cy5hY3RpdmVCcmVha3BvaW50ID0gYWN0aXZlQnJlYWtwb2ludDtcbkdpbmdhYnVsb3VzLmJyZWFrcG9pbnRBcnJheSA9IGJyZWFrcG9pbnRBcnJheShHaW5nYWJ1bG91cy5icmVha3BvaW50cyk7XG59KCk7XG4iLCIhZnVuY3Rpb24oKSB7XG5jbGFzcyBEZWJ1ZyB7XG4gIGNvbnN0cnVjdG9yKG1vZHVsZU5hbWUpIHtcbiAgICB0aGlzLm1vZHVsZU5hbWUgPSBtb2R1bGVOYW1lO1xuICB9XG4gIHN0YXRpYyBtb2R1bGVEZWJ1Z1ZhbHVlcyhvcHRpb25zKSB7XG4gICAgbGV0IGRlZmF1bHRzID0gKCkgPT4ge1xuICAgICAgbGV0IG91dHB1dCA9IHt9O1xuICAgICAgZm9yIChsZXQgbW9kdWxlIGluIEdpbmdhYnVsb3VzLm1vZHVsZXMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKEdpbmdhYnVsb3VzLm1vZHVsZXMsIG1vZHVsZSkpIHtcbiAgICAgICAgICBvdXRwdXRbR2luZ2FidWxvdXMubW9kdWxlc1ttb2R1bGVdLm5hbWVdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbiAgICByZXR1cm4gR2luZ2FidWxvdXMuZXh0ZW5kKHt9LCBkZWZhdWx0cygpLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgY29uZmlnKGdsb2JhbEVuYWJsZSwgbW9kdWxlc0VuYWJsZSkge1xuICAgIGxldCBvdXRwdXQgPSB7XG4gICAgICBnbG9iYWxEZWJ1ZzogZ2xvYmFsRW5hYmxlXG4gICAgfTtcbiAgICBHaW5nYWJ1bG91cy5kZWJ1Z0NvbmZpZyA9IEdpbmdhYnVsb3VzLmV4dGVuZChcbiAgICAgIHt9LFxuICAgICAgb3V0cHV0LFxuICAgICAgRGVidWcubW9kdWxlRGVidWdWYWx1ZXMobW9kdWxlc0VuYWJsZSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBib3RoIHRoZSBnbG9iYWwgYW5kIGxvY2FsIG9wdGlvbnMgZm9yIGRlYnVnIG91dHB1dCB0byBjb25zb2xlLlxuICAgKlxuICAgKiBAbWV0aG9kIF9pc0RlYnVnRW5hYmxlZFxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAtIFdoZXRoZXIgZW5hYmxlZCBkZWJ1ZyBvdXRwdXQgaXMgdHJ1ZSBvciBmYWxzZS5cbiAgICovXG4gIF9pc0RlYnVnRW5hYmxlZCgpIHtcbiAgICBpZiAoR2luZ2FidWxvdXMuZGVidWdDb25maWdbdGhpcy5tb2R1bGVOYW1lXSAmJiBHaW5nYWJ1bG91cy5kZWJ1Z0NvbmZpZy5nbG9iYWxEZWJ1Zykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHN1ZmZpeCB0byBudW1iZXIgcGFzc2VkLlxuICAgKlxuICAgKiBAbWV0aG9kIF9hZGRTdWZmaXhUb051bWJlclxuICAgKlxuICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgICAgICAgIG51bWJlciAtIFRoZSBudW1iZXIgdG8gaGF2ZSBhIHN1ZmZpeCBhZGRlZCB0by5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgICAgICAgLSBOdW1iZXIgd2l0aCBzdWZmaXggYWRkZWQuXG4gICAqL1xuICBfYWRkU3VmZml4VG9OdW1iZXIobnVtYmVyKSB7XG4gICAgLy8gR2V0IHJlbWFpbmRlciBvZiBgbnVtYmVyYCBkaXZpZGVkIGJ5IDEwLlxuICAgIHZhciBsYXN0RGlnaXQgPSBudW1iZXIgJSAxMDtcbiAgICAvLyBHZXQgcmVtYWluZGVyIG9mIGBudW1iZXJgIGRpdmlkZWQgYnkgMTAwLlxuICAgIHZhciBsYXN0VHdvRGlnaXRzID0gbnVtYmVyICUgMTAwO1xuICAgIC8vIElmIGxhc3REaWdpdCBpcyAxIGJ1dCBsYXN0IHR3byBkaWdpdHMgbm90IDEsIHJldHVybiB3aXRoIGFkZGVkIFwic3RcIi5cbiAgICBpZiAobGFzdERpZ2l0ID09PSAxICYmIGxhc3RUd29EaWdpdHMgIT09IDExKSB7XG4gICAgICByZXR1cm4gbnVtYmVyICsgJ3N0JztcbiAgICB9XG4gICAgLy8gSWYgbGFzdERpZ2l0IGlzIDIgYnV0IHNlY29uZCB0byBsYXN0IGRpZ2l0IGlzIG5vdCAxLCByZXR1cm4gd2l0aCBhZGRlZCBcIm5kXCIuXG4gICAgaWYgKGxhc3REaWdpdCA9PT0gMiAmJiBsYXN0VHdvRGlnaXRzICE9PSAxMikge1xuICAgICAgcmV0dXJuIG51bWJlciArICduZCc7XG4gICAgfVxuICAgIC8vIElmIGxhc3REaWdpdCBpcyAyIGJ1dCBzZWNvbmQgdG8gbGFzdCBkaWdpdCBpcyBub3QgMSwgcmV0dXJuIHdpdGggYWRkZWQgXCJyZFwiLlxuICAgIGlmIChsYXN0RGlnaXQgPT09IDMgJiYgbGFzdFR3b0RpZ2l0cyAhPT0gMTMpIHtcbiAgICAgIHJldHVybiBudW1iZXIgKyAncmQnO1xuICAgIH1cbiAgICAvLyBGb3IgYWxsIG90aGVyIG51bWJlcnMsIHJldHVybiB3aXRoIGFkZGVkIFwidGhcIi5cbiAgICByZXR1cm4gbnVtYmVyICsgJ3RoJztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJ5IHNpbXBsZSBmdW5jdGlvbiB0byBoYW5kbGUgb3V0cHV0dGluZyBhIHZhbHVlcyB0eXBlIGluIGRlYnVnIG91dHB1dC5cbiAgICpcbiAgICogQG1ldGhvZCBfdmFsdWVUeXBlXG4gICAqXG4gICAqIEBwYXJhbSAge1N0cmluZ3xOdW1iZXJ8Qm9vbGVhbnxBcnJheXxPYmplY3R9ICB2YWx1ZSAtIFRoZSB2YWx1ZSB5b3Ugd2lzaCB0byBrbm93IHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlIG9mLlxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBUaGUgdmFsdWUncyB0eXBlLlxuICAgKi9cbiAgX3ZhbHVlVHlwZSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWU7XG4gIH1cblxuICBfb3V0cHV0VmFsdWVzKHZhbHVlcykge1xuICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZXMpIHtcbiAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZXMsIGtleSkpIHtcbiAgICAgICAgLy8gTG9nIGtleSBhbmQgaXQncyB2YWx1ZSBpbiBhIHJlYWRhYmxlIGZhc2hpb24uXG4gICAgICAgIGNvbnNvbGUubG9nKGtleSArICcgaXM6ICcsIHZhbHVlc1trZXldLCAnICgnICsgdGhpcy52YWx1ZVR5cGUodmFsdWVzW2tleV0pICsgJyknKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFrZSB0aGUgbmFtZSBvZiB0aGUgcGFyZW50IG9iamVjdCBncmVlbiBpbiBjb25zb2xlIG91dHB1dC5cbiAgICpcbiAgICogQG1ldGhvZCBvdXRwdXRPYmplY3RQYXJlbnRcbiAgICpcbiAgICovXG4gIF9vdXRwdXRPYmplY3RQYXJlbnQoKSB7XG4gICAgY29uc29sZS5sb2coJyVjICcgKyB0aGlzLm9iamVjdE5hbWUsICdjb2xvcjogZ3JlZW4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBmdW5jdGlvbiBoYXMgYmVlbiBjYWxsZWQgYW5kIHdoYXQgaXQgcmV0dXJuZWQuXG4gICAqXG4gICAqIEBtZXRob2QgZnVuY3Rpb25SZXR1cm5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgIGZ1bmN0aW9uTmFtZSAtIE5hbWUgb2YgdGhlIGZ1bmN0aW9uIGNhbGxlZC5cbiAgICpcbiAgICogQHBhcmFtICB7Qm9vbGVhbnxTdHJpbmd9IG91dHB1dCAgICAgICAtIFRoZSByZXR1cm4gb2YgdGhlIGZ1bmN0aW9uLCBvciBmYWxzZS5cbiAgICovXG4gIGZ1bmN0aW9uUmV0dXJuKGZ1bmN0aW9uTmFtZSwgb3V0cHV0KSB7XG4gICAgLy8gQ2hlY2sgaWYgZGVidWcgbW9kZSBpcyBlbmFibGVkLlxuICAgIGlmICh0aGlzLl9pc0RlYnVnRW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLl9vdXRwdXRPYmplY3RQYXJlbnQoKTtcbiAgICAgIC8vIElmIHRoZSBmdW5jdGlvbiBoYXMgbm8gcmV0dXJuLCB0aGVuIGp1c3Qgc2F5IHRoZSBmdW5jdGlvbiB3YXMgY2FsbGVkLFxuICAgICAgaWYgKG91dHB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coZnVuY3Rpb25OYW1lICsgJyBoYXMgYmVlbiBjYWxsZWQuIEZ1bmN0aW9uIGhhcyBubyByZXR1cm4nKTtcbiAgICAgIC8vIEVsc2UsIGxvZyBvdXQgdGhlIGZ1bmN0aW9uIGJlaW5nIGNhbGxlZCBhbG9uZyB3aXRoIGl0cyByZXR1cm4uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhmdW5jdGlvbk5hbWUgKyAnIGhhcyBiZWVuIGNhbGxlZC4gUmV0dXJuZWQ6ICcgKyBvdXRwdXQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogT3V0cHV0IHZhbHVlcyB3aXRoaW4gYSBmdW5jdGlvbiB0byBjb25zb2xlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBXaWxsIGxvZyB0byBjb25zb2xlOlxuICAgKiAvLyAgIFdpdGhpbiBmb29iYXI6XG4gICAqIC8vICAgZm9vIGlzOiA1IChOdW1iZXIpXG4gICAqIC8vICAgYmFyIGlzOiAyMiAoTnVtYmVyKVxuICAgKiBmdW5jdGlvbiBmb29iYXIoKSB7XG4gICAqICAgdmFyIGZvbyA9IDU7XG4gICAqICAgdmFyIGJhciA9IDIyO1xuICAgKiAgIERlYnVnLnZhbHVlKCdmb29iYXInLFxuICAgKiAgICAge2ZvbzogZm9vLCBiYXI6IGJhcn1cbiAgICogICApO1xuICAgKiB9XG4gICAqXG4gICAqIEBtZXRob2QgdmFsdWVcbiAgICpcbiAgICogQHBhcmFtICB7U3RyaW5nfSBmdW5jdGlvbk5hbWUgLSBOYW1lIG9mIGZ1bmN0aW9uIHRoZSB2YWx1ZSByZXNpZGUgaW4uXG4gICAqIEBwYXJhbSAge09iamVjdH0gdmFsdWVzICAgICAgIC0gT2JqZWN0IHdpdGgga2V5cyBtYXRjaGluZyB2YXJpYWJsZSBuYW1lcyB0byBiZSBvdXRwdXRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byBjb25zb2xlLlxuICAgKi9cbiAgdmFsdWVzKGZ1bmN0aW9uTmFtZSwgdmFsdWVzKSB7XG4gICAgLy8gQ2hlY2sgaWYgZGVidWcgbW9kZSBpcyBlbmFibGVkLlxuICAgIGlmICh0aGlzLl9pc0RlYnVnRW5hYmxlZCgpKSB7XG4gICAgICB0aGlzLl9vdXRwdXRPYmplY3RQYXJlbnQoKTtcbiAgICAgIGNvbnNvbGUubG9nKCclYyBXaXRoaW4gJyArIGZ1bmN0aW9uTmFtZSArICc6JywgJ2NvbG9yOiBwdXJwbGUnKTtcbiAgICAgIC8vIExvb3AgdGhyb3VnaCB2YWx1ZXMgd2l0aGluIHRoZSBmdW5jdGlvbi5cbiAgICAgIHRoaXMuX291dHB1dFZhbHVlcyh2YWx1ZXMpO1xuICAgIH1cbiAgfVxuICBsb29wKGZ1bmN0aW9uTmFtZSwgaSwgdmFsdWVzKSB7XG4gICAgaWYgKHRoaXMuX2lzRGVidWdFbmFibGVkKCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCclYyBXaXRoaW4gJyArIGZ1bmN0aW9uTmFtZSArICc6JywgJ2NvbG9yOiBwdXJwbGUnKTtcbiAgICAgIGlmICh0eXBlb2YgaSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJdGVyYXRpb24gPSB0aGlzLl9hZGRTdWZmaXhUb051bWJlcihpICsgMSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRJdGVyYXRpb24gKyAnIGl0ZXJhdGlvbiBvZiBmb3IgbG9vcDonKTtcbiAgICAgICAgdGhpcy5fb3V0cHV0VmFsdWVzKHZhbHVlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnY3VycmVudCBrZXkgaW4gZm9yaW46ICcgKyBpKTtcbiAgICAgICAgdGhpcy5fb3V0cHV0VmFsdWVzKHZhbHVlcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIG1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmICh0aGlzLl9pc0RlYnVnRW5hYmxlZCgpKSB7XG4gICAgICBjb25zb2xlLmxvZyhgJWMgJHttZXNzYWdlfWAsICdjb2xvcjogYmx1ZScpO1xuICAgIH1cbiAgfVxufVxuXG5HaW5nYWJ1bG91cy5EZWJ1ZyA9IERlYnVnO1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuICAvLyBOZWVkIHRvIGJlIGFibGUgdG8gcmVnaXN0ZXIgZ2xvYmFsIGV2ZW50cyBpbiBhIHdheSB0aGF0IGV4cG9zZXMgdGhlbSBzbyBvdGhlciBtb2R1bGVzXG4gIC8vIGNhbiBob29rIGludG8gdGhlIGNhbGxiYWNrIG9uIHRob3NlIGV2ZW50cy5cbmNsYXNzIEV2ZW50TGlzdGVuZXIge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBsaXN0ZW5lcikge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIHRoaXMuY2FsbGJhY2tzID0gW107XG4gICAgdGhpcy5yZWdpc3RlcmVkID0gZmFsc2U7XG4gIH1cbiAgX2hhbmRsZXIoKSB7XG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja3NbaV0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3JlZ2lzdGVyRXZlbnRMaXN0ZW5lcigpIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmxpc3RlbmVyLCAoKSA9PiB0aGlzLl9oYW5kbGVyKCkpO1xuICB9XG4gIHJlZ2lzdGVyQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLmNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uLCBub3QgYSAke3R5cGVvZiBjYWxsYmFja31gKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2FsbGJhY2tzLmxlbmd0aCA+IDAgJiYgIXRoaXMucmVnaXN0ZXJlZCkge1xuICAgICAgdGhpcy5fcmVnaXN0ZXJFdmVudExpc3RlbmVyKCk7XG4gICAgICB0aGlzLnJlZ2lzdGVyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCByZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihuYW1lLCBlbGVtZW50LCBsaXN0ZW5lcikge1xuICBsaXN0ZW5lciA9IG5hbWUgfHwgbGlzdGVuZXI7XG4gIGlmIChHaW5nYWJ1bG91cy5ldmVudHNbbmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIEdpbmdhYnVsb3VzLmV2ZW50c1tuYW1lXSA9IG5ldyBHaW5nYWJ1bG91cy5FdmVudExpc3RlbmVyKGVsZW1lbnQsIGxpc3RlbmVyKTtcbiAgfVxufTtcblxuR2luZ2FidWxvdXMuZXZlbnRzID0ge307XG5HaW5nYWJ1bG91cy5yZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIgPSByZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXI7XG5HaW5nYWJ1bG91cy5FdmVudExpc3RlbmVyID0gRXZlbnRMaXN0ZW5lcjtcbn0oKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuIWZ1bmN0aW9uKCkge1xuXG5jb25zdCBleHRlbmQgPSBmdW5jdGlvbihvdXQpIHtcbiAgb3V0ID0gb3V0IHx8IHt9O1xuXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFhcmd1bWVudHNbaV0pIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBmb3IgKGxldCBrZXkgaW4gYXJndW1lbnRzW2ldKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFyZ3VtZW50c1tpXSwga2V5KSkge1xuICAgICAgICBvdXRba2V5XSA9IGFyZ3VtZW50c1tpXVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufTtcblxuY29uc3QgZGVlcEV4dGVuZCA9IGZ1bmN0aW9uKG91dCkge1xuICBvdXQgPSBvdXQgfHwge307XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgb2JqID0gYXJndW1lbnRzW2ldO1xuXG4gICAgaWYgKCFvYmopIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICBpZiAodHlwZW9mIG9ialtrZXldID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIG91dFtrZXldID0gZGVlcEV4dGVuZChvdXRba2V5XSwgb2JqW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07XG5cbkdpbmdhYnVsb3VzLmV4dGVuZCA9IGV4dGVuZDtcbkdpbmdhYnVsb3VzLmRlZXBFeHRlbmQgPSBkZWVwRXh0ZW5kO1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuXG5jbGFzcyBJbmplY3Qge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBHaW5nYWJ1bG91cy5kZWVwRXh0ZW5kKEluamVjdC5kZWZhdWx0cygpLCBvcHRpb25zKTtcbiAgICB0aGlzLnhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHRoaXMuYXBpO1xuICAgIHRoaXMuYWN0aXZlQ29udGVudDtcblxuICAgIHRoaXMuX2luaXQoKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgfVxuICBzdGF0aWMgZGVmYXVsdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFBdHRyOiAnZGF0YS1pbmplY3QnLFxuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHRvIG1ha2UgdGhlIHhociByZXF1ZXN0LlxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIG9uTG9hZDogICB0cnVlXG4gICAgfTtcbiAgfVxuICBnZXQgYXR0cigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGFpbmVyOiBgJHt0aGlzLm9wdGlvbnMuZGF0YUF0dHJ9LWNvbnRhaW5lcmAsXG4gICAgICBjb250ZW50OiAgIGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tY29udGVudGAsXG4gICAgICBhcGk6ICAgICAgIGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tYXBpYCxcbiAgICAgIGJpbmQ6ICAgICAgYCR7dGhpcy5vcHRpb25zLmRhdGFBdHRyfS1iaW5kYFxuICAgIH07XG4gIH1cbiAgZ2V0IGJvdW5kRWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbJHt0aGlzLmF0dHIuYmluZH1dYCk7XG4gIH1cbiAgX2luaXQoKSB7XG4gICAgdGhpcy5fYWpheCgpO1xuICB9XG4gIC8qKlxuICAgKiBUYWtlcyBhIHN0cmluZyByZXByZXNlbnRhaW9uIG9mIGFuIG9iamVjdCBjaGFpbiBhbmQgdHJhdmVyc2VzIHRoZSByZWFsIG9iamVjdCB0byB0aGVcbiAgICogbGFzdCBrZXkgaW4gdGhlIGNoYWluLlxuICAgKlxuICAgKiBAbWV0aG9kIF90cmF2ZXJzZU9iamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgIGNoYWluICAtIFN0cmluZyByZXByZXNlbmF0aW9uIG9mIGFuIG9iamVjdCBjaGFpbi5cbiAgICogQHBhcmFtICB7T2JqZWN0fSAgICAgICBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIHRyYXZlcnNlLlxuICAgKiBAcmV0dXJuIHsqfSAgICAgICAgICAgICAgICAgICAtIFRoZSBuZXcgcG9zaXRpb24gaW4gdGhlIG9iamVjdC5cbiAgICovXG4gIF90cmF2ZXJzZU9iamVjdChjaGFpbiwgb2JqZWN0KSB7XG4gICAgY29uc3Qga2V5cyA9IGNoYWluLnNwbGl0KCcuJyk7XG4gICAgbGV0IG91dHB1dCA9IG9iamVjdDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG91dHB1dCA9IG91dHB1dFtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICAvKipcbiAgICogcGFyc2VzIHRoZSByZXNwb25zZSB0ZXh0IGFuZCBsb2FkcyBpdCBpbnRvIHRoZSBhcGkgcHJvcGVydHlcbiAgICpcbiAgICogQG1ldGhvZCBfbG9hZEFQSVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2xvYWRBUEkoKSB7XG4gICAgaWYgKHRoaXMueGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgIHRoaXMuYXBpID0gSlNPTi5wYXJzZSh0aGlzLnhoci5yZXNwb25zZVRleHQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogaGFuZGxlcyB0aGUgZ2V0IHJlcXVlc3Qgb24gdGhlIHhociBvYmplY3RcbiAgICpcbiAgICogQG1ldGhvZCBfYWpheFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FqYXgoKSB7XG4gICAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4gdGhpcy5fbG9hZEFQSSgpO1xuICAgIHRoaXMueGhyLm9wZW4oJ0dFVCcsIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLmFwaSkpO1xuICAgIC8vIHRoaXMueGhyLm9wZW4oJ0dFVCcsIHRoaXMucGF0aCk7XG4gICAgdGhpcy54aHIuc2VuZCgpO1xuICB9XG4gIF9pbmplY3RDb250ZW50KCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ib3VuZEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIG9iamVjdCBjaGFpbiB0byBwYXJzZS5cbiAgICAgIGxldCBjaGFpbiA9IHRoaXMuYm91bmRFbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLmJpbmQpO1xuICAgICAgLy8gSW5qZWN0IHRoZSBjb250ZW50LCByZXBsYWNpbmcgd2hhdGV2ZXIgaXMgYWxyZWFkeSB0aGVyZS5cbiAgICAgIHRoaXMuYm91bmRFbGVtZW50c1tpXS5pbm5lckhUTUwgPSB0aGlzLl90cmF2ZXJzZU9iamVjdChjaGFpbiwgdGhpcy5hY3RpdmVDb250ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbnRlbnQgb2YgdGhlIGJvdW5kIGVsZW1lbnRzIGlubmVyIEhUTUwgYmFzZWQgb24gYSBrZXkgb3Igb2JqZWN0IGNoYWluXG4gICAqIHBhc3NlZCBhcyBhIHN0cmluZy5cbiAgICpcbiAgICogQG1ldGhvZCB1cGRhdGVDb250ZW50XG4gICAqIEBmaXJlcyBJbmplY3QjX2luamVjdENvbnRlbnRcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgIGNoYWluIC0gdGhlIG9iamVjdCBjaGFpbiB0aGF0IGxlYWRzIHRvIHRoZSBiYXNlIG9iamVjdCB0byB1c2UuXG4gICAqL1xuICB1cGRhdGVDb250ZW50KGNoYWluKSB7XG4gICAgdGhpcy5hY3RpdmVDb250ZW50ID0gdGhpcy5fdHJhdmVyc2VPYmplY3QoY2hhaW4sIHRoaXMuYXBpKTtcbiAgICB0aGlzLl9pbmplY3RDb250ZW50KCk7XG4gIH1cbn1cblxuR2luZ2FidWxvdXMuSW5qZWN0ID0gSW5qZWN0O1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuXG5jbGFzcyBSZXNwb25zaXZlIHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIGVsZW1lbnQgLSBKUyBBUEkgRE9NIE5vZGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMudmFsdWVTdHJpbmcgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1yZXNwb25zaXZlJyk7XG4gICAgdGhpcy5icmVha3BvaW50cyA9IEdpbmdhYnVsb3VzLmJyZWFrcG9pbnRzO1xuICAgIHRoaXMuYnJlYWtwb2ludEFycmF5ID0gR2luZ2FidWxvdXMuYnJlYWtwb2ludEFycmF5O1xuICAgIHRoaXMud2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fFxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8XG4gICAgICBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuICAgIC8vIGV4cG9zZSB0aGUgcmVzcG9uc2l2ZSBzdGF0ZSBvZiB0aGUgZWxlbWVudFxuICAgIHRoaXMuX3NldFN0YXRlKCk7XG4gICAgdGhpcy5fb25SZXNpemUoKTtcbiAgfVxuICAvKipcbiAgICogVGFrZXMgYSBzdHJpbmcgb2YgYnJlYWtwb2ludHMgZnJvbSB0aGUgZGF0YSBhdHRyaWJ1dGUgb2YgdGhlXG4gICAqIGVsZW1lbnQgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBhbmQgY29udmVydHMgaXQgaW50byBhbiBhcnJheS5cbiAgICogQG1ldGhvZCB2YWx1ZXNBcnJheVxuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgLSBBbiBhcnJheSBvZiBicmVha3BvaW50cy5cbiAgICovXG4gIGdldCB2YWx1ZXNBcnJheSgpIHtcbiAgICBpZiAodGhpcy52YWx1ZVN0cmluZyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMudmFsdWVTdHJpbmcgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmFsdWVTdHJpbmcuc3BsaXQoJyAnKTtcbiAgfVxuICBnZXQgZW5hYmxlZFF1ZXJpZXMoKSB7XG4gICAgbGV0IG91dHB1dCA9IFtdO1xuICAgIC8vIElmIHRoZXJlIGFyZSBubyBicmVha3BvaW50cyBwYXNzZWQsIHRoZW4gcmV0dXJuIHRoZSBlbnRpcmUgYXJyYXkgb2YgYnJlZWFrcG9pbnRzLlxuICAgIGlmICh0aGlzLnZhbHVlc0FycmF5Lmxlbmd0aCA8PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5icmVha3BvaW50QXJyYXk7XG4gICAgfVxuICAgIGZvciAobGV0IGluZGV4IGluIHRoaXMudmFsdWVzQXJyYXkpIHtcbiAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMudmFsdWVzQXJyYXksIGluZGV4KSkge1xuICAgICAgICBsZXQgcGFyc2VkVmFsdWUgPSB0aGlzLl9wYXJzZVBhcmFtKHRoaXMudmFsdWVzQXJyYXlbaW5kZXhdKTtcbiAgICAgICAgb3V0cHV0ID0gdGhpcy5fcGFyc2VBcnJheShvdXRwdXQsIHBhcnNlZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICBnZXQgcXVlcnlWYWx1ZXMoKSB7XG4gICAgbGV0IG91dHB1dCA9IHt9O1xuICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmJyZWFrcG9pbnRzKSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmJyZWFrcG9pbnRzLCBrZXkpKSB7XG4gICAgICAgIG91dHB1dFtrZXldID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHF1ZXJ5IGluIHRoaXMuZW5hYmxlZFF1ZXJpZXMpIHtcbiAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmVuYWJsZWRRdWVyaWVzW3F1ZXJ5XSkge1xuICAgICAgICAgICAgb3V0cHV0W2tleV0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIHBhc3NlZCBrZXkgbWF0Y2hlcyBhbnkgb2YgdGhlIGJyZWFrcG9pbnQga2V5cy5cbiAgICogQG1ldGhvZCBfaXNBS2V5XG4gICAqIEBwYXJhbSAge1N0cmluZ30gIGtleVRvQ2hlY2sgLSBUaGUga2V5IHRvIGNoZWNrIGFnYWluc3QgdGhlIGJyZWFrcG9pbnRzLlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICAgICAgIC0gSWYgdGhlcmUgaXMgYSBtYXRjaCB0aGVuIHRydWUgaXMgcmV0dXJuZWQsIGVsc2UgZmFsc2UuXG4gICAqL1xuICBfaXNBS2V5KGtleVRvQ2hlY2spIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5icmVha3BvaW50cykge1xuICAgICAgaWYgKGtleVRvQ2hlY2sgPT09IGtleSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBQYXJzZXMgYSB2YWx1ZSBjb250YWluaW5nIGEgYnJlYWtwb2ludCBhbmQga2V5d29yZC5cbiAgICogQG1ldGhvZCBfcGFyc2VQYXJhbVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgIHBhcmFtIC0gVGhlIGluZGl2aWR1YWwgcGFyYW0gcGFyc2VkIGZyb20gdGhlIHN0cmluZy5cbiAgICogQHJldHVybiB7QXJyYXl9ICAgICAgICAgICAtIEFuIGFycmF5IG9mIGJyZWFrcG9pbnRzIHRoYXQgcmVwcmVzZW50IHdoZW4gYSBtb2R1bGUgY2FuXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBhY3RpdmUuXG4gICAqL1xuICBfcGFyc2VQYXJhbShwYXJhbSkge1xuICAgIHZhciBvdXRwdXQgPSBbXTtcbiAgICBpZiAoIXRoaXMuX2lzQUtleShwYXJhbSkpIHtcbiAgICAgIGxldCBzcGxpdFBhcmFtID0gcGFyYW0uc3BsaXQoJy0nKTtcbiAgICAgIGxldCBxdWVyeSA9IHNwbGl0UGFyYW1bMF07XG4gICAgICBsZXQga2V5d29yZCA9IHNwbGl0UGFyYW1bMV07XG5cbiAgICAgIGlmIChrZXl3b3JkID09PSAnb25seScpIHtcbiAgICAgICAgb3V0cHV0LnB1c2gocXVlcnkpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgfVxuICAgICAgLyoqIEdvIHRocm91Z2ggZWFjaCBhY3RpdmUgYnJlYWtwb2ludCAqL1xuICAgICAgZm9yIChsZXQgaW5kZXggaW4gdGhpcy5icmVha3BvaW50QXJyYXkpIHtcbiAgICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5icmVha3BvaW50QXJyYXksIGluZGV4KSkge1xuICAgICAgICAgIC8qKiBpZiB0aGUga2V5d29yZCBpcyBgdXBgIHRoZW4gb25seSBwdXNoIGlmIHRoZSBpbmRleCBvZiB0aGUgcXVlcnkgaXMgbGVzc1xuICAgICAgICAgICAgICB0aGFuIG9yIGVxdWFsIHRvIHRoZSBpbmRleCBvZiB0aGUgbG9vcCAqL1xuICAgICAgICAgIGlmIChzcGxpdFBhcmFtWzFdID09PSAndXAnICYmIHRoaXMuX2luZGV4T2ZRdWVyeShzcGxpdFBhcmFtWzBdKSA8PSBpbmRleCkge1xuICAgICAgICAgICAgb3V0cHV0LnB1c2godGhpcy5icmVha3BvaW50QXJyYXlbaW5kZXhdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLyoqIGlmIHRoZSBrZXl3b3JkIGlzIGBkb3duYCB0aGVuIG9ubHkgcHVzaCBpZiB0aGUgaW5kZXggb2YgdGhlIHF1ZXJ5IGlzIGdyZWF0ZXJcbiAgICAgICAgICAgICAgdGhhbiBvciBlcXVhbCB0byB0aGUgaW5kZXggb2YgdGhlIGxvb3AgKi9cbiAgICAgICAgICBpZiAoc3BsaXRQYXJhbVsxXSA9PT0gJ2Rvd24nICYmIHRoaXMuX2luZGV4T2ZRdWVyeShzcGxpdFBhcmFtWzBdKSA+PSBpbmRleCkge1xuICAgICAgICAgICAgb3V0cHV0LnB1c2godGhpcy5icmVha3BvaW50QXJyYXlbaW5kZXhdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIG91dHB1dC5wdXNoKHBhcmFtKTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIF9wYXJzZUFycmF5KG9sZEFycmF5LCBuZXdBcnJheSkge1xuICAgIGxldCBvdXRwdXQgPSBvbGRBcnJheTtcbiAgICBsZXQgaXNJbk9sZEFycmF5ID0gZmFsc2U7XG4gICAgZm9yIChsZXQgbkluZGV4IGluIG5ld0FycmF5KSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChuZXdBcnJheSwgbkluZGV4KSkge1xuICAgICAgICBpc0luT2xkQXJyYXkgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgb0luZGV4IGluIG9sZEFycmF5KSB7XG4gICAgICAgICAgaWYgKG5ld0FycmF5W25JbmRleF0gPT09IG9sZEFycmF5W29JbmRleF0pIHtcbiAgICAgICAgICAgIGlzSW5PbGRBcnJheSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaXNJbk9sZEFycmF5KSB7XG4gICAgICAgICAgb3V0cHV0LnB1c2gobmV3QXJyYXlbbkluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIGN1cnJlbnQgYnJlYWtwb2ludCBiZWluZyBxdWVycmllZFxuICAgKiBAbWV0aG9kIF9pbmRleE9mUXVlcnlcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgIHF1ZXJ5IC0gVGhlIG5hbWUgb2YgdGhlIGJyZWFrcG9pbnQga2V5XG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAtIFRoZSBpbmRleCBvZiB0aGF0IGtleSBpbiB0aGUgYnJlYWtwb2ludCBhcnJheS5cbiAgICovXG4gIF9pbmRleE9mUXVlcnkocXVlcnkpIHtcbiAgICBmb3IgKGxldCBpbmRleCBpbiB0aGlzLmJyZWFrcG9pbnRBcnJheSkge1xuICAgICAgaWYgKHRoaXMuYnJlYWtwb2ludEFycmF5W2luZGV4XSA9PT0gcXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfc2V0U3RhdGUoKSB7XG4gICAgbGV0IHN0YXRlO1xuICAgIGlmICh0aGlzLnF1ZXJ5VmFsdWVzW0dpbmdhYnVsb3VzLmFjdGl2ZUJyZWFrcG9pbnQoKV0pIHtcbiAgICAgIHN0YXRlID0gJ2FjdGl2ZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlID0gJ2luYWN0aXZlJztcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1yZXNwb25zaXZlLXN0YXRlJywgc3RhdGUpO1xuICB9XG4gIF9vblJlc2l6ZSgpIHtcbiAgICBpZiAoIUdpbmdhYnVsb3VzLmV2ZW50cy5yZXNpemUpIHtcbiAgICAgIEdpbmdhYnVsb3VzLnJlZ2lzdGVyR2xvYmFsRXZlbnRMaXN0ZW5lcigncmVzaXplJywgd2luZG93KTtcbiAgICB9XG4gICAgR2luZ2FidWxvdXMuZXZlbnRzLnJlc2l6ZS5yZWdpc3RlckNhbGxiYWNrKCgpID0+IHRoaXMuX3NldFN0YXRlKCkpO1xuICB9XG4gIGlzQWN0aXZlKCkge1xuICAgIC8vIGxldCBlbmFibGVkUXVlcmllcyA9IHRoaXMucXVlcnlWYWx1ZXM7XG4gICAgLy8gY29uc29sZS5sb2coZW5hYmxlZFF1ZXJpZXMpO1xuICAgIC8vIGxldCBjdXJyZW50UXVlcnkgPSBHaW5nYWJ1bG91cy5hY3RpdmVCcmVha3BvaW50KCk7XG4gICAgLy8gY29uc29sZS5sb2coZW5hYmxlZFF1ZXJpZXNbY3VycmVudFF1ZXJ5XSk7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlWYWx1ZXNbR2luZ2FidWxvdXMuYWN0aXZlQnJlYWtwb2ludCgpXTtcbiAgfVxuICAvLyBVdGlsaXR5IHRvIHdyYXAgb25SZXNpemUgYWN0aW9ucyBpbiB0byBhdm9pZCBpc3N1ZXMgd2l0aCB3aW5kb3cgaGVpZ2h0IHJlc2l6aW5nIGZyb21cbiAgLy8gbW9iaWxlIGJyb3dzZXJzIHNob3cvaGlkaW5nIFVJIGVsZW1lbnRzLlxuICB3aW5kb3dXaWR0aFdhc1Jlc2l6ZWQoKSB7XG4gICAgbGV0IGN1cnJlbnRXaW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8XG4gICAgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcbiAgICBsZXQgb3V0cHV0ID0gZmFsc2U7XG5cbiAgICBpZiAoY3VycmVudFdpbmRvd1dpZHRoICE9PSB0aGlzLndpbmRvd1dpZHRoKSB7XG4gICAgICBvdXRwdXQgPSB0cnVlO1xuICAgIH1cbiAgICB0aGlzLndpbmRvd1dpZHRoID0gY3VycmVudFdpbmRvd1dpZHRoO1xuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbn1cbkdpbmdhYnVsb3VzLlJlc3BvbnNpdmUgPSBSZXNwb25zaXZlO1xuXG59KCk7XG4iLCIhZnVuY3Rpb24oKSB7XG5jbGFzcyBTY3JvbGxEaXJlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIHRoaXMubGFzdFNjcm9sbFBvc2l0aW9uID0gMDtcbiAgICAvLyAwID0gZG93biBhbmQgMSA9IHVwXG4gICAgdGhpcy5sYXN0U2Nyb2xsRGlyZWN0aW9uID0gMDtcbiAgICB0aGlzLmkgPSAwO1xuICAgIHRoaXMuc2Nyb2xsaW5nRGlyZWN0aW9uID0gMDtcbiAgICB0aGlzLl9ldmVudCgpO1xuICB9XG4gIF91cGRhdGUoKSB7XG4gICAgbGV0IGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuXG4gICAgLy8gQWN0aW9ucyB3aGVuIHNjcm9sbGluZyBkb3duXG4gICAgaWYgKGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA+IHRoaXMubGFzdFNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZG93bicpO1xuICAgICAgaWYgKHRoaXMubGFzdFNjcm9sbERpcmVjdGlvbiAhPT0gMCkge1xuICAgICAgICB0aGlzLmkgKz0gMTtcbiAgICAgICAgaWYgKHRoaXMuaSA+PSAxMCkge1xuICAgICAgICAgIHRoaXMuaSA9IDA7XG4gICAgICAgICAgdGhpcy5sYXN0U2Nyb2xsRGlyZWN0aW9uID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIC8vIEFjdGlvbnMgd2hlbiBzY3JvbGxpbmcgdXBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3VwJyk7XG4gICAgICBpZiAodGhpcy5sYXN0U2Nyb2xsRGlyZWN0aW9uICE9PSAxKSB7XG4gICAgICAgIGlmICh0aGlzLmkgPj0gMTApIHtcbiAgICAgICAgICB0aGlzLmkgPSAwO1xuICAgICAgICAgIHRoaXMubGFzdFNjcm9sbERpcmVjdGlvbiA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pICs9IDE7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGFzdFNjcm9sbFBvc2l0aW9uID0gY3VycmVudFNjcm9sbFBvc2l0aW9uO1xuICB9XG4gIF9ldmVudCgpIHtcbiAgICBHaW5nYWJ1bG91cy5ldmVudHMuc2Nyb2xsLnJlZ2lzdGVyQ2FsbGJhY2soKCkgPT4gdGhpcy5fdXBkYXRlKCkpO1xuICB9XG4gIGRvd24oKSB7XG4gICAgaWYgKHRoaXMubGFzdFNjcm9sbERpcmVjdGlvbiA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB1cCgpIHtcbiAgICBpZiAodGhpcy5sYXN0U2Nyb2xsRGlyZWN0aW9uID09PSAxKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5HaW5nYWJ1bG91cy5TY3JvbGxEaXJlY3Rpb24gPSBTY3JvbGxEaXJlY3Rpb247XG59KCk7XG4iLCIndXNlIHN0cmljdCc7XG4hZnVuY3Rpb24oKSB7XG4vLyBuZWVkIGEgcmFuZ2UgZm9yIGVhY2ggbGF5ZXIuXG4vLyBuZWVkIHRvIHNjYWxlIGVhY2ggbGF5ZXIgYmFzZWQgb24gbGF5ZXIgb3JkZXIuXG4vLyBuZWVkIHRoZSBzY3JvbGwgZXZlbnRcbi8vIC0gZGV0ZWN0IHNjcm9sbCB1cCBhbmQgc2Nyb2xsIGRvd25cblxuLyoqXG4gKiBAbW9kdWxlIGJhY2tnb3J1bmRcbiAqL1xuXG5jbGFzcyBCYWNrZ3JvdW5kIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5vcHRpb25zID0gR2luZ2FidWxvdXMuZGVlcEV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgdGhpcy5zY3JvbGxEaXJlY3Rpb24gPSBuZXcgR2luZ2FidWxvdXMuU2Nyb2xsRGlyZWN0aW9uKCk7XG4gICAgdGhpcy5jb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuY29udGVudFRhcmdldCk7XG4gIH1cbiAgZ2V0IGRlZmF1bHRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhQXR0cjogICAgICBHaW5nYWJ1bG91cy5tb2R1bGVzLkJhY2tncm91bmQuZGF0YUF0dHIsXG4gICAgICBjb250ZW50VGFyZ2V0OiAnLnNpdGUtd3JhcHBlcicsXG4gICAgICBzY3JvbGxSYXRpbzogICA1XG4gICAgfTtcbiAgfVxuICBnZXQgY2FsY3VsYXRlZExheWVySGVpZ2h0KCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuc2Nyb2xsUmF0aW8gPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZW50Lm9mZnNldEhlaWdodDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29udGVudC5vZmZzZXRIZWlnaHQgLyAzO1xuICB9XG4gIGluaXQoKSB7XG4gICAgdGhpcy5fc2V0TGF5ZXJIZWlnaHQoKTtcbiAgICB0aGlzLl9ldmVudHMoKTtcbiAgfVxuICBfc2V0TGF5ZXJIZWlnaHQoKSB7XG4gICAgbGV0IGxheWVycyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGF5ZXInKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsYXllcnNbaV0uc3R5bGUuaGVpZ2h0ID0gdGhpcy5jYWxjdWxhdGVkTGF5ZXJIZWlnaHQ7XG4gICAgfVxuICB9XG4gIF9zeW5jU2Nyb2xsaW5nKCkge1xuICAgIGxldCBjdXJyZW50U2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICBpZiAodGhpcy5vcHRpb25zLnNjcm9sbFJhdGlvID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnNjcm9sbFRvcCA9IGN1cnJlbnRTY3JvbGxQb3NpdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50LnNjcm9sbFRvcCA9IGN1cnJlbnRTY3JvbGxQb3NpdGlvbiAvIHRoaXMub3B0aW9ucy5zY3JvbGxSYXRpbztcbiAgICB9XG5cbiAgICAvLyBjb25zb2xlLmxvZyh3aW5kb3cucGFnZVlPZmZzZXQsIHRoaXMuZWxlbWVudC5zY3JvbGxUb3ApO1xuICB9XG4gIF9ldmVudHMoKSB7XG4gICAgR2luZ2FidWxvdXMuZXZlbnRzLnNjcm9sbC5yZWdpc3RlckNhbGxiYWNrKCgpID0+IHRoaXMuX3N5bmNTY3JvbGxpbmcoKSk7XG4gIH1cbn1cbkdpbmdhYnVsb3VzLnJlZ2lzdGVyTW9kdWxlKEJhY2tncm91bmQsICdCYWNrZ3JvdW5kJyk7XG5HaW5nYWJ1bG91cy5yZWdpc3Rlckdsb2JhbEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGRvY3VtZW50KTtcbn0oKTtcbiIsIid1c2Ugc3RyaWN0JztcbiFmdW5jdGlvbigpIHtcbmZ1bmN0aW9uIGdlbmVyYXRlVUlEKCkge1xuICByZXR1cm4gTWF0aC5yb3VuZCgoTWF0aC5wb3coMzIsIDcpIC0gKE1hdGgucmFuZG9tKCkgKiBNYXRoLnBvdygzMiwgNikpKSkudG9TdHJpbmcoKTtcbn1cbmNsYXNzIEV4cGFuZCB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IEdpbmdhYnVsb3VzLmRlZXBFeHRlbmQoe30sIEV4cGFuZC5kZWZhdWx0cygpLCBvcHRpb25zKTtcbiAgICB0aGlzLnVpZCA9IGdlbmVyYXRlVUlEKCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy51aWQpO1xuICAgIHRoaXMucmVzcG9uc2l2ZSA9IG5ldyBHaW5nYWJ1bG91cy5SZXNwb25zaXZlKGVsZW1lbnQpO1xuICAgIHRoaXMuYW5pbWF0aW9uID0gZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJykgP1xuICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJykgOlxuICAgICAgZmFsc2U7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5hbmltYXRpb24pO1xuICAgIC8vICAgY29uc29sZS5sb2coZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJykpO1xuICAgIC8vICAgY29uc29sZS5sb2coZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW5pbWF0aW9uJykpO1xuICAgIC8vICAgY29uc29sZS5sb2coR2luZ2FidWxvdXMuYW5pbWF0aW9uc1tlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hbmltYXRpb24nKV0pO1xuICAgIC8vIGNvbnNvbGUubG9nKGFuaW1hdGlvbkZ1bmMpO1xuICB9XG4gIHN0YXRpYyBkZWZhdWx0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YUF0dHI6ICAgICAgR2luZ2FidWxvdXMubW9kdWxlcy5FeHBhbmQuZGF0YUF0dHIsXG4gICAgICBjbGFzczogICAgICAgICAnZXhwYW5kYWJsZScsXG4gICAgICB0eXBlOiAgICAgICAgICAnYmFzaWMnLFxuICAgICAgZGVmYXVsdFN0YXRlOiAgJ2NvbGxhcHNlZCcsXG4gICAgICBpbmFjdGl2ZVN0YXRlOiAnaW5hY3RpdmUnLFxuICAgICAgc3RhdGVzOiAgICAgICAge1xuICAgICAgICBleHBhbmRlZDogICdleHBhbmRlZCcsXG4gICAgICAgIGNvbGxhcHNlZDogJ2NvbGxhcHNlZCdcbiAgICAgIH0sXG4gICAgICBhbmltYXRpb246IG51bGxcbiAgICB9O1xuICB9XG4gIGdldCBjbGFzc2VzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBleHBhbmQ6IHRoaXMub3B0aW9ucy5jbGFzc1xuICAgIH07XG4gIH1cbiAgZ2V0IGF0dHIoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4cGFuZDogIHRoaXMub3B0aW9ucy5kYXRhQXR0cixcbiAgICAgIHVpZDogICAgIGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tdWlkYCxcbiAgICAgIG9wZW46ICAgIGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tb3BlbmAsXG4gICAgICBjbG9zZTogICBgJHt0aGlzLm9wdGlvbnMuZGF0YUF0dHJ9LWNsb3NlYCxcbiAgICAgIGNvbnRlbnQ6IGAke3RoaXMub3B0aW9ucy5kYXRhQXR0cn0tY29udGVudGBcbiAgICB9O1xuICB9XG4gIGluaXQoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2FjdGl2ZSBvbiBpbml0OicsIHRoaXMucmVzcG9uc2l2ZS5pc0FjdGl2ZSgpKTtcbiAgICB0aGlzLl9zZXRVSUQoKTtcbiAgICAvLyBTZXQgRGVmYXVsdCBTdGF0ZVxuICAgIGlmICh0aGlzLnJlc3BvbnNpdmUuaXNBY3RpdmUoKSkge1xuICAgICAgdGhpcy5fc2V0U3RhdGUodGhpcy5vcHRpb25zLmRlZmF1bHRTdGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NldFN0YXRlKHRoaXMub3B0aW9ucy5pbmFjdGl2ZVN0YXRlKTtcbiAgICB9XG4gICAgaWYgKCEhdGhpcy5hbmltYXRpb24gJiYgR2luZ2FidWxvdXMuYW5pbWF0aW9uc1t0aGlzLmFuaW1hdGlvbl0uc2V0dXAgIT09IG51bGwpIHtcbiAgICAgIEdpbmdhYnVsb3VzLmFuaW1hdGlvbnNbdGhpcy5hbmltYXRpb25dLnNldHVwKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBFdmVudHNcbiAgICB0aGlzLl9ldmVudHMoKTtcbiAgfVxuICBfc2V0VUlEKCkge1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUodGhpcy5hdHRyLnVpZCwgdGhpcy51aWQpO1xuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbJHt0aGlzLmF0dHIub3Blbn1dYCkuc2V0QXR0cmlidXRlKHRoaXMuYXR0ci5vcGVuLCB0aGlzLnVpZCk7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFske3RoaXMuYXR0ci5jbG9zZX1dYCkuc2V0QXR0cmlidXRlKHRoaXMuYXR0ci5jbG9zZSwgdGhpcy51aWQpO1xuICB9XG4gIF9zZXRTdGF0ZShzdGF0ZSkge1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUodGhpcy5hdHRyLmV4cGFuZCwgc3RhdGUpO1xuICB9XG4gIF9vblJlc2l6ZSgpIHtcbiAgICBpZiAodGhpcy5yZXNwb25zaXZlLndpbmRvd1dpZHRoV2FzUmVzaXplZCgpKSB7XG4gICAgICBpZiAodGhpcy5yZXNwb25zaXZlLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgLy8gSWYgY3VycmVudCBzdGF0ZSBkb2VzbnQgbWF0Y2ggZGVmYXVsdCBzdGF0ZSwgdGhlbiBzZXQgc3RhdGUgdG8gZGVmYXVsdCBzdGF0ZS5cbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLmV4cGFuZCkgIT09IHRoaXMub3B0aW9ucy5kZWZhdWx0U3RhdGUpIHtcbiAgICAgICAgICB0aGlzLl9zZXRTdGF0ZSh0aGlzLm9wdGlvbnMuZGVmYXVsdFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnJlc3BvbnNpdmUuaXNBY3RpdmUoKSkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLmF0dHIuZXhwYW5kKSAhPT0gdGhpcy5vcHRpb25zLmluYWN0aXZlU3RhdGUpIHtcbiAgICAgICAgICB0aGlzLl9zZXRTdGF0ZSh0aGlzLm9wdGlvbnMuaW5hY3RpdmVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2V2ZW50TWF0Y2hlcyhkYXRhQXR0ciwgZXZlbnQpIHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFske2RhdGFBdHRyfV1gKTtcbiAgICBsZXQgY29uZGl0aW9uT25lID0gZmFsc2U7XG4gICAgbGV0IGNvbmRpdGlvblR3byA9IGZhbHNlO1xuXG4gICAgY29uc3QgZmluZEVsZW1lbnRXaXRoRGF0YUF0dHIgPSAoX2VsZW1lbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgX2VsZW1lbnQuaGFzQXR0cmlidXRlKGRhdGFBdHRyKSAmJlxuICAgICAgICBfZWxlbWVudC5nZXRBdHRyaWJ1dGUoZGF0YUF0dHIpID09PSB0aGlzLnVpZFxuICAgICAgKSB7XG4gICAgICAgIGNvbmRpdGlvblR3byA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5kRWxlbWVudFdpdGhEYXRhQXR0cihfZWxlbWVudC5wYXJlbnROb2RlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGV2ZW50LnRhcmdldC5oYXNBdHRyaWJ1dGUoZGF0YUF0dHIpKSB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShkYXRhQXR0cikgPT09IHRoaXMudWlkKSB7XG4gICAgICAgIGNvbmRpdGlvbk9uZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgLy8gTm8gc3VwcG9ydCBpbiBzYWZhcmlcbiAgICAgIGlmIChldmVudC50YXJnZXQucGF0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50LnBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5wYXRoW2ldLmhhc0F0dHJpYnV0ZShkYXRhQXR0cikgJiZcbiAgICAgICAgICAgIGV2ZW50LnBhdGhbaV0uZ2V0QXR0cmlidXRlKGRhdGFBdHRyKSA9PT0gdGhpcy51aWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbmRpdGlvblR3byA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIC8vIFRoaXMgc2hvdWxkIHdvcmsgZm9yIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBgZXZlbnQudGFyZ2V0LnBhdGhgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5kRWxlbWVudFdpdGhEYXRhQXR0cihldmVudC50YXJnZXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb25kaXRpb25PbmUgfHwgY29uZGl0aW9uVHdvO1xuICB9XG4gIF9ldmVudHMoKSB7XG4gICAgLy8gUmVzaXplIEV2ZW50c1xuICAgIGlmICghR2luZ2FidWxvdXMuZXZlbnRzLnJlc2l6ZSkge1xuICAgICAgR2luZ2FidWxvdXMucmVnaXN0ZXJHbG9iYWxFdmVudExpc3RlbmVyKCdyZXNpemUnLCB3aW5kb3cpO1xuICAgIH1cbiAgICBHaW5nYWJ1bG91cy5ldmVudHMucmVzaXplLnJlZ2lzdGVyQ2FsbGJhY2soKCkgPT4gdGhpcy5fb25SZXNpemUoKSk7XG5cbiAgICAvLyBDbGljayBFdmVudHNcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldC5vZmZzZXRQYXJlbnQuZ2V0QXR0cmlidXRlKHRoaXMuYXR0ci51aWQpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudWlkKTtcbiAgICAgIC8vIGlmIChcbiAgICAgIC8vICAgdGhpcy5yZXNwb25zaXZlLmlzQWN0aXZlKCkgJiZcbiAgICAgIC8vICAgZXZlbnQudGFyZ2V0Lm9mZnNldFBhcmVudC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLnVpZCkgPT09IHRoaXMudWlkXG4gICAgICAvLyApIHtcbiAgICAgIGlmICh0aGlzLnJlc3BvbnNpdmUuaXNBY3RpdmUoKSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKHRoaXMuYXR0ci5vcGVuKSk7XG4gICAgICAgIC8vIE9wZW4gRXZlbnRcbiAgICAgICAgaWYgKHRoaXMuX2V2ZW50TWF0Y2hlcyh0aGlzLmF0dHIub3BlbiwgZXZlbnQpKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpcmVkIG9wZW4gZXZlbnQnKTtcbiAgICAgICAgICB0aGlzLl9zZXRTdGF0ZSh0aGlzLm9wdGlvbnMuc3RhdGVzLmV4cGFuZGVkKTtcblxuICAgICAgICAgIC8vIEhhbmRsZSBjdXN0b20gYW5pbWF0aW9uIGZ1bmN0aW9uc1xuICAgICAgICAgIGlmICghIXRoaXMuYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBHaW5nYWJ1bG91cy5hbmltYXRpb25zW3RoaXMuYW5pbWF0aW9uXS5hbmltYXRlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2xvc2UgRXZlbnRcbiAgICAgICAgaWYgKHRoaXMuX2V2ZW50TWF0Y2hlcyh0aGlzLmF0dHIuY2xvc2UsIGV2ZW50KSkge1xuICAgICAgICAgIHRoaXMuX3NldFN0YXRlKHRoaXMub3B0aW9ucy5zdGF0ZXMuY29sbGFwc2VkKTtcblxuICAgICAgICAgIC8vIEhhbmRsZSBjdXN0b20gYW5pbWF0aW9uIGZ1bmN0aW9uc1xuICAgICAgICAgIGlmICghIXRoaXMuYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBHaW5nYWJ1bG91cy5hbmltYXRpb25zW3RoaXMuYW5pbWF0aW9uXS5hbmltYXRlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gY2xhc3MgQ2FyZCBleHRlbmRzIEV4cGFuZCB7XG4vLyAgIGdldCBkZWZhdWx0cygpIHtcbi8vICAgICByZXR1cm4ge1xuLy8gICAgICAgZGF0YUF0dHI6ICAgICAgR2luZ2FidWxvdXMubW9kdWxlcy5DYXJkLmRhdGFBdHRyLFxuLy8gICAgICAgY2xhc3M6ICAgICAgICAgJ2V4cGFuZGFibGUnLFxuLy8gICAgICAgdHlwZTogICAgICAgICAgJ2Jhc2ljJyxcbi8vICAgICAgIGRlZmF1bHRTdGF0ZTogICdjb2xsYXBzZWQnLFxuLy8gICAgICAgaW5hY3RpdmVTdGF0ZTogJ2luYWN0aXZlJyxcbi8vICAgICAgIHN0YXRlczogICAgICAgIHtcbi8vICAgICAgICAgZXhwYW5kZWQ6ICAnZXhwYW5kZWQnLFxuLy8gICAgICAgICBjb2xsYXBzZWQ6ICdjb2xsYXBzZWQnXG4vLyAgICAgICB9LFxuLy8gICAgICAgYW5pbWF0aW9uRnVuYzogbnVsbFxuLy8gICAgIH07XG4vLyAgIH1cbi8vICAgaW5pdCgpIHtcbi8vICAgICAvLyBjb25zb2xlLmxvZygnYWN0aXZlIG9uIGluaXQ6JywgdGhpcy5yZXNwb25zaXZlLmlzQWN0aXZlKCkpO1xuLy8gICAgIHRoaXMuX3NldFVJRCgpO1xuLy8gICAgIC8vIFNldCBEZWZhdWx0IFN0YXRlXG4vLyAgICAgaWYgKHRoaXMucmVzcG9uc2l2ZS5pc0FjdGl2ZSgpKSB7XG4vLyAgICAgICB0aGlzLl9zZXRTdGF0ZSh0aGlzLm9wdGlvbnMuZGVmYXVsdFN0YXRlKTtcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgdGhpcy5fc2V0U3RhdGUodGhpcy5vcHRpb25zLmluYWN0aXZlU3RhdGUpO1xuLy8gICAgIH1cbi8vICAgICAvLyBIYW5kbGUgRXZlbnRzXG4vLyAgICAgdGhpcy5fZXZlbnRzKCk7XG4vLyAgIH1cbi8vICAgX1xuLy8gfVxuXG5HaW5nYWJ1bG91cy5yZWdpc3Rlck1vZHVsZShFeHBhbmQsICdFeHBhbmQnKTtcbi8vIEdpbmdhYnVsb3VzLnJlZ2lzdGVyTW9kdWxlKENhcmQsICdDYXJkJyk7XG59KCk7XG4iLCIndXNlIHN0cmljdCc7XG4hZnVuY3Rpb24oKSB7XG4vKipcbiAqIFBhbmUgTW9kdWxlXG4gKiBAbW9kdWxlIHBhbmVcbiAqL1xuY2xhc3MgUGFuZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGluc2F0bmNlIG9mIGEgcGFuZS5cbiAgICogQGNsYXNzXG4gICAqIEBmaXJlcyBQYW5lI19pbml0XG4gICAqIEBwYXJhbSAge09iamVjdH0gICAgZWxlbWVudCAgICAgICAgICAtIHRoZSBwYW5lIERPTSBub2RlLlxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIGluaGVyaXRlZE9wdGlvbnMgLSBQYXJzZWQgb3B0aW9ucyBmcm9tIHBhcmVudCBtb2R1bGUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBpbmhlcml0ZWRPcHRpb25zKSB7XG4gICAgdGhpcy5lbGVtZW50ICAgICAgICA9IGVsZW1lbnQ7XG4gICAgdGhpcy5vcmlnaW4gICAgICAgICA9IHRoaXMuX2dldE9yaWdpbigpO1xuICAgIHRoaXMucG9zaXRpb24gICAgICAgPSB0aGlzLm9yaWdpbjtcbiAgICB0aGlzLmNsYXNzZXMgICAgICAgID0gaW5oZXJpdGVkT3B0aW9ucy5jbGFzc2VzO1xuICAgIGlmICh0aGlzLl9pc0R5bmFtaWMoKSkge1xuICAgICAgdGhpcy5pbmplY3QgPSBuZXcgR2luZ2FidWxvdXMuSW5qZWN0KGVsZW1lbnQpO1xuICAgIH1cbiAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0gMDtcbiAgICB0aGlzLnJlc3BvbnNpdmUgPSBuZXcgR2luZ2FidWxvdXMuUmVzcG9uc2l2ZShlbGVtZW50KTtcbiAgICB0aGlzLmRlYnVnID0gbmV3IEdpbmdhYnVsb3VzLkRlYnVnKCdQYW5lJyk7XG4gICAgdGhpcy5faW5pdCgpO1xuICB9XG5cbiAgZ2V0IG9yaWdpbkNsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXRQb3NpdGlvbkNsYXNzKHRoaXMucmV0cml2ZU9yaWdpbigpKTtcbiAgfVxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIHBhbmUgYnkgYWRkaW5nIHRoZSBwcm9wZXIgY2xhc3NlcyBmb3IgYW4gaW5hY3RpdmUgcGFuZS5cbiAgICogQG1ldGhvZCBfaW5pdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2luaXQoKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc2VzLmZyb3plbiwgdGhpcy5jbGFzc2VzLmZpeGVkKTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9nZXRPcmRlckNsYXNzKHRoaXMub3JpZ2luQ2xhc3MpKTtcbiAgfVxuICBfaXNEeW5hbWljKCkge1xuICAgIGlmICh0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWluamVjdC1hcGknKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHBhbmUncyBvcmlnaW4gYmFzZWQgb24gaXQncyBjbGFzcyBvbiBkb2N1bWVudCBsb2FkLlxuICAgKiBAbWV0aG9kIGdldE9yaWdpblxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBUaGUgcGFuZXMgZ3JpZCwgd2l0aCBbMCwgMF0gYmVpbmcgdGhlIHZpZXdwb3J0OlxuICAgKlxuICAgKiB8IC0xLC0xIHwgMCwtMSB8IDEsLTEgfFxuICAgKiB8LS0tLS0tLXwtLS0tLS18LS0tLS0tfFxuICAgKiB8IC0xLDAgIHwgMCwwICB8IDEsMCAgfFxuICAgKiB8LS0tLS0tLXwtLS0tLS18LS0tLS0tfFxuICAgKiB8IC0xLDEgIHwgMCwxICB8IDEsMSAgfFxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgb24gdGhlIGdyaWQuXG4gICAqL1xuICBfZ2V0T3JpZ2luKCkge1xuICAgIGlmICh0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyaWdodCcpKSB7XG4gICAgICByZXR1cm4gWzEsIDBdO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYWJvdmUnKSkge1xuICAgICAgcmV0dXJuIFswLCAtMV07XG4gICAgfVxuICAgIGlmICh0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiZWxvdycpKSB7XG4gICAgICByZXR1cm4gWzAsIDFdO1xuICAgIH1cbiAgICByZXR1cm4gWy0xLCAwXTtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgcHJvcGVyIGNzcyBjbGFzcyBiYXNlZCBvbiB0aGUgcGFuZSdzIGNvb3JkaW5hdGVzLlxuICAgKiBAbWV0aG9kIF9nZXRQb3NpdGlvbkNsYXNzXG4gICAqIEBwYXJhbSAge0FycmF5fSAgICAgICAgICBjb29yZGluYXRlcyAtIFRoZSBjb29yZGluYXRlcyBvZiB0aGUgcGFuZS5cbiAgICogQHJldHVybiB7U3RyaW5nfEJvb2xlYW59ICAgICAgICAgICAgIC0gVGhlIGNzcyBjbGFzcywgb3IgZmFsc2UgaWYgWzAsIDBdIGlzIHBhc3NlZC5cbiAgICovXG4gIF9nZXRQb3NpdGlvbkNsYXNzKGNvb3JkaW5hdGVzKSB7XG4gICAgbGV0IGNzc0NsYXNzID0gW107XG4gICAgaWYgKGNvb3JkaW5hdGVzWzFdID09PSAtMSkge1xuICAgICAgY3NzQ2xhc3MucHVzaCh0aGlzLmNsYXNzZXMuYWJvdmUpO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZXNbMV0gPT09IDEpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2godGhpcy5jbGFzc2VzLmJlbG93KTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVzWzBdID09PSAtMSkge1xuICAgICAgY3NzQ2xhc3MucHVzaCh0aGlzLmNsYXNzZXMubGVmdCk7XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlc1swXSA9PT0gMSkge1xuICAgICAgY3NzQ2xhc3MucHVzaCh0aGlzLmNsYXNzZXMucmlnaHQpO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZXNbMF0gPT09IDAgJiYgY29vcmRpbmF0ZXNbMV0gPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gc2hvdWxkIHRoaXMgYmUgYW4gZW1wdHkgc3RyaW5nP1xuICAgIH1cbiAgICBpZiAoY3NzQ2xhc3MubGVuZ3RoID49IDIpIHtcbiAgICAgIHJldHVybiBjc3NDbGFzcy5qb2luKCctJyk7XG4gICAgfVxuICAgIHJldHVybiBjc3NDbGFzcy50b1N0cmluZygpO1xuICB9XG4gIF9nZXRPcmRlckNsYXNzKHBvc2l0aW9uQ2xhc3MpIHtcbiAgICBpZiAocG9zaXRpb25DbGFzcykge1xuICAgICAgcmV0dXJuIGAke3Bvc2l0aW9uQ2xhc3N9LW9yZGVyYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke3RoaXMub3JpZ2luQ2xhc3N9LW9yZGVyYDtcbiAgfVxuICBfc3RvcmVTY3JvbGxQb3NpdGlvbigpIHtcbiAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgdGhpcy5kZWJ1Zy5tZXNzYWdlKGBzdG9yZWQ6ICR7dGhpcy5zY3JvbGxQb3NpdGlvbn1gKTtcbiAgICAvLyBjb25zb2xlLmxvZygnc3RvcmVkOicsIHRoaXMuc2Nyb2xsUG9zaXRpb24pO1xuICB9XG4gIF9yZXN0b3JlU2Nyb2xsUG9zaXRpb24oZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50ID09PSB3aW5kb3cpIHtcbiAgICAgIGVsZW1lbnQuc2Nyb2xsVG8oMCwgdGhpcy5zY3JvbGxQb3NpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxQb3NpdGlvbjtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXN0b3JlOicsIHRoaXMuc2Nyb2xsUG9zaXRpb24pO1xuICAgIH1cbiAgfVxuICBfc2V0V2luZG93U2Nyb2xsUG9zaXRpb24oKSB7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsUG9zaXRpb247XG4gICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbFBvc2l0aW9uO1xuICB9XG4gIF9zZXRTY3JvbGxQb3NpdGlvbldoZW5GaXhlZCgpIHtcbiAgICB0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxQb3NpdGlvbjtcbiAgfVxuICAvKipcbiAgICogQnJpbmdzIHRoZSBwYW5lIGludG8gYW4gYWN0aXZlIHN0YXRlLlxuICAgKiBAbWV0aG9kIGFjdGl2YXRlXG4gICAqXG4gICAqIEBmaXJlcyBQYW5lcyNfc2V0U2Nyb2xsUG9zaXRpb25cbiAgICovXG4gIGFjdGl2YXRlKCkge1xuICAgIC8vIFVwZGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHBhbmVcbiAgICB0aGlzLnBvc2l0aW9uID0gWzAsIDBdO1xuICAgIC8vIGxldCBjc3NDbGFzcyA9IHRoaXMuX2dldFBvc2l0aW9uQ2xhc3ModGhpcy5wb3NpdGlvbik7XG4gICAgLy8gVW5mcmVlemUgcGFuZVxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2xhc3Nlcy5mcm96ZW4sIHRoaXMuY2xhc3Nlcy5maXhlZCk7XG4gICAgLy8gUmVtb3ZlIGZsZXggb3JkZXIgY2xhc3NcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9nZXRPcmRlckNsYXNzKHRoaXMub3JpZ2luQ2xhc3MpKTtcbiAgICAvLyBBZGQgYWN0aXZlIGNsYXNzXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc2VzLmFjdGl2ZSk7XG4gICAgLy8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb25cbiAgICAvLyB0aGlzLl9yZXN0b3JlU2Nyb2xsUG9zaXRpb24odGhpcy5lbGVtZW50KTtcbiAgICAvLyBpZiAoKVxuICAgIHRoaXMuX3NldFdpbmRvd1Njcm9sbFBvc2l0aW9uKCk7XG4gICAgLy8gUmVtb3ZlIHRyYW5zZm9ybSBjbGFzcyB0byBiZWdpbiB0cmFuc2l0aW9uXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5vcmlnaW5DbGFzcyk7XG4gICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgLy8gICB0aGlzLl9yZXN0b3JlU2Nyb2xsUG9zaXRpb24od2luZG93KTtcbiAgICAvLyB9LCAzMDApO1xuICB9XG4gIC8qKlxuICAgKiBCcmluZ3MgdGhlIHBhbmUgaW50byBhbiBpbmFjdGl2ZSBzdGF0ZVxuICAgKiBAbWV0aG9kIGRlYWN0aXZhdGVcbiAgICovXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5fc3RvcmVTY3JvbGxQb3NpdGlvbigpO1xuICAgIC8vIFVwZGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHBhbmVcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5vcmlnaW47XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5yZXRyaXZlT3JpZ2luKCkpO1xuICAgIC8vIGxldCBjc3NDbGFzcyA9IHRoaXMuX2dldFBvc2l0aW9uQ2xhc3ModGhpcy5wb3NpdGlvbik7XG4gICAgLy8gVGFrZSBjYXJlIG9mIG1vc3Qgb2YgdGhlIGNsYXNzZXNcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcbiAgICAgIHRoaXMuY2xhc3Nlcy5mcm96ZW4sXG4gICAgICB0aGlzLmNsYXNzZXMuZml4ZWQsXG4gICAgICB0aGlzLl9nZXRPcmRlckNsYXNzKHRoaXMub3JpZ2luQ2xhc3MpXG4gICAgKTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNsYXNzZXMuYWN0aXZlKTtcbiAgICAvLyBUYWtlIGNhcmUgb2Ygc2Nyb2xsIHBvc2l0aW9uXG4gICAgdGhpcy5fc2V0U2Nyb2xsUG9zaXRpb25XaGVuRml4ZWQoKTtcbiAgICAvLyBBZGQgdGhlIHRyYW5zZm9ybSBjbGFzcyB0byBiZWdpbiB0cmFuc2l0aW9uXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5vcmlnaW5DbGFzcyk7XG4gIH1cbiAgcmV0cml2ZU9yaWdpbigpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm9yaWdpbik7XG4gIH1cbiAgdXBkYXRlUG9zaXRpb24oY29vcmRpbmF0ZXMpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gY29vcmRpbmF0ZXM7XG4gIH1cbn1cblxuY2xhc3MgSG9tZVBhbmUgZXh0ZW5kcyBQYW5lIHtcbiAgX2luaXQoKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc2VzLmFjdGl2ZSk7XG4gIH1cbiAgX29wcG9zaXRlQ29vcmRpbmFudGVzKGNvb3JkaW5hdGVzKSB7XG4gICAgbGV0IG91dHB1dCA9IGNvb3JkaW5hdGVzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0cHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob3V0cHV0W2ldID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgb3V0cHV0W2ldICo9IC0xO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG4gIGFjdGl2YXRlKCkge1xuICAgIGxldCBjc3NDbGFzcyA9IHRoaXMuX2dldFBvc2l0aW9uQ2xhc3ModGhpcy5wb3NpdGlvbik7XG5cbiAgICB0aGlzLnBvc2l0aW9uID0gWzAsIDBdO1xuICAgIC8vIFVuZnJlZXplIHBhbmUgYW5kIHJlbW92ZSBvcmRlciBjbGFzc1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgdGhpcy5jbGFzc2VzLmZyb3plbixcbiAgICAgIHRoaXMuY2xhc3Nlcy5maXhlZCxcbiAgICAgIHRoaXMuX2dldE9yZGVyQ2xhc3MoY3NzQ2xhc3MpXG4gICAgKTtcbiAgICAvLyBBZGQgYWN0aXZlIGNsYXNzXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc2VzLmFjdGl2ZSk7XG4gICAgLy8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb25cbiAgICAvLyB0aGlzLl9yZXN0b3JlU2Nyb2xsUG9zaXRpb24odGhpcy5lbGVtZW50KTtcbiAgICB0aGlzLl9zZXRXaW5kb3dTY3JvbGxQb3NpdGlvbigpO1xuICAgIC8vIFJlbW92ZSB0cmFuc2Zvcm0gY2xhc3MgdG8gYmVnaW4gdHJhbnNpdGlvblxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNzc0NsYXNzKTtcbiAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAvLyAgIHRoaXMuX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbih3aW5kb3cpO1xuICAgIC8vIH0sIDMwMCk7XG4gIH1cbiAgZGVhY3RpdmF0ZShvcmlnaW5PZkFjdGl2ZVBhbmUpIHtcbiAgICB0aGlzLl9zdG9yZVNjcm9sbFBvc2l0aW9uKCk7XG4gICAgLy8gVXBkYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgcGFuZVxuICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLl9vcHBvc2l0ZUNvb3JkaW5hbnRlcyhvcmlnaW5PZkFjdGl2ZVBhbmUpO1xuICAgIGxldCBjc3NDbGFzcyA9IHRoaXMuX2dldFBvc2l0aW9uQ2xhc3ModGhpcy5wb3NpdGlvbik7XG4gICAgLy8gVGFrZSBjYXJlIG9mIG1vc3Qgb2YgdGhlIGNsYXNzZXNcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcbiAgICAgIHRoaXMuY2xhc3Nlcy5mcm96ZW4sXG4gICAgICB0aGlzLmNsYXNzZXMuZml4ZWQsXG4gICAgICB0aGlzLl9nZXRPcmRlckNsYXNzKGNzc0NsYXNzKVxuICAgICk7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jbGFzc2VzLmFjdGl2ZSk7XG4gICAgLy8gVGFrZSBjYXJlIG9mIHNjcm9sbCBwb3NpdGlvblxuICAgIHRoaXMuX3NldFNjcm9sbFBvc2l0aW9uV2hlbkZpeGVkKCk7XG4gICAgLy8gQWRkIHRoZSB0cmFuc2Zvcm0gY2xhc3MgdG8gYmVnaW4gdHJhbnNpdGlvblxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzKTtcbiAgfVxufVxuY2xhc3MgRHluYW1pY1BhbmUgZXh0ZW5kcyBQYW5lIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgaW5oZXJpdGVkT3B0aW9ucykge1xuICAgIHN1cGVyKGVsZW1lbnQsIGluaGVyaXRlZE9wdGlvbnMpO1xuICAgIHRoaXMuaW5qZWN0ID0gbmV3IEdpbmdhYnVsb3VzLkluamVjdChlbGVtZW50KTtcbiAgfVxufVxuY2xhc3MgQ2Fyb3VzZWxQYW5lIGV4dGVuZHMgUGFuZSB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGluaGVyaXRlZE9wdGlvbnMpIHtcbiAgICBzdXBlcihlbGVtZW50LCBpbmhlcml0ZWRPcHRpb25zKTtcbiAgICB0aGlzLmRlYnVnID0gbmV3IEdpbmdhYnVsb3VzLkRlYnVnKCdDYXJvdXNlbFBhbmUnKTtcbiAgICB0aGlzLmNhcm91c2VsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNhcm91c2VsLXBhbmVzXScpO1xuICAgIHRoaXMudGl0bGVCYXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBhbmUtY2Fyb3VzZWwtdGl0bGUtYmFyJyk7XG4gICAgdGhpcy5fZXZlbnRzKCk7XG4gIH1cbiAgX2dvVG9QYW5lKHBhbmUpIHtcbiAgICBsZXQgdHJhbnNsYXRlO1xuICAgIGlmIChwYW5lID09PSAnbGVmdCcpIHtcbiAgICAgIHRyYW5zbGF0ZSA9ICd0cmFuc2xhdGVYKDApJztcbiAgICB9XG4gICAgaWYgKHBhbmUgPT09ICdjZW50ZXInKSB7XG4gICAgICB0cmFuc2xhdGUgPSAnJztcbiAgICB9XG4gICAgaWYgKHBhbmUgPT09ICdyaWdodCcpIHtcbiAgICAgIHRyYW5zbGF0ZSA9ICd0cmFuc2xhdGVYKC0yMDAlKSc7XG4gICAgfVxuICAgIHRoaXMuY2Fyb3VzZWwuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNsYXRlO1xuICAgIHRoaXMudGl0bGVCYXIuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNsYXRlO1xuICB9XG4gIF9ldmVudHMoKSB7XG4gICAgbGV0IGF0dHIgPSAnZGF0YS1wYW5lcy1uYXYnO1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC5oYXNBdHRyaWJ1dGUoYXR0cikpIHtcbiAgICAgICAgbGV0IGF0dHJWYWx1ZSA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIGlmIChhdHRyVmFsdWUgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIHRoaXMuX2dvVG9QYW5lKCdsZWZ0Jyk7XG4gICAgICAgICAgdGhpcy5kZWJ1Zy5tZXNzYWdlKCdsZWZ0IG1vdmVtZW50IHRyaWdnZXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyVmFsdWUgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgdGhpcy5fZ29Ub1BhbmUoJ2NlbnRlcicpO1xuICAgICAgICAgIHRoaXMuZGVidWcubWVzc2FnZSgnY2VudGVyIG1vdmVtZW50IHRyaWdnZXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyVmFsdWUgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICB0aGlzLl9nb1RvUGFuZSgncmlnaHQnKTtcbiAgICAgICAgICB0aGlzLmRlYnVnLm1lc3NhZ2UoJ3JpZ2h0IG1vdmVtZW50IHRyaWdnZXJlZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuR2luZ2FidWxvdXMucmVnaXN0ZXJNb2R1bGUoUGFuZSwgJ1BhbmUnKTtcbkdpbmdhYnVsb3VzLnJlZ2lzdGVyTW9kdWxlKEhvbWVQYW5lLCAnSG9tZVBhbmUnKTtcbkdpbmdhYnVsb3VzLnJlZ2lzdGVyTW9kdWxlKER5bmFtaWNQYW5lLCAnRHluYW1pY1BhbmUnKTtcbkdpbmdhYnVsb3VzLnJlZ2lzdGVyTW9kdWxlKENhcm91c2VsUGFuZSwgJ0Nhcm91c2VsUGFuZScpO1xufSgpO1xuIiwiIWZ1bmN0aW9uKCkge1xuXG5jbGFzcyBQYW5lcyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGluc2F0bmNlIG9mIFBhbmVsc1xuICAgKiBAY2xhc3NcbiAgICogQHJlcXVpcmVzIFNjcm9sbFBvc2l0aW9uXG4gICAqIEByZXF1aXJlcyBEZWJ1Z1xuICAgKlxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZWxlbWVudCAtIGpRdWVyeSBvYmplY3QgdGhhdCBpcyB0aGUgaGlnaGVzdCBwYW5lcyBhbnNlc3Rvci5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBDYW4gT3ZlcnJpZGUgZGVmYXVsdCB1aSBtb2R1bGUgY29uZmlnLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBHaW5nYWJ1bG91cy5kZWVwRXh0ZW5kKHt9LCB0aGlzLmRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICB0aGlzLmNsYXNzZXMgPSB0aGlzLm9wdGlvbnMuY2xhc3NlcztcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYWN0aXZlOiAgICdob21lJyxcbiAgICAgIHByZXZpb3VzOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5wYW5lcyA9IHt9O1xuICB9XG4gIGdldCBkZWZhdWx0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YUF0dHI6ICAgICAgICAgIEdpbmdhYnVsb3VzLm1vZHVsZXMuUGFuZXMuZGF0YUF0dHIsXG4gICAgICBwYW5lRGF0YUF0dHI6ICAgICAgJ2RhdGEtcGFuZScsXG4gICAgICB0cmFuc2xhdGVEaXN0YW5jZTogMTAwLFxuICAgICAgY2xhc3NlczogICAgICAgICAgIHtcbiAgICAgICAgcGFuZXM6ICAncGFuZXMnLFxuICAgICAgICBwYW5lOiAgICdwYW5lJyxcbiAgICAgICAgZnJvemVuOiAnZnJvemVuLXBhbmUnLFxuICAgICAgICBmaXhlZDogICdmaXhlZC1wYW5lJyxcbiAgICAgICAgYWN0aXZlOiAnYWN0aXZlJyxcbiAgICAgICAgbGVmdDogICAnbGVmdCcsXG4gICAgICAgIHJpZ2h0OiAgJ3JpZ2h0JyxcbiAgICAgICAgYWJvdmU6ICAnYWJvdmUnLFxuICAgICAgICBiZWxvdzogICdiZWxvdydcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGdldCBhdHRyKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwYXJlbnQ6IHRoaXMub3B0aW9ucy5kYXRhQXR0cixcbiAgICAgIG1haW46ICAgYCR7dGhpcy5vcHRpb25zLnBhbmVEYXRhQXR0cn0taG9tZWAsXG4gICAgICBwYW5lOiAgIHRoaXMub3B0aW9ucy5wYW5lRGF0YUF0dHIsXG4gICAgICBvcGVuOiAgIGAke3RoaXMub3B0aW9ucy5wYW5lRGF0YUF0dHJ9LW9wZW5gLFxuICAgICAgY2xvc2U6ICBgJHt0aGlzLm9wdGlvbnMucGFuZURhdGFBdHRyfS1jbG9zZWBcbiAgICB9O1xuICB9XG4gIGdldCB0YXJnZXQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcmVudDogYFske3RoaXMub3B0aW9ucy5kYXRhQXR0cn1dYCxcbiAgICAgIG1haW46ICAgYFske3RoaXMub3B0aW9ucy5wYW5lRGF0YUF0dHJ9LWhvbWVdYCxcbiAgICAgIHBhbmU6ICAgYFske3RoaXMub3B0aW9ucy5wYW5lRGF0YUF0dHJ9XWAsXG4gICAgICBvcGVuOiAgIGBbJHt0aGlzLm9wdGlvbnMucGFuZURhdGFBdHRyfS1vcGVuXWAsXG4gICAgICBjbG9zZTogIGBbJHt0aGlzLm9wdGlvbnMucGFuZURhdGFBdHRyfS1jbG9zZV1gXG4gICAgfTtcbiAgfVxuICBpbml0KCkge1xuICAgIHRoaXMuX3JlZ2lzdGVyUGFuZXMoKTtcbiAgICB0aGlzLl9ldmVudHMoKTtcbiAgfVxuICBfdXBkYXRlU3RhdGUoaWQpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5hY3RpdmUgIT09IGlkKSB7XG4gICAgICB0aGlzLnN0YXRlLnByZXZpb3VzID0gdGhpcy5zdGF0ZS5hY3RpdmU7XG4gICAgICB0aGlzLnN0YXRlLmFjdGl2ZSA9IGlkO1xuICAgICAgdGhpcy5fdXBkYXRlUG9zaXRpb25zKCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLCB0aGlzLnBhbmVzKTtcbiAgICB9XG4gIH1cbiAgX3VwZGF0ZVBvc2l0aW9ucygpIHtcbiAgICAvLyBOT1RFIFlPVSBNVVNUIFJVTiBUSEUgREVBQ1RJVkFURSBNRVRIT0QgQkVGT1JFIFRIRSBBQ1RJVkFURSBNRVRIT0QuXG4gICAgLy8gICAgICBGYWlsaW5nIHRvIGRvIHNvIHdpbGwgcmVzdWx0IGluIHRoZSBzY3JvbGwgcG9zaXRpb24gbm90IGJlaW5nIHN0b3JlZC5cbiAgICBpZiAodGhpcy5zdGF0ZS5wcmV2aW91cyA9PT0gJ2hvbWUnKSB7XG4gICAgICB0aGlzLnBhbmVzW3RoaXMuc3RhdGUucHJldmlvdXNdLmRlYWN0aXZhdGUodGhpcy5wYW5lc1t0aGlzLnN0YXRlLmFjdGl2ZV0ucmV0cml2ZU9yaWdpbigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wYW5lc1t0aGlzLnN0YXRlLnByZXZpb3VzXS5kZWFjdGl2YXRlKCk7XG4gICAgfVxuICAgIHRoaXMucGFuZXNbdGhpcy5zdGF0ZS5hY3RpdmVdLmFjdGl2YXRlKCk7XG4gIH1cbiAgX3JlZ2lzdGVyUGFuZXMoKSB7XG4gICAgbGV0IHBhbmVzSW5Eb2N1bWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMudGFyZ2V0LnBhbmUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFuZXNJbkRvY3VtZW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQga2V5ID0gcGFuZXNJbkRvY3VtZW50W2ldLmdldEF0dHJpYnV0ZSh0aGlzLmF0dHIucGFuZSk7XG5cbiAgICAgIC8vIGlmIHRoZSBkYXRhIGF0dHIgaGFzIG5vIHZhbHVlLCB0aGVuIGl0J3MgYSBuZXN0ZWQgcGFuZSwgYW5kIHdpbGwgYmUgc2tpcHBlZFxuICAgICAgaWYgKGtleSAhPT0gJycgJiYga2V5ICE9PSAnaG9tZScpIHtcbiAgICAgICAgaWYgKCEhcGFuZXNJbkRvY3VtZW50W2ldLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNhcm91c2VsLXBhbmVzXScpKSB7XG4gICAgICAgICAgdGhpcy5wYW5lc1trZXldID0gbmV3IEdpbmdhYnVsb3VzLkNhcm91c2VsUGFuZShcbiAgICAgICAgICAgIHBhbmVzSW5Eb2N1bWVudFtpXSxcbiAgICAgICAgICAgIHRoaXMub3B0aW9uc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5wYW5lc1trZXldID0gbmV3IEdpbmdhYnVsb3VzLlBhbmUocGFuZXNJbkRvY3VtZW50W2ldLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSAnaG9tZScpIHtcbiAgICAgICAgdGhpcy5wYW5lc1trZXldID0gbmV3IEdpbmdhYnVsb3VzLkhvbWVQYW5lKHBhbmVzSW5Eb2N1bWVudFtpXSwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2V2ZW50cygpIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIC8vIE9wZW4gRXZlbnRzIFRyaWdnZXJlZFxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5oYXNBdHRyaWJ1dGUodGhpcy5hdHRyLm9wZW4pKSB7XG4gICAgICAgIGxldCBpZCA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyLm9wZW4pO1xuICAgICAgICAvLyBJZiBhY3RpdmUgaW4gY3VycmVudCBicmVha3BvaW50XG4gICAgICAgIGlmICh0aGlzLnBhbmVzW2lkXS5yZXNwb25zaXZlLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICB0aGlzLl91cGRhdGVTdGF0ZShpZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtaW5qZWN0JykpIHtcbiAgICAgICAgICAvLyBJbmplY3QgbG9naWMgaGVyZVxuICAgICAgICAgIGxldCBrZXkgPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWluamVjdCcpO1xuICAgICAgICAgIHRoaXMucGFuZXNbaWRdLmluamVjdC51cGRhdGVDb250ZW50KGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2xvc2UgRXZlbnRcbiAgICAgIGlmIChldmVudC50YXJnZXQuaGFzQXR0cmlidXRlKHRoaXMuYXR0ci5jbG9zZSkpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpcmVkIGNsb3NpbmcgZXZlbnQnKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUoJ2hvbWUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5HaW5nYWJ1bG91cy5yZWdpc3Rlck1vZHVsZShQYW5lcywgJ1BhbmVzJyk7XG5cbn0oKTtcbiIsIiFmdW5jdGlvbigpIHtcbmZ1bmN0aW9uIGluaXQoKSB7XG4gIHZhciBwYW5lc05vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEdpbmdhYnVsb3VzLm1vZHVsZXMuUGFuZXMuZGF0YUF0dHJUYXJnZXQpO1xuICB2YXIgcGFuZXMgPSBuZXcgR2luZ2FidWxvdXMuUGFuZXMocGFuZXNOb2RlKTtcbiAgcGFuZXMuaW5pdCgpO1xuXG4gIGxldCBiYWNrZ3JvdW5kTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoR2luZ2FidWxvdXMubW9kdWxlcy5CYWNrZ3JvdW5kLmRhdGFBdHRyVGFyZ2V0KTtcbiAgbGV0IGJhY2tncm91bmQgPSBuZXcgR2luZ2FidWxvdXMuQmFja2dyb3VuZChiYWNrZ3JvdW5kTm9kZSk7XG4gIGJhY2tncm91bmQuaW5pdCgpO1xuXG4gIC8vIGxldCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoR2luZ2FidWxvdXMubW9kdWxlcy5DYXJkLmRhdGFBdHRyVGFyZ2V0KTtcbiAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBjYXJkcy5sZW5ndGg7IGkrKykge1xuICAvLyAgIGxldCBtb2R1bGUgPSBuZXcgR2luZ2FidWxvdXMuQ2FyZChjYXJkc1tpXSk7XG4gIC8vICAgbW9kdWxlLmluaXQoKTtcbiAgLy8gICAvLyBjb25zb2xlLmxvZyhgaW5pdCBjYXJkOiAke2l9YCk7XG4gIC8vIH1cblxuICBsZXQgZXhwYW5kYWJsZU5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChHaW5nYWJ1bG91cy5tb2R1bGVzLkV4cGFuZC5kYXRhQXR0clRhcmdldCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZXhwYW5kYWJsZU5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGV4cGFuZCA9IG5ldyBHaW5nYWJ1bG91cy5FeHBhbmQoZXhwYW5kYWJsZU5vZGVzW2ldKTtcbiAgICBleHBhbmQuaW5pdCgpO1xuICB9XG59XG5cbkdpbmdhYnVsb3VzLnJlZ2lzdGVyR2xvYmFsRXZlbnRMaXN0ZW5lcigncmVzaXplJywgd2luZG93KTtcblxuR2luZ2FidWxvdXMuRGVidWcuY29uZmlnKHRydWUsIHtcbiAgUGFuZTogICAgICAgICB0cnVlLFxuICBEeW5hbWljUGFuZTogIHRydWUsXG4gIENhcm91c2VsUGFuZTogdHJ1ZVxufSk7XG5cbkdpbmdhYnVsb3VzLnJlZ2lzdGVyQW5pbWF0aW9uKCdleHBhbmRpbmdUYWJzJywgKGVsZW1lbnQpID0+IHtcbiAgaWYgKCFlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbmltYXRpb25fYm9yZGVyLWxlZnQnKSkge1xuICAgIC8vIGFkZCBkdW1teSBlbGVtZW50IGZvciBhbmltYXRpbmcgdGhlIGJvcmRlclxuICAgIGNvbnN0IGJvcmRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGZpcnN0Q2hpbGQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aXRsZWQtY2FsbG91dC1oZWFkaW5nJyk7XG4gICAgYm9yZGVyLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGlvbl9ib3JkZXItbGVmdCcpO1xuXG4gICAgZWxlbWVudC5pbnNlcnRCZWZvcmUoYm9yZGVyLCBmaXJzdENoaWxkKTtcbiAgfVxuICBjb25zdCB3cmFwcGVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLWlubmVyIG1haW4uY29udGVudCcpO1xuXG4gIGNvbnN0IHN0YXRlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kJyk7XG4gIGNvbnN0IGFuaW1hdGlvbkNsYXNzID0gJ2FuaW1hdGlvbl9leHBhbmRpbmctdGFicyc7XG4gIGNvbnN0IGV4cGFuZEJhc2UgPSBgJHthbmltYXRpb25DbGFzc31fZXhwYW5kYDtcbiAgY29uc3QgY29sbGFwc2VCYXNlID0gYCR7YW5pbWF0aW9uQ2xhc3N9X2NvbGxhcHNlYDtcblxuICBjb25zdCB0b3BiYXJIZWlnaHQgPSA0MDtcbiAgY29uc3QgcG9zaXRpb25Ub3AgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcblxuICB3cmFwcGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25fZXhwYW5kaW5nLXRhYnNfaW4tcHJvZ3Jlc3MnKTtcblxuICAvLyBFWFBBTkRcbiAgaWYgKHN0YXRlID09PSAnZXhwYW5kZWQnKSB7XG4gICAgd3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9uX2V4cGFuZGluZy10YWJzX3RhYi1hY3RpdmUnKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICBgJHtjb2xsYXBzZUJhc2V9X2NvbGxhcHNlLWJvcmRlcl90cmFuc2l0aW9uYCxcbiAgICAgIGAke2NvbGxhcHNlQmFzZX1fY29sbGFwc2UtYm9yZGVyX2FuaW1hdGVgXG4gICAgKTtcblxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIGAke2NvbGxhcHNlQmFzZX1fc2hpZnQtZG93bl90cmFuc2l0aW9uYCxcbiAgICAgIGAke2NvbGxhcHNlQmFzZX1fc2hpZnQtZG93bl9hbmltYXRlYFxuICAgICk7XG5cbiAgICBHaW5nYWJ1bG91cy5hbmltYXRpb25TZXJpZXMoXG4gICAgICBlbGVtZW50LFxuICAgICAgJ2V4cGFuZGluZy10YWJzX2V4cGFuZCcsXG4gICAgICB7XG4gICAgICAgIGFmdGVyOiAoKSA9PiB7XG4gICAgICAgICAgd3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uX2V4cGFuZGluZy10YWJzX2luLXByb2dyZXNzJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBbXG4gICAgICAgICdzaGlmdC11cCcsXG4gICAgICAgIDYwMCxcbiAgICAgICAgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwLCAtJHtwb3NpdGlvblRvcCAtIHRvcGJhckhlaWdodH1weCwgMClgO1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgWydleHBhbmQtYm9yZGVyJywgNDAwXVxuICAgICk7XG4gIH1cblxuICAvLyBDT0xMQVBTRVxuICBpZiAoc3RhdGUgPT09ICdjb2xsYXBzZWQnKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgYCR7ZXhwYW5kQmFzZX1fc2hpZnQtdXBfdHJhbnNpdGlvbmAsXG4gICAgICBgJHtleHBhbmRCYXNlfV9zaGlmdC11cF9hbmltYXRlYFxuICAgICk7XG5cbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICBgJHtleHBhbmRCYXNlfV9leHBhbmQtYm9yZGVyX3RyYW5zaXRpb25gLFxuICAgICAgYCR7ZXhwYW5kQmFzZX1fZXhwYW5kLWJvcmRlcl9hbmltYXRlYFxuICAgICk7XG5cbiAgICBHaW5nYWJ1bG91cy5hbmltYXRpb25TZXJpZXMoXG4gICAgICBlbGVtZW50LFxuICAgICAgJ2V4cGFuZGluZy10YWJzX2NvbGxhcHNlJyxcbiAgICAgIHtcbiAgICAgICAgYWZ0ZXI6ICgpID0+IHtcbiAgICAgICAgICB3cmFwcGVyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25fZXhwYW5kaW5nLXRhYnNfdGFiLWFjdGl2ZScpO1xuICAgICAgICAgIHdyYXBwZXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGlvbl9leHBhbmRpbmctdGFic19pbi1wcm9ncmVzcycpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgW1xuICAgICAgICAnY29sbGFwc2UtYm9yZGVyJyxcbiAgICAgICAgNDAwXG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICAnc2hpZnQtZG93bicsXG4gICAgICAgIDYwMCxcbiAgICAgICAgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICApO1xuICB9XG59KTtcblxuLy8gQ2FyZCBBbmltYXRpb25cbkdpbmdhYnVsb3VzLnJlZ2lzdGVyQW5pbWF0aW9uKCdleHBhbmRpbmdDYXJkcycsIChlbGVtZW50KSA9PiB7XG4gIGNvbnN0IHN0YXRlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kJyk7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSB7XG4gICAgYm9yZGVyTGVmdDogICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib3JkZXItbGVmdCcpLFxuICAgIG9wdGlvbnNCYXI6ICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1vcHRpb25zLWJhcicpLFxuICAgIGNvdmVyOiAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb3ZlcicpLFxuICAgIGJvdHRvbUNvbnRhaW5lcjogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYm90dG9tLWNvbnRhaW5lcicpXG4gIH07XG5cbiAgLy8gQWN0aXZhdGlvbiBBbmltYXRpb25cbiAgaWYgKHN0YXRlID09PSAnZXhwYW5kZWQnKSB7XG4gICAgR2luZ2FidWxvdXMuYW5pbWF0aW9uU2VyaWVzKFxuICAgICAgZWxlbWVudCxcbiAgICAgICdleHBhbmRpbmctY2FyZHNfZXhwYW5kJyxcbiAgICAgIGZhbHNlLFxuICAgICAgW1xuICAgICAgICAnZXhwYW5kaW5nJyxcbiAgICAgICAgNDAwLFxuICAgICAgICAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luVG9wID0gMDtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XG4gICAgICAgICAgY2hpbGROb2Rlcy5ib3JkZXJMZWZ0LnN0eWxlLmhlaWdodCA9IGAke2VsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gMTB9cHhgO1xuICAgICAgICAgIGNoaWxkTm9kZXMuYm9yZGVyTGVmdC5zdHlsZS5tYXJnaW5Ub3AgPSBudWxsO1xuICAgICAgICB9XG4gICAgICBdXG4gICAgKTtcbiAgfVxuXG4gIC8vIERlYWN0aXZhdGlvbiBBbmltYXRpb25cbiAgaWYgKHN0YXRlID09PSAnY29sbGFwc2VkJykge1xuICAgIEdpbmdhYnVsb3VzLmFuaW1hdGlvblNlcmllcyhcbiAgICAgIGVsZW1lbnQsXG4gICAgICAnZXhwYW5kaW5nLWNhcmRzX2NvbGxhcHNlJyxcbiAgICAgIGZhbHNlLFxuICAgICAgW1xuICAgICAgICAnY29sbGFwc2luZ19wcmUtaGVpZ2h0JyxcbiAgICAgICAgNDAwLFxuICAgICAgICAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luVG9wID0gYC0ke2NoaWxkTm9kZXMub3B0aW9uc0Jhci5vZmZzZXRIZWlnaHR9cHhgO1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gYC0ke2NoaWxkTm9kZXMuYm90dG9tQ29udGFpbmVyLm9mZnNldEhlaWdodH1weGA7XG4gICAgICAgICAgY2hpbGROb2Rlcy5ib3JkZXJMZWZ0LnN0eWxlLmhlaWdodCA9IGAke2NoaWxkTm9kZXMuY292ZXIub2Zmc2V0SGVpZ2h0fXB4YDtcbiAgICAgICAgICBjaGlsZE5vZGVzLmJvcmRlckxlZnQuc3R5bGUubWFyZ2luVG9wID0gYCR7Y2hpbGROb2Rlcy5vcHRpb25zQmFyLm9mZnNldEhlaWdodH1weGA7XG5cbiAgICAgICAgICAvLyBlbGVtZW50LnN0eWxlLmhlaWdodCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICAgIC8vIFtcbiAgICAgIC8vICAgJ2NvbGxhcHNpbmdfcG9zdC1oZWlnaHQnLFxuICAgICAgLy8gICAyMDAsXG4gICAgICAvLyAgIChlbGVtZW50KSA9PiB7XG4gICAgICAvLyAgICAgY29uc3QgaGVpZ2h0ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb3ZlcicpLm9mZnNldEhlaWdodDtcbiAgICAgIC8vICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib3JkZXItbGVmdCcpLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gICAgICAvLyAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICAgICAgLy8gICAgIC8vIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gbnVsbDtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gXVxuICAgICk7XG4gIH1cbn0sIChlbGVtZW50KSA9PiB7XG4gIGNvbnN0IGNoaWxkTm9kZXMgPSB7XG4gICAgYm9yZGVyTGVmdDogICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib3JkZXItbGVmdCcpLFxuICAgIG9wdGlvbnNCYXI6ICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1vcHRpb25zLWJhcicpLFxuICAgIGNvdmVyOiAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb3ZlcicpLFxuICAgIGJvdHRvbUNvbnRhaW5lcjogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYm90dG9tLWNvbnRhaW5lcicpXG4gIH07XG4gIGVsZW1lbnQuc3R5bGUubWFyZ2luVG9wID0gYC0ke2NoaWxkTm9kZXMub3B0aW9uc0Jhci5vZmZzZXRIZWlnaHR9cHhgO1xuICBlbGVtZW50LnN0eWxlLm1hcmdpbkJvdHRvbSA9IGAtJHtjaGlsZE5vZGVzLmJvdHRvbUNvbnRhaW5lci5vZmZzZXRIZWlnaHR9cHhgO1xuXG4gIGNoaWxkTm9kZXMuYm9yZGVyTGVmdC5zdHlsZS5oZWlnaHQgPSBgJHtjaGlsZE5vZGVzLmNvdmVyLm9mZnNldEhlaWdodH1weGA7XG4gIGNoaWxkTm9kZXMuYm9yZGVyTGVmdC5zdHlsZS5tYXJnaW5Ub3AgPSBgJHtjaGlsZE5vZGVzLm9wdGlvbnNCYXIub2Zmc2V0SGVpZ2h0fXB4YDtcbn0pO1xuXG5HaW5nYWJ1bG91cy5hbmltYXRpb25TZXJpZXMoXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkaW5nLXNjcmVlbicpLFxuICAnbG9hZGluZy1zY3JlZW4nLFxuICB7XG4gICAgYmVmb3JlOiAoZWxlbWVudCkgPT4ge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCcubG9hZGluZycpO1xuICAgIH0sXG4gICAgYWZ0ZXI6IChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2xvYWRpbmctY29tcGxldGUnKTtcbiAgICB9XG4gIH0sXG4gIFtcbiAgICAnaW4nLFxuICAgIDIwMFxuICBdLFxuICBbXG4gICAgJ2xvYWRpbmcnLFxuICAgIDYwMFxuICBdLFxuICBbXG4gICAgJ291dCcsXG4gICAgMjAwXG4gIF1cbik7XG4vLyBjb25zb2xlLmxvZyhHaW5nYWJ1bG91cyk7XG5pbml0KCk7XG59KCk7XG4iXX0=